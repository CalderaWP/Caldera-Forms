var calders_forms_check_conditions,calders_forms_init_conditions;(function(a){if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c){var b=this.length>>>0;var d=Number(arguments[1])||0;d=(d<0)?Math.ceil(d):Math.floor(d);if(d<0){d+=b}for(;d<b;d++){if(d in this&&this[d]===c){return d}}return -1}}calders_forms_check_conditions=function(p){if(typeof caldera_conditionals==="undefined"||typeof caldera_conditionals[p]==="undefined"){return}var d=a("#"+p);for(var c in caldera_conditionals[p]){var h=jQuery("#conditional_"+c);if(!h.length){continue}var j=caldera_conditionals[p][c].type,u=caldera_conditionals[p][c].group,k=[];for(var o in u){var e={},b=u[o];for(var m in b){var g=d.find('[data-field="'+b[m].field+'"]'),l=[],v=(typeof b[m].value==="function"?b[m].value():b[m].value);if(typeof b[m].selectors!=="undefined"){for(var s in b[m].selectors){var q=new RegExp(s,"g");v=v.replace(q,a(b[m].selectors[s]).val())}}e[m]=false;if(g.is(":radio,:checkbox")){g=g.filter(":checked")}else{if(g.is("div")){g=jQuery("<input>").val(g.html())}}if(!g.length){l.push(b[m].field)}else{for(var t=0;t<g.length;t++){l.push(g[t].value)}}switch(b[m].compare){case"is":if(l.length){if(l.indexOf(v.toString())>=0){e[m]=true}}break;case"isnot":if(l.length){if(l.indexOf(v)<0){e[m]=true}}break;case">":case"greater":e[m]=parseFloat(l.reduce(function(y,i){return y+i}))>parseFloat(v);break;case"<":case"smaller":e[m]=parseFloat(l.reduce(function(y,i){return y+i}))<parseFloat(v);break;case"startswith":for(var t=0;t<l.length;t++){if(l[t].toLowerCase().substr(0,v.toLowerCase().length)===v.toLowerCase()){e[m]=true}}break;case"endswith":for(var t=0;t<l.length;t++){if(l[t].toLowerCase().substr(l[t].toLowerCase().length-v.toLowerCase().length)===v.toLowerCase()){e[m]=true}}break;case"contains":for(var t=0;t<l.length;t++){if(l[t].toLowerCase().indexOf(v)>=0){e[m]=true}}break}}istrue=true;for(var f in e){if(e[f]===false){istrue=false;break}}k.push(istrue)}var w=jQuery("#conditional-"+c+"-tmpl").html(),x=jQuery("#conditional_"+c),n=jQuery('[data-field="'+c+'"]'),r;if(k.length&&k.indexOf(true)>=0){if(j==="show"){r="show"}else{if(j==="hide"){r="hide"}else{if(j==="disable"){r="disable"}}}}else{if(j==="show"){r="hide"}else{if(j==="disable"){r="enable"}else{r="show"}}}if(r==="show"){if(!x.html().length){x.html(w).trigger("cf.add");jQuery(document).trigger("cf.add")}}else{if(r==="hide"){if(x.html().length){n.val("").empty().prop("checked",false);x.empty().trigger("cf.remove");jQuery(document).trigger("cf.remove")}}else{if(r==="enable"){if(!x.html().length){x.html(w).trigger("cf.add");jQuery(document).trigger("cf.add").trigger("cf.enable")}else{n.prop("disabled",false)}}else{if(r==="disable"){if(!x.html().length){x.html(w).trigger("cf.remove");jQuery(document).trigger("cf.remove").trigger("cf.disable");jQuery('[data-field="'+c+'"]').prop("disabled","disabled")}else{n.prop("disabled","disabled")}}}}}}};calders_forms_init_conditions=function(){jQuery(".caldera_forms_form").on("change keyup","[data-field]",function(c){var b=a(this).closest(".caldera_forms_form").prop("id");calders_forms_check_conditions(b)});a(".caldera_forms_form").each(function(){calders_forms_check_conditions(a(this).closest(".caldera_forms_form").prop("id"))})};if(typeof caldera_conditionals!=="undefined"){calders_forms_init_conditions()}})(jQuery);
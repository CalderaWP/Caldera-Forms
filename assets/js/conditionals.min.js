var calders_forms_check_conditions,calders_forms_init_conditions;!function(e){Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var r=this.length>>>0,a=Number(arguments[1])||0;for(a=0>a?Math.ceil(a):Math.floor(a),0>a&&(a+=r);r>a;a++)if(a in this&&this[a]===e)return a;return-1}),calders_forms_check_conditions=function(e){if("undefined"!=typeof caldera_conditionals[e])for(var r in caldera_conditionals[e]){var a=jQuery("#conditional_"+r);if(a.length){var t=caldera_conditionals[e][r].type,o=caldera_conditionals[e][r].group,i=[];for(var n in o){var s={},d=o[n];for(var c in d){var l=jQuery('[data-field="'+d[c].field+"_"+d[c].instance+'"]'),f=[],h="function"==typeof d[c].value?d[c].value():d[c].value;if(s[c]=!1,l.is(":radio,:checkbox")?l=l.filter(":checked"):l.is("div")&&(l=jQuery("<input>").val(l.html())),l.length)for(var u=0;u<l.length;u++)f.push(l[u].value);else f.push(d[c].field);switch(d[c].compare){case"is":f.length&&f.indexOf(h.toString())>=0&&(s[c]=!0);break;case"isnot":f.length&&f.indexOf(h)<0&&(s[c]=!0);break;case">":case"greater":parseFloat(f.reduce(function(e,r){return e+r}))>parseFloat(h)&&(s[c]=!0);break;case"<":case"smaller":parseFloat(f.reduce(function(e,r){return e+r}))<parseFloat(h)&&(s[c]=!0);break;case"startswith":for(var u=0;u<f.length;u++)f[u].toLowerCase().substr(0,h.toLowerCase().length)===h.toLowerCase()&&(s[c]=!0);break;case"endswith":for(var u=0;u<f.length;u++)f[u].toLowerCase().substr(f[u].toLowerCase().length-h.toLowerCase().length)===h.toLowerCase()&&(s[c]=!0);break;case"contains":for(var u=0;u<f.length;u++)f[u].toLowerCase().indexOf(h)>=0&&(s[c]=!0)}}istrue=!0;for(var g in s)if(s[g]===!1){istrue=!1;break}i.push(istrue)}var m,_=jQuery("#conditional-"+r+"-tmpl").html(),p=jQuery("#conditional_"+r),v=jQuery('[data-field="'+r+'"]');i.length&&i.indexOf(!0)>=0?"show"===t?m="show":"hide"===t?m="hide":"disable"===t&&(m="disable"):m="show"===t?"hide":"disable"===t?"enable":"show","show"===m?p.html().length||(p.html(_).trigger("cf.add"),jQuery(document).trigger("cf.add")):"hide"===m?p.html().length&&(v.val("").empty().prop("checked",!1),p.empty().trigger("cf.remove"),jQuery(document).trigger("cf.remove")):"enable"===m?p.html().length?v.prop("disabled",!1):(p.html(_).trigger("cf.add"),jQuery(document).trigger("cf.add").trigger("cf.enable")):"disable"===m&&(p.html().length?v.prop("disabled","disabled"):(p.html(_).trigger("cf.remove"),jQuery(document).trigger("cf.remove").trigger("cf.disable"),jQuery('[data-field="'+r+'"]').prop("disabled","disabled")))}}},calders_forms_init_conditions=function(){jQuery(".caldera_forms_form").on("change keyup","[data-field]",function(r){var a=e(this).closest(".caldera_forms_form").prop("id");calders_forms_check_conditions(a)}),e(".caldera_forms_form").each(function(){calders_forms_check_conditions(e(this).closest(".caldera_forms_form").prop("id"))})},"undefined"!=typeof caldera_conditionals&&calders_forms_init_conditions()}(jQuery);
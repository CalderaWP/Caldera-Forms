jQuery(function(a){a("body").on("click","#caldera-forms-form-insert,#wp_fs_caldera-forms",function(b){b.preventDefault();var c=a(".caldera-forms-insert-modal");c.fadeIn(100)}),a("body").on("click",".caldera-modal-closer",function(b){b.preventDefault();var c=a(".caldera-forms-insert-modal");c.fadeOut(100)}),a("body").on("click",".caldera-form-shortcode-insert",function(b){b.preventDefault();var d,c=a(".selected-form-shortcode:checked");c.length&&(d='[caldera_form id="'+c.val()+'"]',c.prop("checked",!1),window.send_to_editor(d),a(".caldera-modal-closer").trigger("click"))});var b=wp.media;wp.mce.views.register("caldera_form",{View:{template:b.template("editor-caldera-forms"),initialize:function(a){this.shortcode=a.shortcode,this.fetch()},loadingPlaceholder:function(){return'<div class="loading-placeholder"><div class="dashicons dashicons-cf-logo"></div><div class="wpview-loading"><ins></ins></div></div>'},fetch:function(){var c=this;options={},options.context=this,options.data={action:"cf_get_form_preview",post_id:a("#post_ID").val(),atts:this.shortcode.attrs},this.form=b.ajax(options),this.dfd=this.form.done(function(a){this.form.data=a,c.render(!0)})},getHtml:function(){return this.shortcode.attrs.named,this.dfd&&"pending"===this.dfd.state()&&!this.form.length?"":this.template(this.form.data)}},edit:function(){jQuery("#caldera-forms-form-insert").trigger("click")}})});
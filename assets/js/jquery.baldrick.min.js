!function(a){if(!b){var b={},c={},d={_plugins:{},load:{},bind:{},event:function(a){return a},pre_filter:function(a){return a.data},filter:function(a){return a},target:function(a){if("string"==typeof a.params.success?"function"==typeof window[a.params.success]&&window[a.params.success](a):"function"==typeof a.params.success&&a.params.success(a),a.params.target)if(a.params.target.is("textarea,input")&&"object"==typeof a.data?a.params.target.val(JSON.stringify(a.data)).trigger("change"):a.params.target[a.params.targetInsert](a.data),"string"==typeof a.params.callback){if("function"==typeof window[a.params.callback])return window[a.params.callback](a)}else if("function"==typeof a.params.callback)return a.params.callback(a)},request_data:function(a){return a.data},request:function(d){if((d.params.trigger.data("cacheLocal")||d.params.trigger.data("cacheSession"))&&!d.params.trigger.data("cachePurge")){var e;if(d.params.trigger.data("cacheLocal")?e=d.params.trigger.data("cacheLocal"):d.params.trigger.data("cacheSession")&&(e=d.params.trigger.data("cacheSession")),"undefined"!=typeof b[e])return{data:b[e]};if("undefined"!=typeof Storage){var f;if(d.params.trigger.data("cacheLocal")?f=localStorage.getItem(e):d.params.trigger.data("cacheSession")&&(f=sessionStorage.getItem(e)),f){try{f=JSON.parse(f)}catch(g){f=f}return{data:f}}}}return c[d.params.trigger.prop("id")]&&c[d.params.trigger.prop("id")].abort(),c[d.params.trigger.prop("id")]=a.ajax(d.request),c[d.params.trigger.prop("id")]},request_complete:function(a){a.params.complete(a),a.params.loadElement.removeClass(a.params.loadClass),c[a.params.trigger.prop("id")]&&delete c[a.params.trigger.prop("id")]},request_error:function(a){a.params.error(a),a.params.complete(a.jqxhr,a.textStatus)},refresh:function(b,c){a(c.triggerClass).baldrick(c)}};a.fn.baldrick=function(b){var c=function(a,b,c){var d;for(var e in h.helpers._plugins)if("function"==typeof h.helpers._plugins[e][a]&&(d=h.helpers._plugins[e][a](b,h,c),"undefined"!=typeof d&&(b=d),b===!1))return!1;if("function"==typeof h.helpers[a]&&(d=h.helpers[a](b,h,c),"undefined"!=typeof d&&(b=d),!b))return!1;for(var f in h.helpers._plugins)if("function"==typeof h.helpers._plugins[f]["after_"+a]&&(d=h.helpers._plugins[f]["after_"+a](b,h,c),"undefined"!=typeof d&&(b=d),b===!1))return!1;return b},e=function(b){var c={},d=b.find("input,radio,checkbox,select,textarea,file"),f={};if(d.length){for(var g=0;g<d.length;g++)if(null!==d[g].getAttribute("name")){for(var h=a(d[g]),i=h.prop("name").replace(/\[/gi,":").replace(/\]/gi,""),j=i.split(":"),k=h.is(":checkbox,:radio")?h.filter(":checked").val():h.val(),l={},m=j.length-1;m>=0;m--){var n=j[m];if(0===n.length&&("undefined"==typeof f[j[m-1]]?f[j[m-1]]=0:f[j[m-1]]+=1,n=f[j[m-1]]),m===j.length-1)l[n]=k;else{var o=l;l={},l[n]=o}}a.extend(!0,c,l)}return c}},f=this.selector,g=this.not("._tisBound");g.addClass("_tisBound"),"undefined"!=typeof b&&"object"==typeof b.helper&&(d._plugins._params_helpers_=b.helper);var h=a.extend(!0,b,{helpers:d},{triggerClass:f}),i=function(){return!0},j={before:i,callback:!1,success:!1,complete:i,error:i};for(var l in j)"string"==typeof h[l]?j[l]="function"==typeof window[h[l]]?window[h[l]]:i:"function"==typeof h[l]&&(j[l]=h[l]);return g=c("bind",g),g===!1?this:c("ready",g.each(function(b){this.id||(this.id="baldrick_trigger_"+((new Date).getTime()+b));var d=a(this),f=d.data("event")?d.data("event"):h.event?h.event:d.is("form")?"submit":"click";return d.on(f,function(b){var d=a(c("event",this,b));if(d.data("for")){var i=a(d.data("for")),k=a.extend({},i.data(),d.data());return delete k["for"],i.data(k),i.is("form")?(i.submit(),this):i.trigger(i.data("event")?i.data("event"):f)}if(d.is("form")&&!d.data("request")&&d.attr("action")&&d.data("request",d.attr("action")),d.is("a")&&!d.data("request")&&d.attr("href")&&(d.attr("href").indexOf("#")<0?d.data("request",d.attr("href")):d.data("href",d.attr("href"))),(d.data("before")?"function"==typeof window[d.data("before")]?window[d.data("before")](this,b):j.before(this,b):j.before(this,b))!==!1){var l={trigger:d,callback:d.data("callback")?"function"==typeof window[d.data("callback")]?window[d.data("callback")]:d.data("callback"):j.callback,success:d.data("success")?"function"==typeof window[d.data("success")]?window[d.data("success")]:d.data("success"):j.success,method:d.data("method")?d.data("method"):d.attr("method")?d.attr("method"):h.method?h.method:"GET",dataType:d.data("type")?d.data("type"):h.dataType?h.dataType:!1,timeout:d.data("timeout")?d.data("timeout"):12e4,target:d.data("target")?"_parent"===d.data("target")?d.parent():"_self"===d.data("target")?a(d):a(d.data("target")):h.target?a(h.target):a("<html>"),targetInsert:d.data("targetInsert")?"replace"===d.data("targetInsert")?"replaceWith":d.data("targetInsert"):h.targetInsert?"replace"===h.targetInsert?"replaceWith":h.targetInsert:"html",loadClass:d.data("loadClass")?d.data("loadClass"):h.loadClass?h.loadClass:"loading",activeClass:d.data("activeClass")?d.data("activeClass"):h.activeClass?h.activeClass:"active",activeElement:d.data("activeElement")?"_parent"===d.data("activeElement")?d.parent():a(d.data("activeElement")):h.activeElement?"_parent"===h.activeElement?d.parent():a(h.activeElement):d,cache:d.data("cache")?d.data("cache"):h.cache?h.cache:!1,complete:d.data("complete")?"function"==typeof window[d.data("complete")]?window[d.data("complete")]:j.complete:j.complete,error:d.data("error")?"function"==typeof window[d.data("error")]?window[d.data("error")]:j.error:j.error,resultSelector:!1,event:f};if(l.url=d.data("request")?d.data("request"):h.request?h.request:l.callback,l.loadElement=d.data("loadElement")?"_parent"===d.data("loadElement")?d.parent():a(d.data("loadElement")):h.loadElement?a(h.loadElement)?a(h.loadElement):l.target:l.target,l=c("params",l),l===!1)return!1;if(b.preventDefault(),"function"==typeof window[l.url]){var m=window[l.url](l,f);return m=c("pre_filter",{data:m,params:l}),m=c("filter",{data:m,rawData:m,params:l}),c("target",m),c("refresh",{params:l}),c("request_complete",{jqxhr:null,textStatus:"complete",request:w,params:l}),this}try{if(a(l.url).length)var m=a(l.url).is("input,select,radio,checkbox,file,textarea")?a(l.url).val():a(l.url).is("form")?e(a(l.url)):a(l.url).html()}catch(b){}if("undefined"!=typeof m){if("json"===l.dataType)try{m=JSON.parse(m)}catch(b){}return m=c("pre_filter",{data:m,params:l}),m=c("filter",{data:m,rawData:m,params:l}),c("target",m),c("refresh",{params:l}),c("request_complete",{jqxhr:null,textStatus:"complete",request:w,params:l}),this}switch(typeof l.url){case"function":return l.url(this,b);case"boolean":case"object":return;case"string":if(l.url.indexOf(" ")>-1){var o=l.url.split(" ");l.url=o[0],l.resultSelector=o[1]}}d.data("group")?a('._tisBound[data-group="'+d.data("group")+'"]').each(function(){var b=a(this),c=b.data("activeElement")?"_parent"===b.data("activeElement")?b.parent():a(b.data("activeElement")):h.activeElement?"_parent"===h.activeElement?d.parent():a(h.activeElement):b;c.removeClass(b.data("activeClass")?b.data("activeClass"):h.activeClass?h.activeClass:l.activeClass)}):a("._tisBound:not([data-group])").each(function(){var b=a(this),c=b.data("activeElement")?"_parent"===b.data("activeElement")?b.parent():a(b.data("activeElement")):h.activeElement?"_parent"===h.activeElement?d.parent():a(h.activeElement):b;c.removeClass(b.data("activeClass")?b.data("activeClass"):h.activeClass?h.activeClass:l.activeClass)}),l.activeElement.addClass(l.activeClass),l.loadElement.addClass(l.loadClass);var q;if(FormData&&(d.is("input:file")||"POST"===l.method)){l.method="POST",l.contentType=!1,l.processData=!1,l.cache=!1,l.xhrFields={onprogress:function(a){a.lengthComputable}},q=d.is("form")?new FormData(d[0]):new FormData,d.is("input,select,textarea")&&d.data("_value",d.val());for(var r in l.trigger.data())q.append(r,l.trigger.data(r));if(l.data&&q.append("data",JSON.stringify(l.data)),d.is("input,select,textarea"))if(d.is("input:file"))if(d[0].files.length>1)for(var s=0;s<d[0].files.length;s++)q.append(d.prop("name"),d[0].files[s]);else q.append(d.prop("name"),d[0].files[0]);else d.is("input:checkbox")||d.is("input:radio")?d.prop("checked")&&q.append(d.prop("name"),d.val()):q.append(d.prop("name"),d.val())}else{var t=d.serializeArray(),u=l.trigger.data(),v=[];h.data&&(u=a.extend(h.data,u)),t.length&&(a.each(t,function(a,b){v.push(b)}),l.requestData=e(d)),l.data&&(u=a.extend(u,l.data)),q=u,l.requestData=a.extend(d.data(),l.requestData)}var w={url:l.url,data:c("request_data",{data:q,params:l}),cache:l.cache,timeout:l.timeout,type:l.method,success:function(b,d,e){if(l.resultSelector)if("object"==typeof b){for(var f=l.resultSelector.replace(/\[/g,".").replace(/\]/g,"").split("."),g=b,h=0;h<f.length;h++)g=g[f[h]];b=g}else if("string"==typeof b){var i=a(l.resultSelector,a("<html>").html(b));1===i.length?b=a("<html>").html(i).html():(b=a("<html>"),i.each(function(){b.append(this)}),b=b.html())}var j=b;if(l.trigger.data("cacheLocal")||l.trigger.data("cacheSession")){var k;if(l.trigger.data("cacheLocal")?k=l.trigger.data("cacheLocal"):l.trigger.data("cacheSession")&&(k=l.trigger.data("cacheSession")),"undefined"!=typeof Storage)if(l.trigger.data("cacheLocal"))try{localStorage.setItem(k,e.responseText)}catch(m){console.log(m)}else if(l.trigger.data("cacheSession"))try{sessionStorage.setItem(k,e.responseText)}catch(m){console.log(m)}a(window).trigger("baldrick.cache",k)}b=c("pre_filter",{data:b,request:w,params:l,xhr:e}),b=c("filter",{data:b,rawData:j,request:w,params:l,xhr:e}),c("target",b)},complete:function(a,b){c("request_complete",{jqxhr:a,textStatus:b,request:w,params:l}),c("refresh",{jqxhr:a,textStatus:b,request:w,params:l}),d.data("once")&&d.off(f).removeClass("_tisBound")},error:function(a,b,d){c("request_error",{jqxhr:a,textStatus:b,error:d,request:w,params:l})}};if(l.dataType&&(w.dataType=l.dataType),"undefined"!=typeof l.contentType&&(w.contentType=l.contentType),"undefined"!=typeof l.processData&&(w.processData=l.processData),"undefined"!=typeof l.xhrFields&&(w.xhrFields=l.xhrFields),w=c("request_params",w,l),w===!1)return g;var x=c("request",{request:w,params:l});if(x.data){var m=x.data;c("target",c("filter",c("pre_filter",{data:m,request:w,params:l}))),c("request_complete",{jqxhr:!1,textStatus:!0,request:w,params:l}),c("refresh",{jqxhr:!1,textStatus:!0,request:w,params:l})}}}),(d.data("autoload")||d.data("poll"))&&(d.data("delay")?setTimeout(function(a,b){return a.trigger(b)},d.data("delay"),d,f):d.trigger(f)),d.data("poll")&&(d.data("delay")?setTimeout(function(a,b){return setInterval(function(a,b){return a.trigger(b)},a.data("poll"),a,b)},d.data("delay")):setInterval(function(a,b){return a.trigger(b)},d.data("poll"),d,f)),this}))},a.fn.baldrick.cacheObject=function(a,c){b[a]=c},a.fn.baldrick.registerhelper=function(b,c,e){var f={};"object"==typeof c?(f[b]=c,d._plugins=a.extend(!0,f,d._plugins)):"string"==typeof c&&"string"==typeof b&&"function"==typeof e&&(f[c]={},f[c][b]=e,d._plugins=a.extend(!0,f,d._plugins))}}}(jQuery);
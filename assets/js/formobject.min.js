!function(t){if(t.fn.formJSON=function(){for(var e=t(this),a=e.find("[name]"),r={},i={},o=0;o<a.length;o++){var f=t(a[o]),s=f.prop("name").replace(/\]/gi,"").split("["),d=f.val(),n={};if(!f.is(":radio")&&!f.is(":checkbox")||f.is(":checked")){for(var c=s.length-1;c>=0;c--){var l=s[c];if("undefined"==typeof l&&(l=""),0===l.length&&(n=[],"undefined"==typeof i[s[c-1]]?i[s[c-1]]=0:i[s[c-1]]+=1,l=i[s[c-1]]),c===s.length-1){if(d)if("true"===d)d=!0;else if("false"===d)d=!1;else if(isNaN(parseFloat(d))||parseFloat(d).toString()!==d)if("string"!=typeof d||"{"!==d.substr(0,1)&&"["!==d.substr(0,1)){if("object"==typeof d&&d.length&&f.is("select")){for(var g={},c=0;c<d.length;c++)g["n"+c]=d[c];d=g}}else try{d=JSON.parse(d)}catch(h){}else d=parseFloat(d);n[l]=d}else{var p=n;n={},n[l]=p}}t.extend(!0,r,n)}}return r},t(".caldera_forms_form").on("click",".cf-form-trigger",function(e){var a=t(this);form=a.closest("form.caldera_forms_form"),form_id=form.prop("id"),calderaforms=window[form_id],data=form.formJSON(),fields={},target=a.data("target");for(var r in calderaforms)fields[calderaforms[r].slug]=data[r];if("function"==typeof window[target])window[target](fields,e);else{try{var i=t(target)}catch(o){}if(i&&i.length){fields=JSON.stringify(fields);var f=["textarea","text","hidden"];i.each(function(e,a){this.type&&f.indexOf(this.type)>=0?t(this).val(fields).trigger("change"):this.innerHTML=fields})}else t.post(target,fields)}}),cfModals){var e=t("head"),a=t("body");for(var r in cfModals.style)t("#cf-"+r+"-styles-css").length||e.append('<link id="cf-'+r+'-styles-css" rel="stylesheet" type="text/css" href="'+cfModals.style[r]+'">');for(var i in cfModals.script)t('script[src^="'+cfModals.script[i]+'"]').length||null===cfModals.script[i]||a.append('<script src="'+cfModals.script[i]+'" type="text/javascript">');t(document).on("click",".caldera-forms-modal",function(){var e=t(this);if(e.data("form")){var r=t('<div class="caldera-grid cf_processing caldera-backdrop" style="background-color:rgba(0, 0, 0, 0.3);"></div>');t(a).append(r);var i="/cf-api/"+e.data("form")+"/";e.data("entry")&&(i+=e.data("entry")+"/"),t.get(i,function(a){r.remove();var i={modal:e.data("form"),width:e.data("width"),content:a};e.data("button")&&(i.footer='<span><button type="button" class="button cfajax-trigger" data-for="form.'+e.data("form")+'">'+e.data("button")+"</button></span>");var o=e.calderaModal(i),f=t("#"+e.data("form")+"_calderaModalContent"),s=t("#"+e.data("form")+"_calderaModalTitle"),d=t("#"+e.data("form")+"_calderaModalFooter");o.config.width=e.data("width")?e.data("width"):500,o.resize(),f.html(a),o.resize(),resBaldrickTriggers(),t(document).on("cf.remove cf.add cf.submission cf.pagenav cf.error",function(){e.data("height")?o.config.height=e.data("height"):(o.config.height=f.outerHeight()+o.config.padding+12,s.length&&(o.config.height+=s.outerHeight()),d.length&&(o.config.height+=d.outerHeight())),o.resize()}),t(document).trigger("cf.modal")})}})}}(jQuery);
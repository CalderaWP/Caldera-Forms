var calders_forms_check_conditions,calders_forms_init_conditions;!function(a){Array.prototype.indexOf||(Array.prototype.indexOf=function(d){var c=this.length>>>0,b=Number(arguments[1])||0;for(b=0>b?Math.ceil(b):Math.floor(b),0>b&&(b+=c);c>b;b++){if(b in this&&this[b]===d){return b}}return -1}),calders_forms_check_conditions=function(B){if("undefined"!=typeof caldera_conditionals&&"undefined"!=typeof caldera_conditionals[B]){var P=a("#"+B);for(var z in caldera_conditionals[B]){var D=jQuery("#conditional_"+z);if(D.length){var I=caldera_conditionals[B][z].type,E=caldera_conditionals[B][z].group,A=[];for(var M in E){var G={},N=E[M];for(var L in N){var J=P.find('[data-field="'+N[L].field+'"]'),x=[],K="function"==typeof N[L].value?N[L].value():N[L].value;if("undefined"!=typeof N[L].selectors){for(var F in N[L].selectors){var C=new RegExp(F,"g");K=K.replace(C,a(N[L].selectors[F]).val())}}if(G[L]=!1,J.is(":radio,:checkbox")?J=J.filter(":checked"):J.is("div")&&(J=jQuery("<input>").val(J.html())),J.length){for(var Q=0;Q<J.length;Q++){x.push(J[Q].value)}}else{x.push(N[L].field)}switch(N[L].compare){case"is":x.length&&x.indexOf(K.toString())>=0&&(G[L]=!0);break;case"isnot":x.length&&x.indexOf(K)<0&&(G[L]=!0);break;case">":case"greater":G[L]=parseFloat(x.reduce(function(c,b){return c+b}))>parseFloat(K);break;case"<":case"smaller":G[L]=parseFloat(x.reduce(function(c,b){return c+b}))<parseFloat(K);break;case"startswith":for(var Q=0;Q<x.length;Q++){x[Q].toLowerCase().substr(0,K.toLowerCase().length)===K.toLowerCase()&&(G[L]=!0)}break;case"endswith":for(var Q=0;Q<x.length;Q++){x[Q].toLowerCase().substr(x[Q].toLowerCase().length-K.toLowerCase().length)===K.toLowerCase()&&(G[L]=!0)}break;case"contains":for(var Q=0;Q<x.length;Q++){x[Q].toLowerCase().indexOf(K)>=0&&(G[L]=!0)}}}istrue=!0;for(var q in G){if(G[q]===!1){istrue=!1;break}}A.push(istrue)}var e,O=jQuery("#conditional-"+z+"-tmpl").html(),j=jQuery("#conditional_"+z),H=jQuery('[data-field="'+z+'"]');A.length&&A.indexOf(!0)>=0?"show"===I?e="show":"hide"===I?e="hide":"disable"===I&&(e="disable"):e="show"===I?"hide":"disable"===I?"enable":"show","show"===e?j.html().length||(j.html(O).trigger("cf.add"),jQuery(document).trigger("cf.add")):"hide"===e?j.html().length&&(H.val("").empty().prop("checked",!1),j.empty().trigger("cf.remove"),jQuery(document).trigger("cf.remove")):"enable"===e?j.html().length?H.prop("disabled",!1):(j.html(O).trigger("cf.add"),jQuery(document).trigger("cf.add").trigger("cf.enable")):"disable"===e&&(j.html().length?H.prop("disabled","disabled"):(j.html(O).trigger("cf.remove"),jQuery(document).trigger("cf.remove").trigger("cf.disable"),jQuery('[data-field="'+z+'"]').prop("disabled","disabled")))}}}},calders_forms_init_conditions=function(){jQuery(".caldera_forms_form").on("change keyup","[data-field]",function(c){var b=a(this).closest(".caldera_forms_form").prop("id");calders_forms_check_conditions(b)}),a(".caldera_forms_form").each(function(){calders_forms_check_conditions(a(this).closest(".caldera_forms_form").prop("id"))})},"undefined"!=typeof caldera_conditionals&&calders_forms_init_conditions()}(jQuery);
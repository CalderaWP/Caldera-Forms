function new_conditional_group(e){var t=e.trigger.data("id"),a="cl"+Math.round(18746582734*Math.random()),i="rw"+Math.round(98347598345*Math.random()),r=[{id:i,type:e.trigger.data("type"),lines:[{id:a}]}];return{group:r,id:t}}function new_conditional_line(e){var t=e.trigger.data("id"),a=e.trigger.data("group"),i=e.trigger.data("type"),r="cl"+Math.round(18746582734*Math.random()),n={id:t,type:i,lineid:r,rowid:a,name:"config["+i+"]["+t+"][conditions][group]["+a+"]["+r+"]"};return n}function build_conditions_config(e){var t=JSON.parse(e.trigger.val());return t.id=e.trigger.data("id"),t}function setup_field_type(e){return{id:e.trigger.prop("id")}}function check_required_bindings(e){var t,a=(jQuery(".caldera-header-save-button"),jQuery(".layout-form-field")),i=jQuery(".caldera-processor-nav"),r=!0;t=e?jQuery(e):jQuery(".caldera-config-field .required"),t.removeClass("has-error"),a.removeClass("has-error"),i.removeClass("has-error"),jQuery(".error-tag").remove(),required_errors={},t.each(function(e,t){var a=jQuery(t),i=a.closest(".caldera-config-editor-panel");if(t.value.length){if(a.hasClass("field-slug"))for(var n=jQuery(".field-slug").not(a),o=0;o<n.length;o++)if(n[o].value===t.value){var a=jQuery(n[o]);required_errors[i.prop("id")]||(required_errors[i.prop("id")]=0);var s=a.closest(".caldera-editor-field-config-wrapper"),l=a.closest(".caldera-editor-processor-config-wrapper");s.length&&jQuery('.layout-form-field[data-config="'+s.prop("id")+'"]').addClass("has-error"),l.length&&jQuery("."+l.prop("id")).addClass("has-error"),required_errors[i.prop("id")]+=1,a.addClass("has-error"),r=!1;break}if(a.hasClass("toggle_value_field"))for(var d=a.closest(".caldera-config-group").find(".toggle_value_field").not(a),o=0;o<d.length;o++)if(d[o].value===t.value){var a=jQuery(d[o]);required_errors[i.prop("id")]||(required_errors[i.prop("id")]=0);var s=a.closest(".caldera-editor-field-config-wrapper"),l=a.closest(".caldera-editor-processor-config-wrapper");s.length&&jQuery('.layout-form-field[data-config="'+s.prop("id")+'"]').addClass("has-error"),l.length&&jQuery("."+l.prop("id")).addClass("has-error"),required_errors[i.prop("id")]+=1,a.addClass("has-error"),r=!1;break}}else{required_errors[i.prop("id")]||(required_errors[i.prop("id")]=0);var s=a.closest(".caldera-editor-field-config-wrapper"),l=a.closest(".caldera-editor-processor-config-wrapper");s.length&&jQuery('.layout-form-field[data-config="'+s.prop("id")+'"]').addClass("has-error"),l.length&&jQuery("."+l.prop("id")).addClass("has-error"),required_errors[i.prop("id")]+=1,a.addClass("has-error"),r=!1}});for(var n in required_errors)jQuery(".caldera-forms-options-form").find('a[href="#'+n+'"]').append('<span class="error-tag">'+required_errors[n]+"</span>");return jQuery(".caldera-conditional-field-set").trigger("change"),r}function color_picker_init(){jQuery(".minicolor-picker").miniColors()}function toggle_button_init(e,t){var a=jQuery(t),i=a.find(".cf-toggle-group-radio:checked");i.length&&jQuery("#"+i.data("ref")).trigger("click")}function Caldera_forms_Button_Field(e,t){var a=e.id;t(document).on("click dblclick","#"+a,function(e){t("#"+a+"_btn").val(e.type).trigger("change")})}var baldrickTriggers,loop_loader;jQuery(document).ready(function(e){baldrickTriggers=function(){e(".ajax-trigger").baldrick({request:ajaxurl,method:"POST",before:function(t,a){var i=e(t),r=e("#cf_toolbar_actions"),n=r.parent().find('[name="_wp_http_referer"]');if(r.length&&n.length&&(i.data("cf_toolbar_actions",r.val()),i.data("_wp_http_referer",n.val())),i.data("trigger")){a.preventDefault();var o=e(i.data("trigger"));return o.trigger(o.data("event")?o.data("event"):"click"),!1}},complete:function(){e(".init_field_type[data-type]").each(function(t,a){var i=e(a);"function"==typeof window[i.data("type")+"_init"]&&window[i.data("type")+"_init"](i.prop("id"),i[0])})}})},loop_loader=function(e,t){var a=Math.round(1e7*Math.random());return{__id__:a}},baldrickTriggers(),e("body").on("click",".modal-side-tab",function(t){t.preventDefault();var a=e(this),i=a.closest(".caldera-modal-body"),r=i.find(".tab-detail-panel"),n=e(a.attr("href"));i.find(".modal-side-tab.active").removeClass("active"),a.addClass("active"),r.hide(),n.show()}),e("body").on("click",".caldera-group-remover",function(t){t.preventDefault();var a=e(this),i=a.closest(".caldera-repeater-group");i.slideUp(200,function(){i.remove()})}),e("body").on("click",".form-delete a.form-control",function(t){var a=e(this);confirm(a.data("confirm"))||t.preventDefault()}),e("body").on("keyup change",'[data-format="key"]',function(e){this.value=this.value.replace(/[^a-z0-9]/gi,"-").toLowerCase()}),e("body").on("keyup change",'[data-format="slug"]',function(e){this.value=this.value.replace(/[^a-z0-9]/gi,"_").toLowerCase()}),e(window).on("resize",function(){var t=e("#cf_forms_toggle"),a=e(".form-panel-wrap");window.innerWidth<=1420&&t.is(":visible")&&a.is(":visible")&&t.trigger("click")})}),jQuery(document).ready(function(e){function t(t){var i=e(t),r=i.closest(".caldera-editor-field-config-wrapper"),n=r.find(".caldera-config-field-setup"),o=compiled_templates[i.val()+"_tmpl"]?compiled_templates[i.val()+"_tmpl"]:compiled_templates.noconfig_field_templ,s=r.find(".field_config_string").val(),l=i.data("type");if(r.find(".caldera-config-group").show(),i.addClass("field-initialized"),s=s.length&&l===i.val()?JSON.parse(s):fieldtype_defaults[i.val()+"_cfg"],s||(s={}),s._id=i.data("field"),s._name="config[fields]["+i.data("field")+"][config]",o=e("<div>").html(o(s)),n.html(o.html()),"function"==typeof window[i.val()+"_init"]&&window[i.val()+"_init"](i.data("field"),n),fieldtype_defaults[i.val()+"_nosupport"]&&(fieldtype_defaults[i.val()+"_nosupport"].indexOf("hide_label")>=0&&r.find(".hide-label-field").hide().find(".field-config").prop("checked",!1),fieldtype_defaults[i.val()+"_nosupport"].indexOf("caption")>=0&&r.find(".caption-field").hide().find(".field-config").val(""),fieldtype_defaults[i.val()+"_nosupport"].indexOf("required")>=0&&r.find(".required-field").hide().find(".field-config").prop("checked",!1),fieldtype_defaults[i.val()+"_nosupport"].indexOf("custom_class")>=0&&r.find(".customclass-field").hide().find(".field-config").val(""),fieldtype_defaults[i.val()+"_nosupport"].indexOf("entry_list")>=0&&r.find(".entrylist-field").hide().find(".field-config").prop("checked",!1)),r.find(".toggle_show_values").trigger("change"),!e(".caldera-select-field-type").not(".field-initialized").length){if(core_form.hasClass("builder-loaded"))a(i.data("field"));else{for(var d=e(".caldera-select-field-type.field-initialized"),c=0;c<d.length;c++)a(e(d[c]).data("field"));core_form.addClass("builder-loaded")}e(".caldera-header-save-button").prop("disabled",!1),rebuild_field_binding(),baldrickTriggers()}e(".color-field").length&&e(".color-field").wpColorPicker({change:function(t){var a=e(this);a.data("ev")&&clearTimeout(a.data("ev")),a.data("ev",setTimeout(function(){a.trigger("record")},200)),a.data("target")&&(e(a.data("target")).css(a.data("style"),a.val()),e(a.data("target")).val(a.val()))}})}function a(t){var a=e("#"+t),i=a.find(".caldera-select-field-type"),r=e('.layout-form-field[data-config="'+t+'"]'),n=r.find(".field_preview"),o=(e("#preview-"+i.val()+"_tmpl").html(),compiled_templates["preview-"+i.val()+"_tmpl"]),s={id:t},l=a.find(".field-config");l.each(function(a,i){for(var r=e(i),n=r.prop("name").split("["+t+"]")[1].substr(1),o=n.substr(0,n.length-1).split("]["),l=r.is(":checkbox,:radio")?r.filter(":checked").val():r.val(),d={},c=o.length-1;c>=0;c--)if(c===o.length-1)d[o[c]]=l;else{var u=d;d={},d[o[c]]=u}e.extend(!0,s,d)}),n.html(o(s)),r.removeClass("button"),e(".preview-field-config").prop("disabled",!0)}function i(t){var a,i=e(".caldera-editor-fields-panel"),r=(e(".caldera-editor-groups-panel"),e(".caldera-group-nav")),n=e('[data-group="'+t+'"]'),o=n.find(".caldera-config-group-name"),s=n.find(".caldera-config-group-slug"),l=n.find(".caldera-config-group-desc"),d=n.find(".caldera-config-group-admin"),c=e(".active-group-name"),u=e(".active-group-slug"),p=e(".active-group-desc"),h=e(".active-group-admin"),f=e(".caldera-editor-fields-list ul"),g=n.find(".caldera-config-group-repeat"),v=e(".repeat-config-button"),m=(e(".caldera-editor-group-settings"),e(".caldera-config-group-remove"));e(".new-group-input").remove(),e(".new-field-input").remove(),r.removeClass("active"),i.show(),f.hide(),f.removeClass("active").find("li.active").removeClass("active"),f.hide(),n.addClass("active"),a=e(".caldera-editor-fields-list ul.active li"),a.length?m.hide():m.show(),e(".caldera-editor-field-config-wrapper").hide(),n.show(),c.val(o.val()),u.val(s.val()),p.val(l.val()),"1"===d.val()?h.prop("checked",!0):h.prop("checked",!1),"1"===g.val()?v.addClass("field-edit-open"):v.removeClass("field-edit-open")}e(".caldera-header-save-button").baldrick({method:"POST",request:"admin.php?page=caldera-forms",before:function(t,a){if(a.preventDefault(),!check_required_bindings())return!1;e("#save_indicator").addClass("loading"),"undefined"!=typeof tinyMCE&&tinyMCE.triggerSave();var i=e(".caldera-forms-options-form").formJSON();return i.conditions&&(i.config.conditional_groups={conditions:i.conditions}),e(t).data("cf_edit_nonce",i.cf_edit_nonce),e(t).data("_wp_http_referer",i._wp_http_referer),e(t).data("sender","ajax"),e(t).data("config",JSON.stringify(i.config)),!0},callback:function(t){if(!1===t.data){var a=e(".updated_notice_box");a.stop().animate({top:0},200,function(){setTimeout(function(){a.stop().animate({top:-75},200)},2e3)})}},complete:function(t){e(".wrapper-instance-pane .field-config").prop("disabled",!1)}}),e("body").on("click",".toggle_processor_event input",function(t){var a=e(this),i=a.closest(".wrapper-instance-pane"),r=i.find(".caldera-config-processor-setup"),n=i.find(".caldera-config-processor-notice");a.is(":checked")?(a.parent().addClass("activated"),a.parent().find(".is_active").show().attr("aria-hidden",!1).css("visibility","visible"),a.parent().find(".not_active").hide().attr("aria-hidden",!0).css("visibility","hidden")):(a.parent().removeClass("activated"),a.parent().find(".is_active").hide().attr("aria-hidden",!0).css("visibility","hidden"),a.parent().find(".not_active").show().attr("aria-hidden",!1).css("visibility","visible")),i.find(".toggle_processor_event .activated").length?(r.slideDown(100),n.slideUp(100)):(r.slideUp(100),n.slideDown(100))}),e("body").on("click",".toggle_option_tab > a",function(t){t.preventDefault();var a=e(this),i=e(a.attr("href")),r=a.parent().find("a"),n=a.closest(".caldera-editor-config-wrapper").find(".wrapper-instance-pane");r.removeClass("button-primary"),n.hide(),i.show(),a.addClass("button-primary"),e(".caldera-conditionals-usetype").trigger("change")}),e(".caldera-editor-body").on("change",".caldera-select-field-type",function(e){t(this)}),e(".caldera-editor-body").on("click",".caldera-group-nav a",function(t){t.preventDefault(),i(e(this).attr("href").substr(1))}),e(".caldera-editor-body").on("click",".caldera-editor-fields-list a",function(t){t.preventDefault();var a=e(this),i=e(a.attr("href"));e(".new-group-input").remove(),e(".new-field-input").remove(),e(".caldera-editor-fields-list li.active").removeClass("active"),a.parent().addClass("active"),e(".caldera-editor-field-config-wrapper").hide(),i.show()}),e(".caldera-editor-body").on("click",".group-config-button",function(t){var a=e(this),i=e(".caldera-editor-group-settings"),r=a.closest(".caldera-editor-fields-panel"),n=e(".caldera-config-group-remove");r.find(".caldera-field-line").length?n.hide():n.show(),a.hasClass("field-edit-open")?(i.slideUp(100),a.removeClass("field-edit-open")):(i.slideDown(100),a.addClass("field-edit-open"))}),e(".caldera-editor-body").on("keydown",".field-config",function(t){e(this).is("textarea")||13===t.which&&t.preventDefault()}),e(".caldera-editor-body").on("change",".field-label",function(t){var a=e(this).closest(".caldera-editor-field-config-wrapper").prop("id");field_line=e('[data-field="'+a+'"]'),field_title=e("#"+a+" .caldera-editor-field-title, .layout-form-field.field-edit-open .layout_field_name"),slug=e("#"+a+" .field-slug"),field_line.find("a").html('<i class="icn-field"></i> '+this.value),field_title.text(this.value),"change"===t.type&&slug.trigger("change"),rebuild_field_binding()}),e(".caldera-editor-body").on("change",".active-group-name",function(t){t.preventDefault();var a=e(".caldera-group-nav.active"),i=(a.data("group"),a.find(".caldera-config-group-name")),r=a.find("span");"focusout"!==t.type||this.value.length||(this.value="Group "+(parseInt(a.index())+1)),i.val(this.value),r.text(this.value)}),e(".caldera-editor-body").on("change",".active-group-slug",function(t){t.preventDefault();var a=e(".caldera-group-nav.active"),i=(a.data("group"),a.find(".caldera-config-group-name").val()),r=a.find(".caldera-config-group-slug"),n=(a.find("span"),this.value.split(" ").join("_").split("-").join("_").replace(/[^a-z0-9_]/gi,"").toLowerCase());"focusout"!==t.type||this.value.length||(n=i.split(" ").join("_").split("-").join("_").replace(/[^a-z0-9_]/gi,"").toLowerCase()),r.val(n),this.value=n}),e(".caldera-editor-body").on("change",".active-group-desc",function(t){t.preventDefault();var a=e(".caldera-group-nav.active"),i=(a.data("group"),a.find(".caldera-config-group-desc"));i.val(this.value)}),e(".caldera-editor-body").on("change",".active-group-admin",function(t){t.preventDefault();var a=e(".caldera-group-nav.active"),i=(a.data("group"),a.find(".caldera-config-group-name").val(),a.find(".caldera-config-group-admin"));a.find("span"),this.value.split(" ").join("_").split("-").join("_").replace(/[^a-z0-9_]/gi,"").toLowerCase();e(this).prop("checked")?(i.val(1),a.addClass("is-admin")):(i.val(0),a.removeClass("is-admin"))}),e(".caldera-editor-body").on("click",".repeat-config-button",function(t){t.preventDefault();var a=e(".caldera-group-nav.active"),i=(a.data("group"),a.find("a .group-type")),r=a.find(".caldera-config-group-repeat"),n=e(this);n.hasClass("field-edit-open")?(r.val("0"),i.removeClass("icn-repeat").addClass("icn-folder"),n.removeClass("field-edit-open")):(r.val("1"),i.addClass("icn-repeat").removeClass("icn-folder"),n.addClass("field-edit-open"))}),e(".caldera-editor-body").on("click",".delete-field",function(){var t=e(this),a=t.closest(".caldera-editor-field-config-wrapper").prop("id");confirm(t.data("confirm"))&&(e("#"+a).remove(),e('option[value="'+a+'"]').remove(),e('[data-bind="'+a+'"]').remove(),delete current_form_fields[a],e('[data-config="'+a+'"]').slideUp(200,function(){var t=e(this);t.remove(),rebuild_field_binding(),e(document).trigger("field.removed")}))}),e(".caldera-editor-body").on("click",".add-new-group,.add-field",function(){var t=e(this);if(e(".new-group-input").remove(),e(".new-field-input").remove(),t.hasClass("add-field")){var a=e('<input type="text" class="new-field-input block-input">');a.appendTo(e(".caldera-editor-fields-list ul.active")).focus()}else{var i=e('<input type="text" class="new-group-input block-input">');i.appendTo(e(".caldera-editor-groups-panel")).focus()}}),e(".caldera-editor-body").on("change keypress",".new-group-input",function(t){if("keypress"===t.type){if(13!==t.which)return;t.preventDefault()}var a,r,n=this.value,o=e(this),s=e(".caldera-editor-groups-panel ul"),l=e(".caldera-editor-fields-list");if(n.length){a=Handlebars.compile(e("#caldera_group_line_templ").html()),r={id:n.split(" ").join("_").split("-").join("_").replace(/[^a-z0-9_]/gi,"").toLowerCase(),name:n},s.append(a(r));var d=e('<ul data-group="'+r.id+'">').hide();d.appendTo(l),o.remove(),i(r.id)}else o.remove()}),e(".caldera-editor-body").on("change keypress",".new-field-input",function(t){if("keypress"===t.type){if(13!==t.which)return;t.preventDefault()}var a,i,r,n=this.value,o=e(this),s=o.parent(),l=e(".caldera-editor-field-config"),d=e(".caldera-config-group-remove");if(n.length){d.hide(),a=Handlebars.compile(e("#caldera_field_line_templ").html()),i=Handlebars.compile(e("#caldera_field_config_wrapper_templ").html()),r={id:n.split(" ").join("_").split("-").join("_").replace(/[^a-z0-9_]/gi,"").toLowerCase(),label:n,slug:n.split(" ").join("_").split("-").join("_").replace(/[^a-z0-9_]/gi,"").toLowerCase(),group:e(".caldera-group-nav.active").data("group")};var c=e(a(r));c.appendTo(s),l.append(i(r)),c.find("a").trigger("click"),o.remove()}else o.remove()}),e(".caldera-editor-body").on("change",".field-slug",function(t){this.value.length?this.value=this.value.split(" ").join("_").split("-").join("_").replace(/[^a-z0-9_]/gi,"").toLowerCase():"change"===t.type&&(this.value=e(this).closest(".caldera-editor-field-config-wrapper").find(".field-label").val().split(" ").join("_").split("-").join("_").replace(/[^a-z0-9_]/gi,"").toLowerCase())}),e(".caldera-editor-body").on("click",".caldera-add-group",function(t){var a=e(this),i=a.data("group"),r=e("#"+i+"_panel_tmpl").html();a.parent().parent().append(r)}),e(".caldera-editor-body").on("click",".caldera-config-group-remove",function(t){var a=e(".active-group-slug").val();e('[data-group="'+a+'"]').hide(0,function(){e(this).remove();var t=e(".caldera-group-nav");t.length?t.first().find("a").trigger("click"):e(".caldera-editor-fields-panel").hide()})}),e("body").on("click",".set-current-field",function(t){t.preventDefault();var a=e(this);e("#"+a.data("field")+"_type").val(a.data("type")).trigger("change"),e("#"+a.data("field")+"_lable").focus(),e("#field_setup_baldrickModalCloser").trigger("click")}),e(".caldera-editor-body").on("change record",".field-config",function(t){var i=e(this),r=i.closest(".caldera-editor-field-config-wrapper");current_form_fields&&(i.prop("id")===r.prop("id")+"_lable"&&(current_form_fields[r.prop("id")].label=this.value),i.prop("id")===r.prop("id")+"_slug"&&(current_form_fields[r.prop("id")].slug=this.value),i.prop("id")===r.prop("id")+"_type"&&(current_form_fields[r.prop("id")].type=this.value),r.length&&a(r.prop("id")))}),e(".caldera-editor-body").on("focus",".caldera-field-bind",function(t){var a=e(this),i=this.value;if(t.type&&"focusin"===t.type)return a.removeClass("bound_field").addClass("reload-binding"),rebind_field_bindings(),void(this.value=i)}),e(".caldera-editor-body").on("change",".caldera-conditional-field-set",function(t){var a,i,r=e(this),n=r.parent().find(".compare-type"),o=r.data("condition"),s=r.data("id"),l="config["+o+"]["+s+"][conditions][group]["+r.data("row")+"]["+r.data("line")+"]",d=r.data("line"),c=e("#"+d+"_value"),u=c.find(".caldera-conditional-value-field").first(),p=[],h=this.value;if("{"!==h.substr(0,1)&&(a=e("#"+h),i=a.find(".field-button-type"),p=a.find(".caldera-config-group-toggle-options")),r.hasClass(".bind_init")&&r.addClass("bound_triggered"),u.length&&u.val().length&&c.data("value",u.val()),n.show(),p.length){var f=p.find(".toggle_option_row"),g='<select name="'+l+'[value]" class="caldera-processor-value-bind caldera-conditional-value-field" data-field="'+h+'" style="max-width: 220px; width: 220px;">';g+='<option value=""></option>',f.each(function(t,a){var i=e(a).find(".toggle_label_field"),r=i.data("option"),n="";c.data("value")&&(c.data("value").toString()!==r&&c.data("value").toString()!==e(a).find(".toggle_value_field").val()||(n=' selected="selected"')),g+='<option value="'+r+'"'+n+">"+i.val()+"</option>"}),g+="</select>"}else i&&"button"==i.val()?(n.val("is").hide(),g='<select name="'+l+'[value]" class="caldera-processor-value-bind caldera-conditional-value-field" data-field="'+h+'" style="max-width: 220px; width: 220px;">',g+='<option value="click" '+("click"===c.data("value")?'selected="selected"':"")+">Click</option>",g+='<option value="dblclick" '+("dblclick"===c.data("value")?'selected="selected"':"")+">Double Click</option>",g+="</select>"):g='<input name="'+l+'[value]" type="text" class="caldera-conditional-value-field magic-tag-enabled" value="'+(c.data("value")?c.data("value"):"")+'" style="max-width: 205px;">';c.html(g),init_magic_tags()}),e(".caldera-editor-body").on("change",".caldera-conditionals-usetype",function(t){var a=e(this);"show"===this.value||"hide"===this.value||"disable"===this.value||"use"===this.value||"not"===this.value?(e("#"+a.data("id")+"_condition_group_add").show(),e("#"+a.data("id")+"_conditional_wrap").show()):(e("#"+a.data("id")+"_condition_group_add").hide(),e("#"+a.data("id")+"_conditional_wrap").hide())}),e(".caldera-editor-body").on("click",".remove-conditional-line",function(t){t.preventDefault();var a=e(this),i=a.closest(".caldera-condition-line"),r=a.closest(".caldera-condition-group");i.remove(),r.find(".caldera-condition-line").length||r.remove()}),e(".caldera-group-nav").first().find("a").trigger("click"),e(".caldera-editor-body").on("change",".toggle_show_values",function(t){var a=e(this),i=a.closest(".caldera-config-group-toggle-options");values=i.find(".toggle_value_field"),lables=i.find(".toggle_label_field"),field_lables=i.find(".caldera-config-group-option-labels"),a.prop("checked")?(values.show().parent().show(),values.show().parent().parent().show(),lables.css("width",""),field_lables.show()):(values.hide().parent().hide(),lables.css("width",245),field_lables.hide()),lables.trigger("toggle.values"),init_magic_tags()}),e(".caldera-editor-body").on("change",".auto-populate-type",function(){e(this).closest(".wrapper-instance-pane").find(".auto-populate-options").trigger("change")}),e(".caldera-editor-body").on("change",".auto-populate-options",function(){var t=e(this),a=t.closest(".wrapper-instance-pane"),i=a.find(".caldera-config-group-toggle-options"),r=a.find(".caldera-config-group-auto-options"),n=r.find(".auto-populate-type");r.find(".auto-populate-type-panel").hide(),t.prop("checked")?(i.hide(),r.show()):(i.show(),r.hide()),r.find(".caldera-config-group-auto-"+n.val()).show()}),e("body").on("change",".pin-toggle-roles",function(){var t=e(this),a=e("#caldera-pin-rules");"1"===t.val()?a.show():a.hide()}),e("body").on("click",".magic-tag-init",function(t){var a=e(this),i=a.prev();i.focus().trigger("init.magic")}),e("body").on("keyup  focus select click init.magic",".magic-tag-enabled",function(t){init_magic_tags();var a=e(this),i=a.parent(),r=i.closest(".wrapper-instance-pane").find(".caldera-select-field-type").val()?i.closest(".wrapper-instance-pane").find(".caldera-select-field-type").val():"hidden",n=i.find(".magic-tags-autocomplete"),o=n.find("ul"),s=this.value,l=[],d="",c=this.selectionStart,u=this.selectionEnd;if(n.length&&n.data("focus"))return void t.preventDefault();if(a.data("tag",""),this.selectionEnd>this.selectionStart)d=this.value.substr(this.selectionStart,this.selectionEnd-this.selectionStart);else if(("select"===t.type||"keyup"===t.type)&&40!==t.which&&38!==t.which&&39!==t.which&&37!==t.which){for(c=this.selectionStart;c>0;c--){var p=s.substr(c-1,1);if(" "===p||"\n"===p||("%"===p||"}"===p)&&this.selectionStart===c)break}for(u=this.selectionStart;u<s.length;u++){var p=s.substr(u,1);if(" "===p||"\n"===p||("%"===p||"{"===p)&&this.selectionStart===u)break}d=s.substr(c,u-c)}if("focusout"!==t.type){"init"!==t.type&&d.length<3&&n.length&&n.remove(),n.length||(n=e('<div class="magic-tags-autocomplete"></div>'),o=e("<ul></ul>"),o.appendTo(n),n.insertAfter(a),n.on("mouseenter",function(){e(this).data("focus",!0)}),n.on("mouseleave",function(){e(this).data("focus",!1),setTimeout(function(){n.remove()},200),a.is(":focus")||a.trigger("focusout")})),o.empty();var h="system",f=!1;"hidden"===r||"dropdown"===r||"radio"===r||"toggle_switch"===r||"checkbox"===r?(f=!0,r="text",h="all"):"paragraph"!==r&&"html"!==r||(r="text"),a.data("type")&&(r=a.data("type")),r=r.split(","),r.push("vars");for(var g=0;g<r.length;g++)for(var v in system_values)if("undefined"!=typeof system_values[v].tags&&"undefined"!=typeof system_values[v].tags[r[g]]){if(l=[v],"system"!==v&&"variable"!==v&&"field"!==v){var m=jQuery(".processor-"+v),y=a.closest(".caldera-editor-processor-config-wrapper"),_=y.prop("id");l=[];for(var k=0;k<m.length;k++)if(y.length||f!==!0){if(_===m[k].id)continue;jQuery("li."+m[k].id).index()<jQuery("li."+_).index()&&l.push(m[k].id)}else l.push(m[k].id)}for(var b=0;b<l.length;b++)if("all"===h||h===v||"variable"===v){var w=e('<li class="header">'+system_values[v].type+(b>0?" ["+(b+1)+"]":"")+"</li>"),C=0;w.appendTo(o);for(var x=0;x<system_values[v].tags[r[g]].length;x++)if(!a.data("parent")||"variable:"+a.data("parent")!==system_values[v].tags[r[g]][x]){var D=system_values[v].wrap[0]+system_values[v].tags[r[g]][x]+system_values[v].wrap[1];if(l[b]!==v&&l.length>1&&(D=system_values[v].wrap[0]+system_values[v].tags[r[g]][x]+":"+l[b]+system_values[v].wrap[1]),D.indexOf(d)>=0||"init"===t.type){C+=1;var T=D.replace(d,"<strong>"+d+"</strong>"),S=e('<li class="tag" data-tag="'+D+'">'+T+"</li>");S.on("click",function(){var t=e(this).data("tag");a.val(s.substr(0,c)+t+s.substr(u)).trigger("change").focus(),a[0].selectionStart=c+t.length-(t.indexOf("*")>0?2:0),a[0].selectionEnd=c+t.length-(t.indexOf("*")>0?1:0),u=c=a[0].selectionEnd,s+=t,a.trigger("init.magic")}),S.appendTo(o)}}0===C&&w.remove()}}}o.children().length||n.remove(),"focusout"===t.type&&setTimeout(function(){n.remove()},200)});for(var r=e(".cf-editor-template"),n=0;n<r.length;n++)compiled_templates[r[n].id]=Handlebars.compile(r[n].innerHTML);e(".caldera-select-field-type").not(".field-initialized").each(function(e,a){t(a)})});var rebuild_field_binding,rebind_field_bindings,current_form_fields={},required_errors={},add_new_grid_page,add_page_grid,init_magic_tags,core_form,compiled_templates={};init_magic_tags=function(){var e=jQuery(".magic-tag-enabled");e.each(function(e,t){var a=jQuery(t);if(a.hasClass("magic-tag-init-bound")){var i=a.parent().find(".magic-tag-init");return void(a.is(":visible")?i.show():i.hide())}var r=jQuery('<span class=""></span>'),n=jQuery('<span style="position:relative;display:inline-block; width:100%;"></span>');a.is("input")&&r.css("borderBottom","none"),a.hasClass("caldera-conditional-value-field")&&n.width("auto"),a.wrap(n),r.insertAfter(a),a.addClass("magic-tag-init-bound"),a.is(":visible")?r.show():r.hide()})},rebuild_field_binding=function(){if(core_form||(core_form=jQuery(".caldera-forms-options-form")),core_form.hasClass("builder-loaded")){var e=jQuery(".caldera-editor-field-config-wrapper");system_values.field={tags:{text:[]},type:"Fields",wrap:["%","%"]};for(var t=0;t<e.length;t++){var a=e[t].id,i=jQuery("#"+a+"_lable").val(),r=jQuery("#"+a+"_slug").val(),n=jQuery("#"+a+"_type").val();"undefined"==typeof system_values.field.tags[n]&&(system_values.field.tags[n]=[]),system_values.field.tags[n].push(r),"text"!==n&&system_values.field.tags.text.push(r),current_form_fields[a]={label:i,slug:r,type:n},jQuery("option.bound-field").trigger("change").each(function(e,t){var a=jQuery(t);0!==a.prop("value").indexOf("{")?a.text(jQuery("#"+a.prop("value")+"_lable").val()+" ["+jQuery("#"+a.prop("value")+"_lable").val()+"]"):a.text(a.prop("value").replace("{","").replace("}",""))}).removeClass("bound-field")}}},rebind_field_bindings=function(){var e,t,a=jQuery(".caldera-field-bind").not(".bound_field");if(a.length){a.addClass("bound_field");for(var i=0;i<a.length;i++){var r=jQuery(a[i]),n=r.val(),o=r.data("default"),s=r.data("exclude"),l=0,d=r.closest(".caldera-editor-processor-config-wrapper"),c=d.prop("id"),u="";if(o&&!r.hasClass("reload-binding")&&(n=o),r.is("select")){r.empty();var p=jQuery('<optgroup label="Fields">');for(var h in current_form_fields)r.data("type")&&r.data("type").split(",").indexOf(current_form_fields[h].type)<0||(r.data("id")!==h&&p.append('<option value="'+h+'"'+(n===h?'selected="selected"':"")+">"+current_form_fields[h].label+" ["+current_form_fields[h].slug+"]</option>"),l+=1);p.appendTo(r),0===l&&r.empty();for(var f in system_values)if(e=[],!(s&&s.split(",").indexOf(f)>=0)){if("system"!==f&&"variable"!==f)for(var g=jQuery(".processor-"+f),v=0;v<g.length;v++)c!==g[v].id&&(e.push(g[v].id),g.length>1&&(t=jQuery("li."+g[v].id+" .processor-line-number"))&&t.html("["+(v+1)+"]"));else e.push("__system__");var m=[];r.data("type")?(m=r.data("type").split(","),m.push("vars")):m=["text","vars"];for(var y=0;y<m.length;y++)if(system_values[f].tags&&system_values[f].tags[m[y]])for(var _=0;_<e.length;_++){jQuery("li."+e[_]).index()>jQuery("li."+c).index()&&"__system__"!==e[_]?r.closest(".caldera-editor-processors-panel-wrap").length&&(u=' disabled="disabled"'):u="";for(var p=jQuery('<optgroup label="'+system_values[f].type+("__system__"!==e[_]?" "+jQuery("li."+e[_]).find(".processor-line-number").html():"")+'"'+u+">"),k=0;k<system_values[f].tags[m[y]].length;k++){var b=system_values[f].tags[m[y]][k];"__system__"!==e[_]&&(b=b.replace(f,e[_])),p.append('<option value="{'+b+'}"'+(n==="{"+b+"}"?'selected="selected"':"")+u+">"+system_values[f].tags[m[y]][k]+"</option>"),l+=1}p.children().length&&p.appendTo(r)}}if(0===l){if(r.empty(),r.data("type")){r.append('<option value="">No '+r.data("type").split(",").join(" or ")+" in form</option>");var w=!0}}else r.prop("disabled",!1);r.hasClass("required")||"undefined"!=typeof w||r.prepend('<option value=""></option>'),r.val(n)}}init_magic_tags(),jQuery(document).trigger("bound.fields"),jQuery(".caldera-header-save-button").prop("disabled",!1)}},jQuery(document).ready(function(e){function t(){var t=e(".layout-grid-panel"),a=0;t.each(function(t,i){var r=e(i),n=r.find(".layout-structure"),o=r.find(".row"),s=[];o.each(function(t,i){var r=e(i),n=r.children().not(".column-merge"),o=[];a+=1,n.each(function(t,i){span=e(i).attr("class").split("-"),o.push(span[2]);var r=e(i).find(".field-location");r.length&&r.each(function(i,r){var n=e(r);n.val(a+":"+(t+1)).removeAttr("disabled")})}),s.push(o.join(":"))}),n.val(s.join("|"))})}function a(t,a,r){var n,o,s="fld_"+Math.round(1e7*Math.random()),l=s,d=e("#field_config_panels");t.prop("id","").prop("title",""),n=Handlebars.compile(e("#caldera_field_config_wrapper_templ").html()),o=e.extend({},{id:l,label:"",slug:""},r),o.slug="",d.append(n(o)),t.removeClass("button-small").removeClass("button").removeClass("button-primary").removeClass("ui-draggable").removeClass("layout-new-form-field").addClass("layout-form-field").attr("data-config",s).css({display:"",opacity:""}),t.find(".layout_field_name").remove(),t.find(".field-location").prop("name","config[layout_grid][fields]["+s+"]"),t.find(".settings-panel").show(),t.appendTo(a),i(),t.find(".icon-edit").trigger("click"),e("#"+s+"_lable").focus().select(),baldrickTriggers(),e(document).trigger("field.added"),r?e("#"+l+"_type").data("type",o.type).trigger("change"):e("#"+s).trigger("field.drop"),rebuild_field_binding()}function i(){e(".toggle-options").sortable({handle:".dashicons-sort"}),e("#grid-pages-panel").sortable({placeholder:"row-drop-helper",handle:".sort-handle",items:".first-row-level",axis:"y",stop:function(){t()}}),e(".layout-column").sortable({connectWith:".layout-column",appendTo:"#grid-pages-panel",helper:"clone",items:".layout-form-field",handle:".drag-handle",cursor:"move",opacity:.7,cursorAt:{left:100,top:15},start:function(e,t){t.helper.css({width:"200px",height:"35px",paddingTop:"20px"})},stop:function(e,a){a.item.removeAttr("style"),t()}}),e("h3 .layout-new-form-field").draggable({helper:"clone",appendTo:"body"}),e(".page-toggle.button").droppable({accept:".layout-form-field",over:function(t,a){e(this).trigger("click"),e(".layout-column").sortable("refresh")}}),e(".layout-column").droppable({greedy:!0,activeClass:"ui-state-dropper",hoverClass:"ui-state-hoverable",accept:".layout-new-form-field",drop:function(t,i){var r=i.draggable.clone(),n=e(this);a(r,n)}}),t()}function r(){if(s){var t=e(".column-fieldinsert");t.length?(t.stop().fadeToggle(700),e(".layout-new-form-field").stop().fadeToggle(700)):cf_clear_puler()}}function n(){e(".caldera-editor-processors-panel ul").sortable({update:function(){rebuild_field_binding()}})}function o(t){var a=e(t),i=e("#"+a.val()+"-tmpl").length?e("#"+a.val()+"-tmpl").html():"",r=a.closest(".caldera-editor-processor-config-wrapper"),n=r.find(".caldera-config-processor-setup"),o=Handlebars.compile(i),s=r.find(".processor_config_string").val(),l=a.data("type");
s=s.length&&l===a.val()?JSON.parse(s):processor_defaults[a.val()+"_cfg"],s||(s={}),s._id=r.prop("id"),s._name="config[processors]["+r.prop("id")+"][config]",o=e("<div>").html(o(s)),n.html(o.html()),"function"==typeof window[a.val()+"_init"]&&window[a.val()+"_init"](r.prop("id"),n),r.find(".no-conditions").length&&r.find(".toggle_option_tab").remove(),rebuild_field_binding(),baldrickTriggers(),e(".wp-baldrick").baldrick({request:ajaxurl,method:"POST",before:function(t){var a=e(t);a.data("addNode")&&!a.data("request")&&a.data("request","cf_get_default_setting")}})}add_new_grid_page=function(e){return{page_no:"pg_"+Math.round(1e7*Math.random())}},add_page_grid=function(t){var a=e(".page-toggle").length+1,r=e('<button type="button" data-name="Page '+a+'" data-page="'+t.rawData.page_no+'" class="page-toggle button">'+t.params.trigger.data("addtitle")+" "+a+"</button> "),n=e("#page-toggles");r.appendTo(n),n.show(),i(),r.trigger("click"),1===a&&n.hide(),e(document).trigger("add.page")},e(document).on("remove.page add.page load.page",function(t){var a=e(".page-toggle").length,i=e("#tab_pages");a<=1?i.hide():i.show()}),i(),e("#grid-pages-panel").on("click",".column-fieldinsert .dashicons-plus-alt",function(t){var i=e(this).closest(".column-container"),r=e("#newfield-tool").clone().css("display","");a(r,i)}),e("#grid-pages-panel").on("click",".column-split",function(t){var a=e(this).parent().parent(),r=a.attr("class").split("-"),n=e("<div>").insertAfter(a),o=Math.ceil(r[2]/2),s=Math.floor(r[2]/2);r[2]=o,a.attr("class",r.join("-")),r[2]=s,n.addClass(r.join("-")).append('<div class="layout-column column-container">'),e(this).remove(),i(),jQuery(".column-tools").remove(),jQuery(".column-merge").remove()}),e("#grid-pages-panel").on("click",".column-remove",function(a){var i=e(this).closest(".row"),r=i.find(".layout-form-field"),n=i.closest(".layout-grid-panel");if(r.length){if(!confirm(e("#row-remove-fields-message").text()))return;r.each(function(t,a){var i=e(a).data("config");e("#"+i).remove(),e('option[value="'+i+'"]').remove(),e('[data-bind="'+i+'"]').remove(),delete current_form_fields[i]})}i.slideUp(200,function(){if(e(this).remove(),t(),rebuild_field_binding(),!n.find(".row").length){n.remove();var a=e("#page-toggles .button-primary"),i=a.prev(),r=a.next();a.remove(),i.length?i.trigger("click"):r.trigger("click")}e(document).trigger("remove.page")}),jQuery(".column-tools").remove(),jQuery(".column-merge").remove()}),e(".caldera-config-editor-main-panel").on("click",".caldera-add-row",function(a){a.preventDefault();var r=e(".page-active");if(!r.length)return void e(".caldera-add-page").trigger("click");var n=e('<div style="display:none;" class="first-row-level row"><div class="col-xs-12"><div class="layout-column column-container"></div></div></div>');e(".page-active").append(n),n.slideDown(200),i(),t()}),e("#grid-pages-panel").on("click",".column-join",function(a){var i=e(this).parent().parent().parent(),r=i.prev(),n=r.attr("class").split("-"),o=i.attr("class").split("-");n[2]=parseFloat(n[2])+parseFloat(o[2]),i.find(".layout-column").contents().appendTo(r.find(".layout-column")),r.attr("class",n.join("-")),i.remove(),t(),jQuery(".column-tools").remove(),jQuery(".column-merge").remove()}),e("#grid-pages-panel").on("mouseenter",".row",function(a){var i=jQuery(this);jQuery(".column-tools,.column-merge").remove(),i.children().children().first().append('<div class="column-remove column-tools"><i class="icon-remove"></i></div>'),i.children().children().last().append('<div class="column-sort column-tools" style="text-align:right;"><i class="dashicons dashicons-menu drag-handle sort-handle"></i></div>'),i.children().children().not(":first").prepend('<div class="column-merge"><div class="column-join column-tools"><i class="icon-join"></i></div></div>');var r=i.parent().parent().parent().width()/12-1;i.children().children().each(function(t,a){var i=e(a),r=i.width()/2-5;i.prepend('<div class="column-fieldinsert column-tools"><i class="dashicons dashicons-plus-alt"></i></div>'),i.parent().hasClass("col-xs-1")||(i.prepend('<div class="column-split column-tools"><i class="dashicons dashicons-leftright"></i></div>'),i.find(".column-split").css("left",r))}),jQuery(".column-merge").draggable({axis:"x",helper:"clone",appendTo:i,grid:[r,0],drag:function(a,i){e(this).addClass("dragging"),e(".column-tools").remove(),e(".column-split").remove();var r=e(this).parent().parent(),n=i.helper,o=i.originalPosition.left>n.position().left?"left":"right",s=r.prev(),l=Math.round(r.parent().width()/12-10),d=Math.abs(i.originalPosition.left-n.position().left);if(r.parent().addClass("sizing"),d>=l){var c=s.attr("class").split("-"),u=r.attr("class").split("-");c[2]=parseFloat(c[2]),u[2]=parseFloat(u[2]),"left"===o?(c[2]--,u[2]++,c[2]>0&&c[2]<c[2]+u[2]?(s.attr("class",c.join("-")),r.attr("class",u.join("-")),i.originalPosition.left=n.position().left):e(this).draggable("option","disabled",!0)):(c[2]++,u[2]--,u[2]>0&&u[2]<u[2]+u[2]?(s.attr("class",c.join("-")),r.attr("class",u.join("-")),i.originalPosition.left=n.position().left):e(this).draggable("option","disabled",!0)),t()}},stop:function(){e(this).removeClass("dragging").parent().parent().parent().removeClass("sizing")}})}),e("#grid-pages-panel").on("mouseleave",".row",function(e){jQuery(".column-tools").remove(),jQuery(".column-merge").remove()}),e("#grid-pages-panel").on("click",".layout-form-field .icon-remove",function(){var t=e(this),a=t.parent(),i=e("#"+a.data("config"));a.slideUp(100,function(){e(this).remove()}),i.slideUp(100,function(){e(this).remove()})}),e(document).on("click",".layout-form-field .dashicons-admin-page",function(){var t=e(this),i=t.parent(),r=i.data("config"),n=e("#"+r).formJSON(),o=t.closest(".column-container"),s=i.clone().css("display",""),l={};i.hasClass("field-edit-open")&&(i.removeClass("field-edit-open"),s.removeClass("field-edit-open"),e(".caldera-editor-field-config-wrapper").hide()),n.config.fields[r]&&(l=n.config.fields[r],delete l.ID),a(s,o,l)}),e(document).on("click",".layout-form-field .icon-edit",function(){var t=e(this),a=t.parent(),i=e("#"+a.data("config")+"_type").val();e(".caldera-editor-field-config-wrapper").hide(),a.hasClass("field-edit-open")?a.removeClass("field-edit-open"):(e(".layout-form-field").removeClass("field-edit-open"),a.addClass("field-edit-open"),e("#"+a.data("config")).show()),e(document).trigger("show."+a.data("config")),e(document).trigger("show.fieldedit"),"radio"!==i&&"checkbox"!==i&&"dropdown"!==i&&"toggle_switch"!==i||e("#"+a.data("config")+"_auto").trigger("change")}),e("body").on("click",".layout-modal-edit-closer,.layout-modal-save-action",function(t){t.preventDefault();var a=e(this),i=e(".layout-form-field.edit-open"),r=a.closest(".layout-modal-container");settings=r.find(".settings-panel").first(),e(".edit-open").removeClass("edit-open"),settings.appendTo(i.find(".settings-wrapper")).hide(),r.hide()}),e(".layout-editor-body").on("change",".layout-core-pod-query",function(){e(this).parent().find(".settings-panel-row").remove(),e(".edit-open").find(".drag-handle .set-pod").html(" - "+e(this).val())}),e(".layout-editor-body").on("click",".remove-where",function(){e(this).closest(".settings-panel-row").remove()}),e(".layout-editor-body").on("click",".use-pod-container",function(){var t=e(this),a=t.prev(),i=a.val();if(i.length){e(".edit-open").find(".drag-handle .set-pod").html(" - "+a.val()),t.parent().parent().find(".spinner").css("display","inline-block");var r={action:"pq_loadpod",pod_reference:{pod:i}};e.post(ajaxurl,r,function(a){t.parent().find(".spinner").css("display","none");var i=e("#where-line-tmpl").html(),r="",n=t.closest(".settings-panel").data("container");for(var o in a)r+='<option value="'+a[o]+'">'+a[o]+"</option>";i=i.replace(/{{fields}}/g,r).replace(/{{container_id}}/g,n),t.parent().append(i)})}}),e(".caldera-editor-header").on("click",".column-sort .icon-edit",function(e){}),e(".layout-editor-body").on("tray_loaded",".layout-template-tray",function(){i()}),e(".caldera-editor-header").on("click",".caldera-editor-header-nav a",function(t){t.preventDefault();var a=e(this);e(".caldera-editor-header-nav li").removeClass("active"),e(".caldera-editor-body").hide(),e(a.attr("href")).show(),a.parent().addClass("active"),rebind_field_bindings()}),e("body").on("change",".required",function(){check_required_bindings(this)}),e("body").on("submit",".caldera-forms-options-form",function(t){var a=e(".required.has-error");a.length&&t.preventDefault()}),e(".caldera-editor-body").on("click",".add-toggle-option",function(t){var a=e(this);if(a.data("bulk"))return e(a.data("bulk")).toggle(),void e(a.data("bulk")).find("textarea").focus();var i=a.closest(".caldera-editor-field-config-wrapper"),r=i.find(".toggle-options"),n=e("#field-option-row-tmpl").html(),o=Handlebars.compile(n),s="opt"+parseInt(1048576*(Math.random()+1)),l={_name:"config[fields]["+i.prop("id")+"][config]",option:{}};if(a.data("options")){for(var d=e(a.data("options")),c=d.val().split("\n"),u=!1,p=0;p<c.length;p++){var h=c[p],f=h,g=f.split("|");g.length>1&&(f=g[0],h=g[1],u=!0),l.option["opt"+parseInt(1048576*(Math.random()+p))]={value:f,label:h,"default":!1}}e(a.data("options")).parent().hide(),d.val(""),!0===u?i.find(".toggle_show_values").prop("checked",!0):i.find(".toggle_show_values").prop("checked",!1),r.empty()}else l.option[s]={value:"",label:"","default":!1};e(".preset_options").val(""),r.append(o(l)),i.find(".toggle_show_values").trigger("change"),e(".toggle-options").sortable({handle:".dashicons-sort"}),c||r.find(".toggle_label_field").last().focus()}),e(".caldera-editor-body").on("change",".preset_options",function(t){var a=e(this),i=a.val(),r=e(a.data("bulk"));preset_options&&preset_options[i]&&preset_options[i].data&&("object"==typeof preset_options[i].data&&preset_options[i].data.length&&(preset_options[i].data=preset_options[i].data.join("\n")),r.val(preset_options[i].data))}),e(".caldera-editor-body").on("click",".toggle-remove-option",function(t){var a=e(this).closest(".caldera-editor-field-config-wrapper").find(".field-config").first();e(this).parent().remove(),a.trigger("change"),e(document).trigger("option.remove")}),e(".caldera-editor-body").on("click",".page-toggle",function(t){var a=e(this),i=a.parent(),r=i.find(".button");r.removeClass("button-primary"),e(".layout-grid-panel").hide().removeClass("page-active"),e("#"+a.data("page")).show().addClass("page-active"),a.addClass("button-primary"),r.each(function(t,a){e(a).html(i.data("title")+" "+(t+1))}),1===r.length&&i.hide()}),e(".caldera-editor-body").on("blur toggle.values",".toggle_label_field",function(t){var a=e(this),i=a.prev();i.val().length||i.val(a.val())}),e(document).on("change focusout",".toggle_value_field",function(){e(document).trigger("show.fieldedit")}),e(document).on("show.fieldedit option.remove",function(t){e(".toggle_value_field.has-error").removeClass("has-error");for(var a=e("#"+e(".layout-form-field.field-edit-open").data("config")),i=a.find(".toggle_value_field"),r=a.find(".notice"),n=0,o=0;o<i.length;o++){for(var s=(i[o].value,0),l=0;l<i.length;l++)i[o]!==i[l]&&i[o].value===i[l].value&&(e(i[l]).addClass("has-error"),s++);s>0&&(e(i[o]).addClass("has-error"),n++)}n>0?(r.slideDown(),t.preventDefault()):r.slideUp()});var s=!1;focus_initial_field=function(t){var a=e(".layout-grid-panel .icon-edit").first();a.length?a.trigger("click"):(e(".layout-column.column-container").first().trigger("mouseover"),s=setInterval(r,500)),e(document).off("load.page",focus_initial_field)},e(document).on("load.page",focus_initial_field),cf_clear_puler=function(){s&&(clearTimeout(s),e(document).off("mouseover",".layout-new-form-field, .column-fieldinsert",cf_clear_puler)),e(".layout-new-form-field, .column-fieldinsert").fadeIn()},e(document).on("mouseover",".layout-new-form-field, .column-fieldinsert",cf_clear_puler),rebuild_field_binding(),e(document).trigger("load.page"),e("body").on("click",".caldera-processor-nav a",function(t){t.preventDefault();var a=e(this);e(".caldera-processor-nav").removeClass("active"),e(".caldera-editor-processor-config-wrapper").hide(),e(a.attr("href")).show(),a.parent().addClass("active")}),e("body").on("click",".add-new-processor",function(t){var a=e(this),i=Handlebars.compile(e("#processor-wrapper-tmpl").html());wrap=e(".active-processors-list"),process_conf=e(".caldera-editor-processor-config"),processid=Math.round(1e8*Math.random()),new_templ=Handlebars.compile(e("#processor-line-tmpl").html()),new_proc={id:"fp_"+processid,type:a.data("type")},wrap.append(new_templ(new_proc)),process_conf.append(i(new_proc)),e("#form_processor_baldrickModalCloser").trigger("click"),e(".caldera-processor-nav a").last().trigger("click"),e("#fp_"+processid+"_type").val(a.data("type")).trigger("change"),n(),baldrickTriggers()}),e("body").on("click",".delete-processor",function(t){var a=e(this),i=a.closest(".caldera-editor-processor-config-wrapper");i.data("type");confirm(a.data("confirm"))&&(e("."+i.prop("id")).remove(),i.remove(),e(".caldera-processor-nav a").first().trigger("click"),rebuild_field_binding())}),e("body").on("change",".caldera-select-processor-type",function(t){var a=e(this),i=a.closest(".caldera-editor-processor-config-wrapper"),r=a.find('option[value="'+a.val()+'"]').text(),n=i.find(".caldera-editor-processor-title"),s=e(".caldera-processor-nav.active a");""===r&&(r=n.data("title")),n.html(r),s.html(r+' <span class="processor-line-number"></span>').parent().addClass("processor_type_"+a.val()),o(this),rebuild_field_binding()}),e(document).on("click","#cf-shortcode-preview",function(){e(this).focus().select()}),e(document).on("change",".cf-email-preview-toggle",function(){var t=e(this),a=e(".caldera-header-email-preview-button");t.is(":checked")?a.show().attr("aria-hidden","false").css("visibility","visible"):a.hide().attr("aria-hidden","true").css("visibility","hidden")}),rebuild_field_binding(),e(".caldera-select-processor-type").each(function(e,t){o(t)}),n()}),Handlebars.registerHelper("_field",function(e){var t=this,a="",i="",r="",n=this[e.hash.slug]?' data-default="'+this[e.hash.slug]+'"':"";e.hash.required&&(a=" required"),e.hash.exclude&&(r='data-exclude="'+e.hash.exclude+'"'),e.hash.array&&(i="[]","true"!==e.hash.array&&(n='value="'+e.hash.array+'"')),out="<select "+(e.hash.type?'data-type="'+e.hash.type+'"':"")+n+" "+r+' name="'+this._name+"["+e.hash.slug+"]"+i+'" id="'+this._id+"_"+e.hash.slug+'" class="block-input field-config caldera-field-bind'+a+'">',this[e.hash.slug]?out+='<option class="bound-field" value="'+this[e.hash.slug]+'" class="bound-field"></option>':e.hash.required||(out+='<option value=""></option>');for(var o in current_form_fields){var s="";e.hash.type&&current_form_fields[o].type!==e.hash.type||(t[e.hash.slug]&&t[e.hash.slug]===o&&(s=' selected="selected"'),out+='<option value="'+o+'"'+s+">"+current_form_fields[o].label+" ["+current_form_fields[o].slug+"]</option>")}return out+="</select>",e.hash.required&&(out+='<input class="field-config" name="'+this._name+'[_required_bounds][]" type="hidden" value="'+e.hash.slug+'">'),out}),Handlebars.registerHelper("console",function(e,t){console.log(this)}),jQuery&&function(e){e.extend(e.fn,{miniColors:function(t,a){var i=function(t,a,i){var r=y(t.val());r||(r="ffffff");var n=C(r),d=e('<span class="input-group-addon" style="background-color: #'+r+'" href="#"></span>');d.insertAfter(t),t.addClass("miniColors").data("original-maxlength",t.attr("maxlength")||null).data("original-autocomplete",t.attr("autocomplete")||null).data("letterCase",a.letterCase?a.letterCase:"uppercase").data("trigger",d).data("hsb",n).data("change",a.change?a.change:null).data("close",a.close?a.close:null).data("open",a.open?a.open:null).attr("maxlength",7).attr("autocomplete","off").val("#"+f(r,a.letterCase)).trigger("change"),a.readonly&&t.prop("readonly",!0),a.disabled&&o(t),d.on("click.miniColors",function(e){e.preventDefault(),""===t.val()&&t.val("#").trigger("change"),s(t)}),t.on("focus.miniColors",function(e){""===t.val()&&t.val("#").trigger("change"),s(t)}),t.on("blur.miniColors",function(e){var a=y(x(t.data("hsb")));t.val(a?"#"+f(a,t.data("letterCase")):"").trigger("change")}),t.on("keydown.miniColors",function(e){9===e.keyCode&&l(t)}),t.on("keyup.miniColors",function(e){p(t)}),t.on("paste.miniColors",function(e){setTimeout(function(){p(t)},5)})},r=function(t){l(),t=e(t),t.data("trigger").remove(),t.attr("autocomplete",t.data("original-autocomplete")).attr("maxlength",t.data("original-maxlength")).removeData().removeClass("miniColors").off(".miniColors"),e(document).off(".miniColors")},n=function(e){e.prop("disabled",!1).data("trigger").css("opacity",1)},o=function(e){l(e),e.prop("disabled",!0).data("trigger").css("opacity",.5)},s=function(t){if(t.prop("disabled"))return!1;l();var a=e('<div class="miniColors-selector"></div>');a.append('<div class="miniColors-colors" style="background-color: #FFF;"><div class="miniColors-colorPicker"><div class="miniColors-colorPicker-inner"></div></div>').append('<div class="miniColors-hues"><div class="miniColors-huePicker"></div></div>').css("display","none").addClass(t.attr("class")).removeClass("form-control");var i=t.data("hsb");a.find(".miniColors-colors").css("backgroundColor","#"+x({h:i.h,s:100,b:100}));var r=t.data("colorPosition");r||(r=g(i)),a.find(".miniColors-colorPicker").css("top",r.y+"px").css("left",r.x+"px");var n=t.data("huePosition");n||(n=v(i)),a.find(".miniColors-huePicker").css("top",n.y+"px"),t.data("selector",a).data("huePicker",a.find(".miniColors-huePicker")).data("colorPicker",a.find(".miniColors-colorPicker")).data("mousebutton",0),e("BODY").append(a);var o=t.data("trigger"),s=!t.is(":visible"),u=s?o.offset().top+o.outerHeight():t.offset().top+t.outerHeight(),p=s?o.offset().left:t.offset().left,h=a.outerWidth(),f=a.outerHeight(),m=o.outerWidth(),y=o.outerHeight(),k=e(window).height(),b=e(window).width(),w=e(window).scrollTop(),C=e(window).scrollLeft();u+f>k+w&&(u=u-f-y),p+h>b+C&&(p=p-h+m),a.css({top:u,left:p}).fadeIn(100),a.on("selectstart",function(){return!1}),(!e.browser.msie||e.browser.msie&&e.browser.version>=9)&&e(window).on("resize.miniColors",function(e){l(t)}),e(document).on("mousedown.miniColors touchstart.miniColors",function(a){t.data("mousebutton",1);var i=e(a.target).parents().andSelf();return i.hasClass("miniColors-colors")&&(a.preventDefault(),t.data("moving","colors"),d(t,a)),i.hasClass("miniColors-hues")&&(a.preventDefault(),t.data("moving","hues"),c(t,a)),i.hasClass("miniColors-selector")?void a.preventDefault():void(i.hasClass("miniColors")||l(t))}),e(document).on("mouseup.miniColors touchend.miniColors",function(e){e.preventDefault(),t.data("mousebutton",0).removeData("moving")}).on("mousemove.miniColors touchmove.miniColors",function(e){e.preventDefault(),1===t.data("mousebutton")&&("colors"===t.data("moving")&&d(t,e),"hues"===t.data("moving")&&c(t,e))}),t.data("open")&&t.data("open").call(t.get(0),"#"+x(i),_(i))},l=function(t){t||(t=e(".miniColors")),t.each(function(){var a=e(this).data("selector");e(this).removeData("selector"),e(a).fadeOut(100,function(){if(t.data("close")){var a=t.data("hsb"),i=x(a);t.data("close").call(t.get(0),"#"+i,_(a))}e(this).remove()})}),e(document).off(".miniColors")},d=function(e,t){var a=e.data("colorPicker");a.hide();var i={x:t.pageX,y:t.pageY};t.originalEvent.changedTouches&&(i.x=t.originalEvent.changedTouches[0].pageX,i.y=t.originalEvent.changedTouches[0].pageY),i.x=i.x-e.data("selector").find(".miniColors-colors").offset().left-5,i.y=i.y-e.data("selector").find(".miniColors-colors").offset().top-5,i.x<=-5&&(i.x=-5),i.x>=144&&(i.x=144),i.y<=-5&&(i.y=-5),i.y>=144&&(i.y=144),e.data("colorPosition",i),a.css("left",i.x).css("top",i.y).show();var r=Math.round(.67*(i.x+5));r<0&&(r=0),r>100&&(r=100);var n=100-Math.round(.67*(i.y+5));n<0&&(n=0),n>100&&(n=100);var o=e.data("hsb");o.s=r,o.b=n,u(e,o,!0)},c=function(e,t){var a=e.data("huePicker");a.hide();var i={y:t.pageY};t.originalEvent.changedTouches&&(i.y=t.originalEvent.changedTouches[0].pageY),i.y=i.y-e.data("selector").find(".miniColors-colors").offset().top-1,i.y<=-1&&(i.y=-1),i.y>=149&&(i.y=149),e.data("huePosition",i),a.css("top",i.y).show();var r=Math.round(2.4*(150-i.y-1));r<0&&(r=0),r>360&&(r=360);var n=e.data("hsb");n.h=r,u(e,n,!0)},u=function(e,t,a){e.data("hsb",t);var i=x(t);if(a&&e.val("#"+f(i,e.data("letterCase"))).trigger("change"),e.data("trigger").css("backgroundColor","#"+i),e.data("selector")&&e.data("selector").find(".miniColors-colors").css("backgroundColor","#"+x({h:t.h,s:100,b:100})),e.data("change")){if(i===e.data("lastChange"))return;e.data("change").call(e.get(0),"#"+i,_(t)),e.data("lastChange",i)}},p=function(t){t.val("#"+m(t.val())).trigger("change");var a=y(t.val());if(!a)return!1;var i=C(a),r=t.data("hsb");if(i.h===r.h&&i.s===r.s&&i.b===r.b)return!0;var n=g(i),o=e(t.data("colorPicker"));o.css("top",n.y+"px").css("left",n.x+"px"),t.data("colorPosition",n);var s=v(i),l=e(t.data("huePicker"));return l.css("top",s.y+"px"),t.data("huePosition",s),u(t,i),!0},f=function(e,t){return"lowercase"===t?e.toLowerCase():"uppercase"===t?e.toUpperCase():e},g=function(e){var t=Math.ceil(e.s/.67);t<0&&(t=0),t>150&&(t=150);var a=150-Math.ceil(e.b/.67);return a<0&&(a=0),a>150&&(a=150),{x:t-5,y:a-5}},v=function(e){var t=150-e.h/2.4;return t<0&&(h=0),t>150&&(h=150),{y:t-1}},m=function(e){return e.replace(/[^A-F0-9]/gi,"")},y=function(e){return(e=m(e))?(3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),6===e.length?e:null):null},_=function(e){var t={},a=Math.round(e.h),i=Math.round(255*e.s/100),r=Math.round(255*e.b/100);if(0===i)t.r=t.g=t.b=r;else{var n=r,o=(255-i)*r/255,s=(n-o)*(a%60)/60;360===a&&(a=0),a<60?(t.r=n,t.b=o,t.g=o+s):a<120?(t.g=n,t.b=o,t.r=n-s):a<180?(t.g=n,t.r=o,t.b=o+s):a<240?(t.b=n,t.r=o,t.g=n-s):a<300?(t.b=n,t.g=o,t.r=o+s):a<360?(t.r=n,t.g=o,t.b=n-s):(t.r=0,t.g=0,t.b=0)}return{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}},k=function(t){var a=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];return e.each(a,function(e,t){1===t.length&&(a[e]="0"+t)}),a.join("")},b=function(e){return e=parseInt(e.indexOf("#")>-1?e.substring(1):e,16),{r:e>>16,g:(65280&e)>>8,b:255&e}},w=function(e){var t={h:0,s:0,b:0},a=Math.min(e.r,e.g,e.b),i=Math.max(e.r,e.g,e.b),r=i-a;return t.b=i,t.s=0!==i?255*r/i:0,0!==t.s?e.r===i?t.h=(e.g-e.b)/r:e.g===i?t.h=2+(e.b-e.r)/r:t.h=4+(e.r-e.g)/r:t.h=-1,t.h*=60,t.h<0&&(t.h+=360),t.s*=100/255,t.b*=100/255,t},C=function(e){var t=w(b(e));return 0===t.s&&(t.h=360),t},x=function(e){return k(_(e))};switch(t){case"readonly":return e(this).each(function(){e(this).hasClass("miniColors")&&e(this).prop("readonly",a)}),e(this);case"disabled":return e(this).each(function(){e(this).hasClass("miniColors")&&(a?o(e(this)):n(e(this)))}),e(this);case"value":if(void 0===a){if(!e(this).hasClass("miniColors"))return;var D=e(this),T=y(D.val());return T?"#"+f(T,D.data("letterCase")):null}return e(this).each(function(){e(this).hasClass("miniColors")&&(e(this).val(a).trigger("change"),p(e(this)))}),e(this);case"destroy":return e(this).each(function(){e(this).hasClass("miniColors")&&r(e(this))}),e(this);default:return t||(t={}),e(this).each(function(){"input"===e(this)[0].tagName.toLowerCase()&&(e(this).data("trigger")||i(e(this),t,a))}),e(this)}}})}(jQuery),document.addEventListener("load",color_picker_init,!1),jQuery(document).ajaxComplete(function(){color_picker_init()}),function(e,t){function a(){return new Date(Date.UTC.apply(Date,arguments))}function i(){var e=new Date;return a(e.getFullYear(),e.getMonth(),e.getDate())}function r(e){return function(){return this[e].apply(this,arguments)}}function n(t,a){function i(e,t){return t.toLowerCase()}var r,n=e(t).data(),o={},s=new RegExp("^"+a.toLowerCase()+"([A-Z])");a=new RegExp("^"+a.toLowerCase());for(var l in n)a.test(l)&&(r=l.replace(s,i),o[r]=n[l]);return o}function o(t){var a={};if(f[t]||(t=t.split("-")[0],f[t])){var i=f[t];return e.each(h,function(e,t){t in i&&(a[t]=i[t])}),a}}var s=e(window),l=function(){var t={get:function(e){return this.slice(e)[0]},contains:function(e){for(var t=e&&e.valueOf(),a=0,i=this.length;a<i;a++)if(this[a].valueOf()===t)return a;return-1},remove:function(e){this.splice(e,1)},replace:function(t){t&&(e.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t))},clear:function(){this.splice(0)},copy:function(){var e=new l;return e.replace(this),e}};return function(){var a=[];return a.push.apply(a,arguments),e.extend(a,t),a}}(),d=function(t,a){this.dates=new l,this.viewDate=i(),this.focusDate=null,this._process_options(a),this.element=e(t),this.isInline=!1,this.isInput=this.element.is("input"),this.component=!!this.element.is(".date")&&this.element.find(".add-on, .input-group-addon, .btn"),this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=e(g.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("cfdatepicker-inline").appendTo(this.element):this.picker.addClass("cfdatepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("cfdatepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(e,t){return parseInt(t)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};d.prototype={constructor:d,_process_options:function(t){this._o=e.extend({},this._o,t);var a=this.o=e.extend({},this._o),i=a.language;switch(f[i]||(i=i.split("-")[0],f[i]||(i=p.language)),a.language=i,a.startView){case 2:case"decade":a.startView=2;break;case 1:case"year":a.startView=1;break;default:a.startView=0}switch(a.minViewMode){case 1:case"months":a.minViewMode=1;break;case 2:case"years":a.minViewMode=2;break;default:a.minViewMode=0}a.startView=Math.max(a.startView,a.minViewMode),a.multidate!==!0&&(a.multidate=Number(a.multidate)||!1,a.multidate!==!1?a.multidate=Math.max(0,a.multidate):a.multidate=1),a.multidateSeparator=String(a.multidateSeparator),a.weekStart%=7,a.weekEnd=(a.weekStart+6)%7;var r=g.parseFormat(a.format);a.startDate!==-(1/0)&&(a.startDate?a.startDate instanceof Date?a.startDate=this._local_to_utc(this._zero_time(a.startDate)):a.startDate=g.parseDate(a.startDate,r,a.language):a.startDate=-(1/0)),a.endDate!==1/0&&(a.endDate?a.endDate instanceof Date?a.endDate=this._local_to_utc(this._zero_time(a.endDate)):a.endDate=g.parseDate(a.endDate,r,a.language):a.endDate=1/0),a.daysOfWeekDisabled=a.daysOfWeekDisabled||[],e.isArray(a.daysOfWeekDisabled)||(a.daysOfWeekDisabled=a.daysOfWeekDisabled.split(/[,\s]*/)),a.daysOfWeekDisabled=e.map(a.daysOfWeekDisabled,function(e){return parseInt(e,10)});var n=String(a.orientation).toLowerCase().split(/\s+/g),o=a.orientation.toLowerCase();if(n=e.grep(n,function(e){return/^auto|left|right|top|bottom$/.test(e)}),a.orientation={x:"auto",y:"auto"},o&&"auto"!==o)if(1===n.length)switch(n[0]){case"top":case"bottom":a.orientation.y=n[0];break;case"left":case"right":a.orientation.x=n[0]}else o=e.grep(n,function(e){return/^left|right$/.test(e)}),a.orientation.x=o[0]||"auto",o=e.grep(n,function(e){return/^top|bottom$/.test(e)}),a.orientation.y=o[0]||"auto";else;},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var a,i,r,n=0;n<e.length;n++)a=e[n][0],2===e[n].length?(i=t,r=e[n][1]):3===e[n].length&&(i=e[n][1],r=e[n][2]),a.on(r,i)},_unapplyEvents:function(e){for(var a,i,r,n=0;n<e.length;n++)a=e[n][0],2===e[n].length?(r=t,i=e[n][1]):3===e[n].length&&(r=e[n][1],i=e[n][2]),a.off(i,r)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(function(t){e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:e.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(function(t){e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:e.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:e.proxy(function(e){this._focused_from=e.target},this)}]),this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{"mousedown touchstart":e.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,a){var i=a||this.dates.get(-1),r=this._utc_to_local(i);this.element.trigger({type:t,date:r,dates:e.map(this.dates,this._utc_to_local),format:e.proxy(function(e,t){0===arguments.length?(e=this.dates.length-1,t=this.o.format):"string"==typeof e&&(t=e,e=this.dates.length-1),t=t||this.o.format;var a=this.dates.get(e);return g.formatDate(a,t,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.place(),this._attachSecondaryEvents(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().cfdatepicker,this.isInput||delete this.element.data().date},_utc_to_local:function(e){return e&&new Date(e.getTime()+6e4*e.getTimezoneOffset())},_local_to_utc:function(e){return e&&new Date(e.getTime()-6e4*e.getTimezoneOffset())},_zero_time:function(e){return e&&new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return e&&new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()))},getDates:function(){return e.map(this.dates,this._utc_to_local)},getUTCDates:function(){return e.map(this.dates,function(e){return new Date(e)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,t),this._trigger("changeDate"),this.setValue()},setUTCDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,e.map(t,this._utc_to_local)),this._trigger("changeDate"),this.setValue()},setDate:r("setDates"),setUTCDate:r("setUTCDates"),setValue:function(){var e=this.getFormattedDate();this.isInput?this.element.val(e).change():this.component&&this.element.find("input").val(e).change()},getFormattedDate:function(a){a===t&&(a=this.o.format);var i=this.o.language;return e.map(this.dates,function(e){return g.formatDate(e,a,i)}).join(this.o.multidateSeparator)},setStartDate:function(e){this._process_options({startDate:e}),this.update(),this.updateNavArrows()},setEndDate:function(e){this._process_options({endDate:e}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this._process_options({daysOfWeekDisabled:e}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var t,a=this.picker.outerWidth(),i=this.picker.outerHeight(),r=10,n=s.width(),o=s.height(),l=s.scrollTop(),d=jQuery(this.element).data("form-id"),c=document.getElementById("modal-"+d+"-content");
t=null!==c?1e4:parseInt(this.element.parents().filter(function(){return"auto"!==e(this).css("z-index")}).first().css("z-index"))+10;var u=this.component?this.component.parent().offset():this.element.offset(),p=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),h=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),f=u.left,g=u.top;this.picker.removeClass("cfdatepicker-orient-top cfdatepicker-orient-bottom cfdatepicker-orient-right cfdatepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("cfdatepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(f-=a-h)):(this.picker.addClass("cfdatepicker-orient-left"),u.left<0?f-=u.left-r:u.left+a>n&&(f=n-a-r));var v,m,y=this.o.orientation.y;"auto"===y&&(v=-l+u.top-i,m=l+o-(u.top+p+i),y=Math.max(v,m)===m?"top":"bottom"),this.picker.addClass("cfdatepicker-orient-"+y),"top"===y?g+=p:g-=i+parseInt(this.picker.css("padding-top")),this.picker.css({top:g,left:f,zIndex:t})}},_allow_update:!0,update:function(){if(this._allow_update){var t=this.dates.copy(),a=[],i=!1;arguments.length?(e.each(arguments,e.proxy(function(e,t){t instanceof Date&&(t=this._local_to_utc(t)),a.push(t)},this)),i=!0):(a=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),a=a&&this.o.multidate?a.split(this.o.multidateSeparator):[a],delete this.element.data().date),a=e.map(a,e.proxy(function(e){return g.parseDate(e,this.o.format,this.o.language)},this)),a=e.grep(a,e.proxy(function(e){return e<this.o.startDate||e>this.o.endDate||!e},this),!0),this.dates.replace(a),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),i?this.setValue():a.length&&String(t)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&t.length&&this._trigger("clearDate"),this.fill()}},fillDow:function(){var e=this.o.weekStart,t="<tr>";if(this.o.calendarWeeks){var a='<th class="cw">&nbsp;</th>';t+=a,this.picker.find(".cfdatepicker-days thead tr:first-child").prepend(a)}for(;e<this.o.weekStart+7;)t+='<th class="dow">'+f[this.o.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".cfdatepicker-days thead").append(t)},fillMonths:function(){for(var e="",t=0;t<12;)e+='<span class="month">'+f[this.o.language].monthsShort[t++]+"</span>";this.picker.find(".cfdatepicker-months td").html(e)},setRange:function(t){t&&t.length?this.range=e.map(t,function(e){return e.valueOf()}):delete this.range,this.fill()},getClassNames:function(t){var a=[],i=this.viewDate.getUTCFullYear(),r=this.viewDate.getUTCMonth(),n=new Date;return t.getUTCFullYear()<i||t.getUTCFullYear()===i&&t.getUTCMonth()<r?a.push("old"):(t.getUTCFullYear()>i||t.getUTCFullYear()===i&&t.getUTCMonth()>r)&&a.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&a.push("focused"),this.o.todayHighlight&&t.getUTCFullYear()===n.getFullYear()&&t.getUTCMonth()===n.getMonth()&&t.getUTCDate()===n.getDate()&&a.push("today"),this.dates.contains(t)!==-1&&a.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)!==-1)&&a.push("disabled"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&a.push("range"),e.inArray(t.valueOf(),this.range)!==-1&&a.push("selected")),a},fill:function(){var i,r=new Date(this.viewDate),n=r.getUTCFullYear(),o=r.getUTCMonth(),s=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),l=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),d=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,c=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,u=f[this.o.language].today||f.en.today||"",p=f[this.o.language].clear||f.en.clear||"";this.picker.find(".cfdatepicker-days thead th.cfdatepicker-switch").text(f[this.o.language].months[o]+" "+n),this.picker.find("tfoot th.today").text(u).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(p).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var h=a(n,o-1,28),v=g.getDaysInMonth(h.getUTCFullYear(),h.getUTCMonth());h.setUTCDate(v),h.setUTCDate(v-(h.getUTCDay()-this.o.weekStart+7)%7);var m=new Date(h);m.setUTCDate(m.getUTCDate()+42),m=m.valueOf();for(var y,_=[];h.valueOf()<m;){if(h.getUTCDay()===this.o.weekStart&&(_.push("<tr>"),this.o.calendarWeeks)){var k=new Date(+h+(this.o.weekStart-h.getUTCDay()-7)%7*864e5),b=new Date(Number(k)+(11-k.getUTCDay())%7*864e5),w=new Date(Number(w=a(b.getUTCFullYear(),0,1))+(11-w.getUTCDay())%7*864e5),C=(b-w)/864e5/7+1;_.push('<td class="cw">'+C+"</td>")}if(y=this.getClassNames(h),y.push("day"),this.o.beforeShowDay!==e.noop){var x=this.o.beforeShowDay(this._utc_to_local(h));x===t?x={}:"boolean"==typeof x?x={enabled:x}:"string"==typeof x&&(x={classes:x}),x.enabled===!1&&y.push("disabled"),x.classes&&(y=y.concat(x.classes.split(/\s+/))),x.tooltip&&(i=x.tooltip)}y=e.unique(y),_.push('<td class="'+y.join(" ")+'"'+(i?' title="'+i+'"':"")+">"+h.getUTCDate()+"</td>"),h.getUTCDay()===this.o.weekEnd&&_.push("</tr>"),h.setUTCDate(h.getUTCDate()+1)}this.picker.find(".cfdatepicker-days tbody").empty().append(_.join(""));var D=this.picker.find(".cfdatepicker-months").find("th:eq(1)").text(n).end().find("span").removeClass("active");e.each(this.dates,function(e,t){t.getUTCFullYear()===n&&D.eq(t.getUTCMonth()).addClass("active")}),(n<s||n>d)&&D.addClass("disabled"),n===s&&D.slice(0,l).addClass("disabled"),n===d&&D.slice(c+1).addClass("disabled"),_="",n=10*parseInt(n/10,10);var T=this.picker.find(".cfdatepicker-years").find("th:eq(1)").text(n+"-"+(n+9)).end().find("td");n-=1;for(var S,M=e.map(this.dates,function(e){return e.getUTCFullYear()}),j=-1;j<11;j++)S=["year"],j===-1?S.push("old"):10===j&&S.push("new"),e.inArray(n,M)!==-1&&S.push("active"),(n<s||n>d)&&S.push("disabled"),_+='<span class="'+S.join(" ")+'">'+n+"</span>",n+=1;T.html(_)},updateNavArrows:function(){if(this._allow_update){var e=new Date(this.viewDate),t=e.getUTCFullYear(),a=e.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-(1/0)&&t<=this.o.startDate.getUTCFullYear()&&a<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&t>=this.o.endDate.getUTCFullYear()&&a>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-(1/0)&&t<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&t>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(t){t.preventDefault();var i,r,n,o=e(t.target).closest("span, td, th");if(1===o.length)switch(o[0].nodeName.toLowerCase()){case"th":switch(o[0].className){case"cfdatepicker-switch":this.showMode(1);break;case"prev":case"next":var s=g.modes[this.viewMode].navStep*("prev"===o[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,s),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,s),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var l=new Date;l=a(l.getFullYear(),l.getMonth(),l.getDate(),0,0,0),this.showMode(-2);var d="linked"===this.o.todayBtn?null:"view";this._setDate(l,d);break;case"clear":var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input")),c&&c.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()}break;case"span":o.is(".disabled")||(this.viewDate.setUTCDate(1),o.is(".month")?(n=1,r=o.parent().find("span").index(o),i=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(r),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(a(i,r,n))):(n=1,r=0,i=parseInt(o.text(),10)||0,this.viewDate.setUTCFullYear(i),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(a(i,r,n))),this.showMode(-1),this.fill());break;case"td":o.is(".day")&&!o.is(".disabled")&&(n=parseInt(o.text(),10)||1,i=this.viewDate.getUTCFullYear(),r=this.viewDate.getUTCMonth(),o.is(".old")?0===r?(r=11,i-=1):r-=1:o.is(".new")&&(11===r?(r=0,i+=1):r+=1),this._setDate(a(i,r,n)))}this.picker.is(":visible")&&this._focused_from&&e(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(e){var t=this.dates.contains(e);if(e?t!==-1?this.dates.remove(t):this.dates.push(e):this.dates.clear(),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(e,t){t&&"date"!==t||this._toggle_multidate(e&&new Date(e)),t&&"view"!==t||(this.viewDate=e&&new Date(e)),this.fill(),this.setValue(),this._trigger("changeDate");var a;this.isInput?a=this.element:this.component&&(a=this.element.find("input")),a&&a.change(),!this.o.autoclose||t&&"date"!==t||this.hide()},moveMonth:function(e,a){if(!e)return t;if(!a)return e;var i,r,n=new Date(e.valueOf()),o=n.getUTCDate(),s=n.getUTCMonth(),l=Math.abs(a);if(a=a>0?1:-1,1===l)r=a===-1?function(){return n.getUTCMonth()===s}:function(){return n.getUTCMonth()!==i},i=s+a,n.setUTCMonth(i),(i<0||i>11)&&(i=(i+12)%12);else{for(var d=0;d<l;d++)n=this.moveMonth(n,a);i=n.getUTCMonth(),n.setUTCDate(o),r=function(){return i!==n.getUTCMonth()}}for(;r();)n.setUTCDate(--o),n.setUTCMonth(i);return n},moveYear:function(e,t){return this.moveMonth(e,12*t)},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(this.picker.is(":not(:visible)"))return void(27===e.keyCode&&this.show());var t,a,r,n=!1,o=this.focusDate||this.viewDate;switch(e.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;t=37===e.keyCode?-1:1,e.ctrlKey?(a=this.moveYear(this.dates.get(-1)||i(),t),r=this.moveYear(o,t),this._trigger("changeYear",this.viewDate)):e.shiftKey?(a=this.moveMonth(this.dates.get(-1)||i(),t),r=this.moveMonth(o,t),this._trigger("changeMonth",this.viewDate)):(a=new Date(this.dates.get(-1)||i()),a.setUTCDate(a.getUTCDate()+t),r=new Date(o),r.setUTCDate(o.getUTCDate()+t)),this.dateWithinRange(a)&&(this.focusDate=this.viewDate=r,this.setValue(),this.fill(),e.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;t=38===e.keyCode?-1:1,e.ctrlKey?(a=this.moveYear(this.dates.get(-1)||i(),t),r=this.moveYear(o,t),this._trigger("changeYear",this.viewDate)):e.shiftKey?(a=this.moveMonth(this.dates.get(-1)||i(),t),r=this.moveMonth(o,t),this._trigger("changeMonth",this.viewDate)):(a=new Date(this.dates.get(-1)||i()),a.setUTCDate(a.getUTCDate()+7*t),r=new Date(o),r.setUTCDate(o.getUTCDate()+7*t)),this.dateWithinRange(a)&&(this.focusDate=this.viewDate=r,this.setValue(),this.fill(),e.preventDefault());break;case 32:break;case 13:o=this.focusDate||this.dates.get(-1)||this.viewDate,this._toggle_multidate(o),n=!0,this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(e.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(n){this.dates.length?this._trigger("changeDate"):this._trigger("clearDate");var s;this.isInput?s=this.element:this.component&&(s=this.element.find("input")),s&&s.change()}},showMode:function(e){e&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+e))),this.picker.find(">div").hide().filter(".cfdatepicker-"+g.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var c=function(t,a){this.element=e(t),this.inputs=e.map(a.inputs,function(e){return e.jquery?e[0]:e}),delete a.inputs,e(this.inputs).cfdatepicker(a).bind("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(t){return e(t).data("cfdatepicker")}),this.updateDates()};c.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.getUTCDate()}),this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,a){a.setRange(t)})},dateUpdated:function(t){if(!this.updating){this.updating=!0;var a=e(t.target).data("cfdatepicker"),i=a.getUTCDate(),r=e.inArray(t.target,this.inputs),n=this.inputs.length;if(r!==-1){if(e.each(this.pickers,function(e,t){t.getUTCDate()||t.setUTCDate(i)}),i<this.dates[r])for(;r>=0&&i<this.dates[r];)this.pickers[r--].setUTCDate(i);else if(i>this.dates[r])for(;r<n&&i>this.dates[r];)this.pickers[r++].setUTCDate(i);this.updateDates(),delete this.updating}}},remove:function(){e.map(this.pickers,function(e){e.remove()}),delete this.element.data().cfdatepicker}};var u=e.fn.cfdatepicker;e.fn.cfdatepicker=function(a){var i=Array.apply(null,arguments);i.shift();var r;return this.each(function(){var s=e(this),l=s.data("cfdatepicker"),u="object"==typeof a&&a;if(!l){var h=n(this,"date"),f=e.extend({},p,h,u),g=o(f.language),v=e.extend({},p,g,h,u);if(s.is(".input-daterange")||v.inputs){var m={inputs:v.inputs||s.find("input").toArray()};s.data("cfdatepicker",l=new c(this,e.extend(v,m)))}else s.data("cfdatepicker",l=new d(this,v))}if("string"==typeof a&&"function"==typeof l[a]&&(r=l[a].apply(l,i),r!==t))return!1}),r!==t?r:this};var p=e.fn.cfdatepicker.defaults={autoclose:!1,beforeShowDay:e.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},h=e.fn.cfdatepicker.locale_opts=["format","rtl","weekStart"];e.fn.cfdatepicker.Constructor=d;var f=e.fn.cfdatepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},g={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,g.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(e){var t=e.replace(this.validParts,"\0").split("\0"),a=e.match(this.validParts);if(!t||!t.length||!a||0===a.length)throw new Error("Invalid date format.");return{separators:t,parts:a}},parseDate:function(i,r,n){function o(){var e=this.slice(0,p[c].length),t=p[c].slice(0,e.length);return e===t}if(!i)return t;if(i instanceof Date)return i;"string"==typeof r&&(r=g.parseFormat(r));var s,l,c,u=/([\-+]\d+)([dmwy])/,p=i.match(/([\-+]\d+)([dmwy])/g);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(i)){for(i=new Date,c=0;c<p.length;c++)switch(s=u.exec(p[c]),l=parseInt(s[1]),s[2]){case"d":i.setUTCDate(i.getUTCDate()+l);break;case"m":i=d.prototype.moveMonth.call(d.prototype,i,l);break;case"w":i.setUTCDate(i.getUTCDate()+7*l);break;case"y":i=d.prototype.moveYear.call(d.prototype,i,l)}return a(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),0,0,0)}p=i&&i.match(this.nonpunctuation)||[],i=new Date;var h,v,m={},y=["yyyy","yy","M","MM","m","mm","d","dd"],_={yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){if(isNaN(e))return e;for(t-=1;t<0;)t+=12;for(t%=12,e.setUTCMonth(t);e.getUTCMonth()!==t;)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}};_.M=_.MM=_.mm=_.m,_.dd=_.d,i=a(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);var k=r.parts.slice();if(p.length!==k.length&&(k=e(k).filter(function(t,a){return e.inArray(a,y)!==-1}).toArray()),p.length===k.length){var b;for(c=0,b=k.length;c<b;c++){if(h=parseInt(p[c],10),s=k[c],isNaN(h))switch(s){case"MM":v=e(f[n].months).filter(o),h=e.inArray(v[0],f[n].months)+1;break;case"M":v=e(f[n].monthsShort).filter(o),h=e.inArray(v[0],f[n].monthsShort)+1}m[s]=h}var w,C;for(c=0;c<y.length;c++)C=y[c],C in m&&!isNaN(m[C])&&(w=new Date(i),_[C](w,m[C]),isNaN(w)||(i=w))}return i},formatDate:function(t,a,i){if(!t)return"";"string"==typeof a&&(a=g.parseFormat(a));var r={d:t.getUTCDate(),D:f[i].daysShort[t.getUTCDay()],DD:f[i].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:f[i].monthsShort[t.getUTCMonth()],MM:f[i].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};r.dd=(r.d<10?"0":"")+r.d,r.mm=(r.m<10?"0":"")+r.m,t=[];for(var n=e.extend([],a.separators),o=0,s=a.parts.length;o<=s;o++)n.length&&t.push(n.shift()),t.push(r[a.parts[o]]);return t.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="cfdatepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};g.template='<div class="cfdatepicker"><div class="cfdatepicker-days"><table class=" table-condensed">'+g.headTemplate+"<tbody></tbody>"+g.footTemplate+'</table></div><div class="cfdatepicker-months"><table class="table-condensed">'+g.headTemplate+g.contTemplate+g.footTemplate+'</table></div><div class="cfdatepicker-years"><table class="table-condensed">'+g.headTemplate+g.contTemplate+g.footTemplate+"</table></div></div>",e.fn.cfdatepicker.DPGlobal=g,e.fn.cfdatepicker.noConflict=function(){return e.fn.cfdatepicker=u,this},e(document).on("focus.cfdatepicker.data-api click.cfdatepicker.data-api",'[data-provide="cfdatepicker"]',function(t){var a=e(this);a.data("cfdatepicker")||(t.preventDefault(),a.cfdatepicker("show").on("show",function(){e(this).trigger("blur")}).on("hide",function(){e(this).attr("disabled",!1)}))})}(window.jQuery),!function(e){function t(e){var t=document.createElement("input"),a="on"+e,i=a in t;return i||(t.setAttribute(a,"return;"),i="function"==typeof t[a]),t=null,i}function a(e){var t="text"==e||"tel"==e;if(!t){var a=document.createElement("input");a.setAttribute("type",e),t="text"===a.type,a=null}return t}function i(t,a,r){var n=r.aliases[t];return!!n&&(n.alias&&i(n.alias,void 0,r),e.extend(!0,r,n),e.extend(!0,r,a),!0)}function r(t,a){function i(e){function a(e,t,a,i){this.matches=[],this.isGroup=e||!1,this.isOptional=t||!1,this.isQuantifier=a||!1,this.isAlternator=i||!1,this.quantifier={min:1,max:1}}function i(e,a,i){var r=t.definitions[a],n=0==e.matches.length;if(i=void 0!=i?i:e.matches.length,r&&!u){for(var o=r.prevalidator,s=o?o.length:0,l=1;l<r.cardinality;l++){var d=s>=l?o[l-1]:[],c=d.validator,p=d.cardinality;e.matches.splice(i++,0,{fn:c?"string"==typeof c?new RegExp(c):new function(){this.test=c}:new RegExp("."),cardinality:p?p:1,optionality:e.isOptional,newBlockMarker:n,casing:r.casing,def:r.definitionSymbol||a,placeholder:r.placeholder,mask:a})}e.matches.splice(i++,0,{fn:r.validator?"string"==typeof r.validator?new RegExp(r.validator):new function(){this.test=r.validator}:new RegExp("."),cardinality:r.cardinality,optionality:e.isOptional,newBlockMarker:n,casing:r.casing,def:r.definitionSymbol||a,placeholder:r.placeholder,mask:a})}else e.matches.splice(i++,0,{fn:null,cardinality:0,optionality:e.isOptional,newBlockMarker:n,casing:null,def:a,placeholder:void 0,mask:a}),u=!1}for(var r,n,o,s,l,d,c=/(?:[?*+]|\{[0-9\+\*]+(?:,[0-9\+\*]*)?\})\??|[^.?*+^${[]()|\\]+|./g,u=!1,p=new a,h=[],f=[];r=c.exec(e);)switch(n=r[0],n.charAt(0)){case t.optionalmarker.end:case t.groupmarker.end:if(o=h.pop(),h.length>0){if(s=h[h.length-1],s.matches.push(o),s.isAlternator){l=h.pop();for(var g=0;g<l.matches.length;g++)l.matches[g].isGroup=!1;h.length>0?(s=h[h.length-1],s.matches.push(l)):p.matches.push(l)}}else p.matches.push(o);break;case t.optionalmarker.start:h.push(new a((!1),(!0)));break;case t.groupmarker.start:h.push(new a((!0)));break;case t.quantifiermarker.start:var v=new a((!1),(!1),(!0));n=n.replace(/[{}]/g,"");var m=n.split(","),y=isNaN(m[0])?m[0]:parseInt(m[0]),_=1==m.length?y:isNaN(m[1])?m[1]:parseInt(m[1]);if(("*"==_||"+"==_)&&(y="*"==_?0:1),v.quantifier={min:y,max:_},h.length>0){var k=h[h.length-1].matches;if(r=k.pop(),!r.isGroup){var b=new a((!0));b.matches.push(r),r=b}k.push(r),k.push(v)}else{if(r=p.matches.pop(),!r.isGroup){var b=new a((!0));b.matches.push(r),r=b}p.matches.push(r),p.matches.push(v)}break;case t.escapeChar:u=!0;break;case t.alternatormarker:h.length>0?(s=h[h.length-1],d=s.matches.pop()):d=p.matches.pop(),d.isAlternator?h.push(d):(l=new a((!1),(!1),(!1),(!0)),l.matches.push(d),h.push(l));break;default:if(h.length>0){if(s=h[h.length-1],s.matches.length>0&&(d=s.matches[s.matches.length-1],d.isGroup&&(d.isGroup=!1,i(d,t.groupmarker.start,0),i(d,t.groupmarker.end))),i(s,n),s.isAlternator){l=h.pop();for(var g=0;g<l.matches.length;g++)l.matches[g].isGroup=!1;h.length>0?(s=h[h.length-1],s.matches.push(l)):p.matches.push(l)}}else p.matches.length>0&&(d=p.matches[p.matches.length-1],d.isGroup&&(d.isGroup=!1,i(d,t.groupmarker.start,0),i(d,t.groupmarker.end))),i(p,n)}return p.matches.length>0&&(d=p.matches[p.matches.length-1],d.isGroup&&(d.isGroup=!1,i(d,t.groupmarker.start,0),i(d,t.groupmarker.end)),f.push(p)),f}function r(a,r){if(t.numericInput&&t.multi!==!0){a=a.split("").reverse();for(var n=0;n<a.length;n++)a[n]==t.optionalmarker.start?a[n]=t.optionalmarker.end:a[n]==t.optionalmarker.end?a[n]=t.optionalmarker.start:a[n]==t.groupmarker.start?a[n]=t.groupmarker.end:a[n]==t.groupmarker.end&&(a[n]=t.groupmarker.start);a=a.join("")}if(void 0!=a&&""!=a){if(1==a.length&&0==t.greedy&&0!=t.repeat&&(t.placeholder=""),t.repeat>0||"*"==t.repeat||"+"==t.repeat){var o="*"==t.repeat?0:"+"==t.repeat?1:t.repeat;a=t.groupmarker.start+a+t.groupmarker.end+t.quantifiermarker.start+o+","+t.repeat+t.quantifiermarker.end}return void 0==e.inputmask.masksCache[a]&&(e.inputmask.masksCache[a]={mask:a,maskToken:i(a),validPositions:{},_buffer:void 0,buffer:void 0,tests:{},metadata:r}),e.extend(!0,{},e.inputmask.masksCache[a])}}var n=void 0;if(e.isFunction(t.mask)&&(t.mask=t.mask.call(this,t)),e.isArray(t.mask))if(a)n=[],e.each(t.mask,function(t,a){n.push(void 0==a.mask||e.isFunction(a.mask)?r(a.toString(),a):r(a.mask.toString(),a))});else{t.keepStatic=void 0==t.keepStatic||t.keepStatic;var o="(";e.each(t.mask,function(t,a){o.length>1&&(o+=")|("),o+=void 0==a.mask||e.isFunction(a.mask)?a.toString():a.mask.toString()}),o+=")",n=r(o,t.mask)}else t.mask&&(n=void 0==t.mask.mask||e.isFunction(t.mask.mask)?r(t.mask.toString(),t.mask):r(t.mask.mask.toString(),t.mask));return n}function n(i,r,n){function s(e,t,a){t=t||0;var i,r,n,o=[],s=0;do{if(e===!0&&f().validPositions[s]){var l=f().validPositions[s];r=l.match,i=l.locator.slice(),o.push(a===!0?l.input:F(s,r))}else{if(t>s){var d=w(s,i,s-1);n=d[0]}else n=_(s,i,s-1);r=n.match,i=n.locator.slice(),o.push(F(s,r))}s++}while((void 0==ne||ne>s-1)&&null!=r.fn||null==r.fn&&""!=r.def||t>=s);return o.pop(),o}function f(){return r}function g(e){var t=f();t.buffer=void 0,t.tests={},e!==!0&&(t._buffer=void 0,t.validPositions={},t.p=0)}function v(e){var t=f(),a=-1,i=t.validPositions;void 0==e&&(e=-1);var r=a,n=a;for(var o in i){var s=parseInt(o);(-1==e||null!=i[s].match.fn)&&(e>s&&(r=s),s>=e&&(n=s))}return a=e-r>1||e>n?r:n}function m(t,a,i){if(n.insertMode&&void 0!=f().validPositions[t]&&void 0==i){var r,o=e.extend(!0,{},f().validPositions),s=v();for(r=t;s>=r;r++)delete f().validPositions[r];f().validPositions[t]=a;var l,d=!0;for(r=t;s>=r;r++){var c=o[r];if(void 0!=c){var u=f().validPositions;l=!n.keepStatic&&(void 0!=u[r+1]&&w(r+1,u[r].locator.slice(),r).length>1||u[r]&&void 0!=u[r].alternation)?r+1:P(r),d=b(l,c.match.def)?d&&S(l,c.input,!0,!0)!==!1:null==c.match.fn}if(!d)break}if(!d)return f().validPositions=e.extend(!0,{},o),!1}else f().validPositions[t]=a;return!0}function y(e,t){var a,i=e;for(void 0!=f().validPositions[e]&&f().validPositions[e].input==n.radixPoint&&(t++,i++),a=i;t>a;a++)void 0==f().validPositions[a]||f().validPositions[a].input==n.radixPoint&&a!=v()||delete f().validPositions[a];for(a=t;a<=v();){var r=f().validPositions[a],o=f().validPositions[i];void 0!=r&&void 0==o?(b(i,r.match.def)&&S(i,r.input,!0)!==!1&&(delete f().validPositions[a],a++),i++):a++}var s=v();s>=e&&void 0!=f().validPositions[s]&&f().validPositions[s].input==n.radixPoint&&delete f().validPositions[s],g(!0)}function _(t,a,i){function r(t,a,i){for(var r=!1,n=t.locator[a].toString().split(","),o=0;o<n.length;o++)if(-1!=e.inArray(n[o],i)){r=!0;break}return r}for(var o,s=w(t,a,i),l=v(),d=f().validPositions[l]||w(0)[0],c=void 0!=d.alternation?d.locator[d.alternation].split(","):[],u=0;u<s.length&&(o=s[u],!(n.greedy||o.match&&(o.match.optionality===!1||o.match.newBlockMarker===!1)&&o.match.optionalQuantifier!==!0&&(void 0==d.alternation||void 0!=o.locator[d.alternation]&&r(o,d.alternation,c))));u++);return o}function k(e){return f().validPositions[e]?f().validPositions[e].match:w(e)[0].match}function b(e,t){for(var a=!1,i=w(e),r=0;r<i.length;r++)if(i[r].match&&i[r].match.def==t){a=!0;break}return a}function w(t,a,i){function r(a,i,o,l){function u(o,l,h){if(s>1e4)return alert("jquery.inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. "+f().mask),!0;if(s==t&&void 0==o.matches)return d.push({match:o,locator:l.reverse()}),!0;if(void 0!=o.matches){if(o.isGroup&&h!==!0){if(o=u(a.matches[p+1],l))return!0}else if(o.isOptional){var g=o;if(o=r(o,i,l,h)){var v=d[d.length-1].match,m=0==e.inArray(v,g.matches);m&&(c=!0),s=t}}else if(o.isAlternator){var y,_=o,k=[],b=d.slice(),w=l.length,C=i.length>0?i.shift():-1;if(-1==C||"string"==typeof C){var x,D=s,T=i.slice();"string"==typeof C&&(x=C.split(","));for(var S=0;S<_.matches.length;S++){d=[],o=u(_.matches[S],[S].concat(l),h)||o,y=d.slice(),s=D,d=[];for(var M=0;M<T.length;M++)i[M]=T[M];for(var j=0;j<y.length;j++)for(var P=y[j],E=0;E<k.length;E++){var A=k[E];if(P.match.mask==A.match.mask&&("string"!=typeof C||-1!=e.inArray(P.locator[w].toString(),x))){y.splice(j,1),A.locator[w]=A.locator[w]+","+P.locator[w],A.alternation=w;break}}k=k.concat(y)}"string"==typeof C&&(k=e.map(k,function(t,a){if(isFinite(a)){var i,r=t.locator[w].toString().split(",");t.locator[w]=void 0,t.alternation=void 0;for(var n=0;n<r.length;n++)i=-1!=e.inArray(r[n],x),i&&(void 0!=t.locator[w]?(t.locator[w]+=",",t.alternation=w,t.locator[w]+=r[n]):t.locator[w]=parseInt(r[n]));if(void 0!=t.locator[w])return t}})),d=b.concat(k),c=!0}else o=u(_.matches[C],[C].concat(l),h);if(o)return!0}else if(o.isQuantifier&&h!==!0){var O=o;n.greedy=n.greedy&&isFinite(O.quantifier.max);for(var F=i.length>0&&h!==!0?i.shift():0;F<(isNaN(O.quantifier.max)?F+1:O.quantifier.max)&&t>=s;F++){var U=a.matches[e.inArray(O,a.matches)-1];if(o=u(U,[F].concat(l),!0)){var v=d[d.length-1].match;v.optionalQuantifier=F>O.quantifier.min-1;var m=0==e.inArray(v,U.matches);if(m){if(F>O.quantifier.min-1){c=!0,s=t;break}return!0}return!0}}}else if(o=r(o,i,l,h))return!0}else s++}for(var p=i.length>0?i.shift():0;p<a.matches.length;p++)if(a.matches[p].isQuantifier!==!0){var h=u(a.matches[p],[p].concat(o),l);if(h&&s==t)return h;if(s>t)break}}var o=f().maskToken,s=a?i:0,l=a||[0],d=[],c=!1;if(void 0==a){for(var u,p=t-1;void 0==(u=f().validPositions[p])&&p>-1;)p--;if(void 0!=u&&p>-1)s=p,l=u.locator.slice();else{for(p=t-1;void 0==(u=f().tests[p])&&p>-1;)p--;void 0!=u&&p>-1&&(s=p,l=u[0].locator.slice())}}for(var h=l.shift();h<o.length;h++){var g=r(o[h],l,[h]);if(g&&s==t||s>t)break}return(0==d.length||c)&&d.push({match:{fn:null,cardinality:0,optionality:!0,casing:null,def:""},locator:[]}),f().tests[t]=e.extend(!0,[],d),f().tests[t]}function C(){return void 0==f()._buffer&&(f()._buffer=s(!1,1)),f()._buffer}function x(){return void 0==f().buffer&&(f().buffer=s(!0,v(),!0)),f().buffer}function D(e,t){var a=x().slice();if(e===!0)g(),e=0,t=a.length;else for(var i=e;t>i;i++)delete f().validPositions[i],delete f().tests[i];for(var i=e;t>i;i++)a[i]!=n.skipOptionalPartCharacter&&S(i,a[i],!0,!0)}function T(e,t){switch(t.casing){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e}function S(t,a,i,r){function o(t,a,i,r){var o=!1;return e.each(w(t),function(s,l){for(var d=l.match,c=a?1:0,u="",p=(x(),d.cardinality);p>c;p--)u+=A(t-(p-1));if(a&&(u+=a),o=null!=d.fn?d.fn.test(u,f(),t,i,n):(a==d.def||a==n.skipOptionalPartCharacter)&&""!=d.def&&{c:d.def,pos:t},o!==!1){var h=void 0!=o.c?o.c:a;h=h==n.skipOptionalPartCharacter&&null===d.fn?d.def:h;var _=t;if(void 0!=o.remove&&y(o.remove,o.remove+1),o.refreshFromBuffer){var k=o.refreshFromBuffer;if(i=!0,D(k===!0?k:k.start,k.end),void 0==o.pos&&void 0==o.c)return o.pos=v(),!1;if(_=void 0!=o.pos?o.pos:t,_!=t)return o=e.extend(o,S(_,h,!0)),!1}else if(o!==!0&&void 0!=o.pos&&o.pos!=t&&(_=o.pos,D(t,_),_!=t))return o=e.extend(o,S(_,h,!0)),!1;return(1==o||void 0!=o.pos||void 0!=o.c)&&(s>0&&g(!0),m(_,e.extend({},l,{input:T(h,d)}),r)||(o=!1),!1)}}),o}function s(t,a,i,r){var o,s,l=e.extend(!0,{},f().validPositions);for(o=v();o>=0;o--)if(f().validPositions[o]&&void 0!=f().validPositions[o].alternation){s=f().validPositions[o].alternation;break}if(void 0!=s)for(var d in f().validPositions)if(parseInt(d)>parseInt(o)&&void 0===f().validPositions[d].alternation){for(var c=f().validPositions[d],u=c.locator[s],p=f().validPositions[o].locator[s].split(","),h=0;h<p.length;h++)if(u<p[h]){for(var m,y,_=d-1;_>=0;_--)if(m=f().validPositions[_],void 0!=m){y=m.locator[s],m.locator[s]=p[h];break}if(u!=m.locator[s]){for(var k=x().slice(),b=d;b<v()+1;b++)delete f().validPositions[b],delete f().tests[b];g(!0),n.keepStatic=!n.keepStatic;for(var b=d;b<k.length;b++)k[b]!=n.skipOptionalPartCharacter&&S(v()+1,k[b],!1,!0);m.locator[s]=y;var w=S(t,a,i,r);if(n.keepStatic=!n.keepStatic,w)return w;g(),f().validPositions=e.extend(!0,{},l)}}break}return!1}i=i===!0;for(var l=x(),d=t-1;d>-1&&(!f().validPositions[d]||null!=f().validPositions[d].match.fn);d--)void 0==f().validPositions[d]&&(!M(d)||l[d]!=F(d))&&w(d).length>1&&o(d,l[d],!0);var c=t,u=!1;if(r&&c>=j()&&g(!0),c<j()&&(u=o(c,a,i,r),!i&&u===!1)){var p=f().validPositions[c];if(!p||null!=p.match.fn||p.match.def!=a&&a!=n.skipOptionalPartCharacter){if((n.insertMode||void 0==f().validPositions[P(c)])&&!M(c))for(var h=c+1,_=P(c);_>=h;h++)if(u=o(h,a,i,r),u!==!1){c=h;break}}else u={caret:P(c)}}return u===!1&&n.keepStatic&&L(l)&&(u=s(t,a,i,r)),u===!0&&(u={pos:c}),u}function M(e){var t=k(e);return null!=t.fn&&t.fn}function j(){var e;if(ne=re.prop("maxLength"),-1==ne&&(ne=void 0),0==n.greedy){var t,a=v(),i=f().validPositions[a],r=void 0!=i?i.locator.slice():void 0;for(t=a+1;void 0==i||null!=i.match.fn||null==i.match.fn&&""!=i.match.def;t++)i=_(t,r,t-1),r=i.locator.slice();e=t}else e=x().length;return void 0==ne||ne>e?e:ne}function P(e){var t=j();if(e>=t)return t;for(var a=e;++a<t&&!M(a)&&(n.nojumps!==!0||n.nojumpsThreshold>a););return a}function E(e){var t=e;if(0>=t)return 0;for(;--t>0&&!M(t););return t}function A(e){return void 0==f().validPositions[e]?F(e):f().validPositions[e].input}function O(e,t,a){e._valueSet(t.join("")),void 0!=a&&Q(e,a)}function F(t,a){a=a||k(t);var i=e.isFunction(a.placeholder)?a.placeholder.call(this,n):a.placeholder;return void 0!=i?i:null==a.fn?a.def:n.placeholder.charAt(t%n.placeholder.length)}function U(t,a,i,r,o){var s=void 0!=r?r.slice():R(t._valueGet()).split("");if(g(),a&&t._valueSet(""),
e.each(s,function(a,r){if(o===!0){var n=v(),s=-1==n?a:P(n);-1==e.inArray(r,C().slice(n+1,s))&&V.call(t,void 0,!0,r.charCodeAt(0),!1,i,i?a:f().p)}else V.call(t,void 0,!0,r.charCodeAt(0),!1,i,i?a:f().p),i=i||a>0&&a>f().p}),a){var l=n.onKeyPress.call(this,void 0,x(),0,n);W(t,l),O(t,x(),e(t).is(":focus")?P(v(0)):void 0)}}function I(t){return e.inputmask.escapeRegex.call(this,t)}function R(e){return e.replace(new RegExp("("+I(C().join(""))+")*$"),"")}function q(t){if(t.data("_inputmask")&&!t.hasClass("hasDatepicker")){var a=[],i=f().validPositions;for(var r in i)i[r].match&&null!=i[r].match.fn&&a.push(i[r].input);var o=(oe?a.reverse():a).join(""),s=(oe?x().slice().reverse():x()).join("");return e.isFunction(n.onUnMask)&&(o=n.onUnMask.call(t,s,o,n)||o),o}return t[0]._valueGet()}function N(e){if(oe&&"number"==typeof e&&(!n.greedy||""!=n.placeholder)){var t=x().length;e=t-e}return e}function Q(t,a,i){var r,o=t.jquery&&t.length>0?t[0]:t;if("number"!=typeof a){var s=e(o).data("_inputmask");return!e(o).is(":visible")&&s&&void 0!=s.caret?(a=s.caret.begin,i=s.caret.end):o.setSelectionRange?(a=o.selectionStart,i=o.selectionEnd):document.selection&&document.selection.createRange&&(r=document.selection.createRange(),a=0-r.duplicate().moveStart("character",-1e5),i=a+r.text.length),a=N(a),i=N(i),{begin:a,end:i}}a=N(a),i=N(i),i="number"==typeof i?i:a;var s=e(o).data("_inputmask")||{};s.caret={begin:a,end:i},e(o).data("_inputmask",s),e(o).is(":visible")&&(o.scrollLeft=o.scrollWidth,0==n.insertMode&&a==i&&i++,o.setSelectionRange?(o.selectionStart=a,o.selectionEnd=i):o.createTextRange&&(r=o.createTextRange(),r.collapse(!0),r.moveEnd("character",i),r.moveStart("character",a),r.select()))}function H(t){var a,i,r=x(),n=r.length,o=v(),s={},l=f().validPositions[o],d=void 0!=l?l.locator.slice():void 0;for(a=o+1;a<r.length;a++)i=_(a,d,a-1),d=i.locator.slice(),s[a]=e.extend(!0,{},i);var c=l&&void 0!=l.alternation?l.locator[l.alternation].split(","):[];for(a=n-1;a>o&&(i=s[a].match,(i.optionality||i.optionalQuantifier||l&&void 0!=l.alternation&&void 0!=s[a].locator[l.alternation]&&-1!=e.inArray(s[a].locator[l.alternation].toString(),c))&&r[a]==F(a,i));a--)n--;return t?{l:n,def:s[n]?s[n].match:void 0}:n}function G(e){for(var t=x(),a=t.slice(),i=H(),r=a.length-1;r>i&&!M(r);r--);a.splice(i,r+1-i),O(e,a)}function L(t){if(e.isFunction(n.isComplete))return n.isComplete.call(re,t,n);if("*"!=n.repeat){var a=!1,i=H(!0),r=E(i.l),o=v();if(o==r&&(void 0==i.def||i.def.newBlockMarker||i.def.optionalQuantifier)){a=!0;for(var s=0;r>=s;s++){var l=M(s);if(l&&(void 0==t[s]||t[s]==F(s))||!l&&t[s]!=F(s)){a=!1;break}}}return a}}function Y(e,t){return oe?e-t>1||e-t==1&&n.insertMode:t-e>1||t-e==1&&n.insertMode}function $(t){var a=e._data(t).events;e.each(a,function(t,a){e.each(a,function(e,t){if("inputmask"==t.namespace&&"setvalue"!=t.type){var a=t.handler;t.handler=function(e){return this.readOnly||this.disabled?void e.preventDefault:a.apply(this,arguments)}}})})}function B(t){function a(t){if(void 0==e.valHooks[t]||1!=e.valHooks[t].inputmaskpatch){var a=e.valHooks[t]&&e.valHooks[t].get?e.valHooks[t].get:function(e){return e.value},i=e.valHooks[t]&&e.valHooks[t].set?e.valHooks[t].set:function(e,t){return e.value=t,e};e.valHooks[t]={get:function(t){var i=e(t);if(i.data("_inputmask")){if(i.data("_inputmask").opts.autoUnmask)return i.inputmask("unmaskedvalue");var r=a(t),n=i.data("_inputmask"),o=n.maskset,s=o._buffer;return s=s?s.join(""):"",r!=s?r:""}return a(t)},set:function(t,a){var r,n=e(t),o=n.data("_inputmask");return o?(r=i(t,e.isFunction(o.opts.onBeforeMask)?o.opts.onBeforeMask.call(fe,a,o.opts)||a:a),n.triggerHandler("setvalue.inputmask")):r=i(t,a),r},inputmaskpatch:!0}}}function i(){var t=e(this),a=e(this).data("_inputmask");return a?a.opts.autoUnmask?t.inputmask("unmaskedvalue"):o.call(this)!=C().join("")?o.call(this):"":o.call(this)}function r(t){var a=e(this).data("_inputmask");a?(s.call(this,e.isFunction(a.opts.onBeforeMask)?a.opts.onBeforeMask.call(fe,t,a.opts)||t:t),e(this).triggerHandler("setvalue.inputmask")):s.call(this,t)}function n(t){e(t).bind("mouseenter.inputmask",function(){var t=e(this),a=this,i=a._valueGet();""!=i&&i!=x().join("")&&t.trigger("setvalue")});var a=e._data(t).events,i=a.mouseover;if(i){for(var r=i[i.length-1],n=i.length-1;n>0;n--)i[n]=i[n-1];i[0]=r}}var o,s;t._valueGet||(Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(t,"value"),document.__lookupGetter__&&t.__lookupGetter__("value")?(o=t.__lookupGetter__("value"),s=t.__lookupSetter__("value"),t.__defineGetter__("value",i),t.__defineSetter__("value",r)):(o=function(){return t.value},s=function(e){t.value=e},a(t.type),n(t)),t._valueGet=function(){return oe?o.call(this).split("").reverse().join(""):o.call(this)},t._valueSet=function(e){s.call(this,oe?e.split("").reverse().join(""):e)})}function K(t,a,i){function r(){if(n.keepStatic){g(!0);var e,a=[];for(e=v();e>=0;e--)if(f().validPositions[e]){if(void 0!=f().validPositions[e].alternation)break;a.push(f().validPositions[e].input),delete f().validPositions[e]}if(e>0)for(;a.length>0;)f().p=P(v()),V.call(t,void 0,!0,a.pop().charCodeAt(0),!1,!1,f().p)}}if((n.numericInput||oe)&&(a==e.inputmask.keyCode.BACKSPACE?a=e.inputmask.keyCode.DELETE:a==e.inputmask.keyCode.DELETE&&(a=e.inputmask.keyCode.BACKSPACE),oe)){var o=i.end;i.end=i.begin,i.begin=o}a==e.inputmask.keyCode.BACKSPACE&&i.end-i.begin<=1?i.begin=E(i.begin):a==e.inputmask.keyCode.DELETE&&i.begin==i.end&&i.end++,y(i.begin,i.end),r();var s=v(i.begin);s<i.begin?(-1==s&&g(),f().p=P(s)):f().p=i.begin}function W(e,t,a){if(t&&t.refreshFromBuffer){var i=t.refreshFromBuffer;D(i===!0?i:i.start,i.end),g(!0),void 0!=a&&(O(e,x()),Q(e,t.caret||a.begin,t.caret||a.end))}}function z(a){se=!1;var i=this,r=e(i),o=a.keyCode,s=Q(i);o==e.inputmask.keyCode.BACKSPACE||o==e.inputmask.keyCode.DELETE||l&&127==o||a.ctrlKey&&88==o&&!t("cut")?(a.preventDefault(),88==o&&(ie=x().join("")),K(i,o,s),O(i,x(),f().p),i._valueGet()==C().join("")&&r.trigger("cleared"),n.showTooltip&&r.prop("title",f().mask)):o==e.inputmask.keyCode.END||o==e.inputmask.keyCode.PAGE_DOWN?setTimeout(function(){var e=P(v());n.insertMode||e!=j()||a.shiftKey||e--,Q(i,a.shiftKey?s.begin:e,e)},0):o==e.inputmask.keyCode.HOME&&!a.shiftKey||o==e.inputmask.keyCode.PAGE_UP?Q(i,0,a.shiftKey?s.begin:0):o==e.inputmask.keyCode.ESCAPE||90==o&&a.ctrlKey?(U(i,!0,!1,ie.split("")),r.click()):o!=e.inputmask.keyCode.INSERT||a.shiftKey||a.ctrlKey?0!=n.insertMode||a.shiftKey||(o==e.inputmask.keyCode.RIGHT?setTimeout(function(){var e=Q(i);Q(i,e.begin)},0):o==e.inputmask.keyCode.LEFT&&setTimeout(function(){var e=Q(i);Q(i,oe?e.begin+1:e.begin-1)},0)):(n.insertMode=!n.insertMode,Q(i,n.insertMode||s.begin!=j()?s.begin:s.begin-1));var d=Q(i),c=n.onKeyDown.call(this,a,x(),d.begin,n);W(i,c,d),de=-1!=e.inArray(o,n.ignorables)}function V(t,a,i,r,o,s){if(void 0==i&&se)return!1;se=!0;var l=this,d=e(l);t=t||window.event;var i=a?i:t.which||t.charCode||t.keyCode;if(!(a===!0||t.ctrlKey&&t.altKey)&&(t.ctrlKey||t.metaKey||de))return!0;if(i){a!==!0&&46==i&&0==t.shiftKey&&","==n.radixPoint&&(i=44);var c,u=a?{begin:s,end:s}:Q(l),p=String.fromCharCode(i),h=Y(u.begin,u.end);h&&(f().undoPositions=e.extend(!0,{},f().validPositions),K(l,e.inputmask.keyCode.DELETE,u),n.insertMode||(n.insertMode=!n.insertMode,m(u.begin,o),n.insertMode=!n.insertMode),h=!n.multi),f().writeOutBuffer=!0;var v=oe&&!h?u.end:u.begin,y=S(v,p,o);if(y!==!1){if(y!==!0&&(v=void 0!=y.pos?y.pos:v,p=void 0!=y.c?y.c:p),g(!0),void 0!=y.caret)c=y.caret;else{var _=f().validPositions;c=!n.keepStatic&&(void 0!=_[v+1]&&w(v+1,_[v].locator.slice(),v).length>1||void 0!=_[v].alternation)?v+1:P(v)}f().p=c}if(r!==!1){var k=this;if(setTimeout(function(){n.onKeyValidation.call(k,y,n)},0),f().writeOutBuffer&&y!==!1){var b=x();O(l,b,a?void 0:n.numericInput?E(c):c),a!==!0&&setTimeout(function(){L(b)===!0&&d.trigger("complete"),le=!0,d.trigger("input")},0)}else h&&(f().buffer=void 0,f().validPositions=f().undoPositions)}else h&&(f().buffer=void 0,f().validPositions=f().undoPositions);if(n.showTooltip&&d.prop("title",f().mask),t&&1!=a){t.preventDefault();var C=Q(l),D=n.onKeyPress.call(this,t,x(),C.begin,n);W(l,D,C)}}}function J(t){var a=e(this),i=this,r=t.keyCode,o=x(),s=Q(i),l=n.onKeyUp.call(this,t,o,s.begin,n);W(i,l,s),r==e.inputmask.keyCode.TAB&&n.showMaskOnFocus&&(a.hasClass("focus-inputmask")&&0==i._valueGet().length?(g(),o=x(),O(i,o),Q(i,0),ie=x().join("")):(O(i,o),Q(i,N(0),N(j()))))}function X(t){if(le===!0&&"input"==t.type)return le=!1,!0;var a=this,i=e(a),r=a._valueGet(),o=Q(a);if("propertychange"==t.type&&a._valueGet().length<=j())return!0;"paste"==t.type&&(window.clipboardData&&window.clipboardData.getData?r=r.substr(0,o.begin)+window.clipboardData.getData("Text")+r.substr(o.end,r.length):t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.getData&&(r=r.substr(0,o.begin)+t.originalEvent.clipboardData.getData("text/plain")+r.substr(o.end,r.length)));var s=e.isFunction(n.onBeforePaste)?n.onBeforePaste.call(a,r,n)||r:r;return U(a,!0,!1,oe?s.split("").reverse():s.split(""),!0),i.click(),L(x())===!0&&i.trigger("complete"),!1}function Z(t){if(le===!0&&"input"==t.type)return le=!1,!0;var a=this,i=Q(a),r=a._valueGet();r=r.replace(new RegExp("("+I(C().join(""))+")*"),""),i.begin>r.length&&(Q(a,r.length),i=Q(a)),x().length-r.length!=1||r.charAt(i.begin)==x()[i.begin]||r.charAt(i.begin+1)==x()[i.begin]||M(i.begin)||(t.keyCode=e.inputmask.keyCode.BACKSPACE,z.call(a,t)),t.preventDefault()}function ee(t){if(le===!0&&"input"==t.type)return le=!1,!0;var a=this,i=Q(a),r=a._valueGet();Q(a,i.begin-1);var o=e.Event("keypress");o.which=r.charCodeAt(i.begin-1),se=!1,de=!1,V.call(a,o,void 0,void 0,!1);var s=f().p;O(a,x(),n.numericInput?E(s):s),t.preventDefault()}function te(t){le=!0;var a=this;return setTimeout(function(){Q(a,Q(a).begin-1);var i=e.Event("keypress");i.which=t.originalEvent.data.charCodeAt(0),se=!1,de=!1,V.call(a,i,void 0,void 0,!1);var r=f().p;O(a,x(),n.numericInput?E(r):r)},0),!1}function ae(t){if(re=e(t),re.is(":input")&&a(re.attr("type"))){if(re.data("_inputmask",{maskset:r,opts:n,isRTL:!1}),n.showTooltip&&re.prop("title",f().mask),("rtl"==t.dir||n.rightAlign)&&re.css("text-align","right"),"rtl"==t.dir||n.numericInput){t.dir="ltr",re.removeAttr("dir");var i=re.data("_inputmask");i.isRTL=!0,re.data("_inputmask",i),oe=!0}re.unbind(".inputmask"),re.removeClass("focus-inputmask"),re.closest("form").bind("submit",function(){ie!=x().join("")&&re.change(),re[0]._valueGet&&re[0]._valueGet()==C().join("")&&re[0]._valueSet(""),n.autoUnmask&&n.removeMaskOnSubmit&&re.inputmask("remove")}).bind("reset",function(){setTimeout(function(){re.trigger("setvalue")},0)}),re.bind("mouseenter.inputmask",function(){var t=e(this),a=this;!t.hasClass("focus-inputmask")&&n.showMaskOnHover&&a._valueGet()!=x().join("")&&O(a,x())}).bind("blur.inputmask",function(){var t=e(this),a=this;if(t.data("_inputmask")){var i=a._valueGet(),r=x();t.removeClass("focus-inputmask"),ie!=x().join("")&&t.change(),n.clearMaskOnLostFocus&&""!=i&&(i==C().join("")?a._valueSet(""):G(a)),L(r)===!1&&(t.trigger("incomplete"),n.clearIncomplete&&(g(),n.clearMaskOnLostFocus?a._valueSet(""):(r=C().slice(),O(a,r))))}}).bind("focus.inputmask",function(){var t=e(this),a=this,i=a._valueGet();n.showMaskOnFocus&&!t.hasClass("focus-inputmask")&&(!n.showMaskOnHover||n.showMaskOnHover&&""==i)&&a._valueGet()!=x().join("")&&O(a,x(),P(v())),t.addClass("focus-inputmask"),ie=x().join("")}).bind("mouseleave.inputmask",function(){var t=e(this),a=this;n.clearMaskOnLostFocus&&(t.hasClass("focus-inputmask")||a._valueGet()==t.attr("placeholder")||(a._valueGet()==C().join("")||""==a._valueGet()?a._valueSet(""):G(a)))}).bind("click.inputmask",function(){var t=this;e(t).is(":focus")&&setTimeout(function(){var a=Q(t);if(a.begin==a.end)if(n.radixFocus&&""!=n.radixPoint&&-1!=e.inArray(n.radixPoint,x())&&x().join("")==C().join(""))Q(t,e.inArray(n.radixPoint,x()));else{var i=oe?N(a.begin):a.begin,r=P(v(i));r>i?Q(t,M(i)?i:P(i)):Q(t,r)}},0)}).bind("dblclick.inputmask",function(){var e=this;setTimeout(function(){Q(e,0,P(v()))},0)}).bind(h+".inputmask dragdrop.inputmask drop.inputmask",X).bind("setvalue.inputmask",function(){var e=this;U(e,!0,!1,void 0,!0),ie=x().join(""),(n.clearMaskOnLostFocus||n.clearIncomplete)&&e._valueGet()==C().join("")&&e._valueSet("")}).bind("cut.inputmask",function(t){le=!0;var a=this,i=e(a),r=Q(a);K(a,e.inputmask.keyCode.DELETE,r);var o=n.onKeyPress.call(this,t,x(),f().p,n);W(a,o,{begin:f().p,end:f().p}),a._valueGet()==C().join("")&&i.trigger("cleared"),n.showTooltip&&i.prop("title",f().mask)}).bind("complete.inputmask",n.oncomplete).bind("incomplete.inputmask",n.onincomplete).bind("cleared.inputmask",n.oncleared),re.bind("keydown.inputmask",z).bind("keypress.inputmask",V).bind("keyup.inputmask",J).bind("compositionupdate.inputmask",te),"paste"!==h||o||re.bind("input.inputmask",ee),o&&re.bind("input.inputmask",X),(d||u||c||p)&&("input"==h&&re.unbind(h+".inputmask"),re.bind("input.inputmask",Z)),B(t);var s=e.isFunction(n.onBeforeMask)?n.onBeforeMask.call(t,t._valueGet(),n)||t._valueGet():t._valueGet();U(t,!0,!1,s.split(""),!0),ie=x().join("");var l;try{l=document.activeElement}catch(m){}L(x())===!1&&n.clearIncomplete&&g(),n.clearMaskOnLostFocus?x().join("")==C().join("")?t._valueSet(""):G(t):O(t,x()),l===t&&(re.addClass("focus-inputmask"),Q(t,P(v()))),$(t)}}var ie,re,ne,oe=!1,se=!1,le=!1,de=!1;if(void 0!=i)switch(i.action){case"isComplete":return re=e(i.el),r=re.data("_inputmask").maskset,n=re.data("_inputmask").opts,L(i.buffer);case"unmaskedvalue":return re=i.$input,r=re.data("_inputmask").maskset,n=re.data("_inputmask").opts,oe=i.$input.data("_inputmask").isRTL,q(i.$input);case"mask":ie=x().join(""),ae(i.el);break;case"format":re=e({}),re.data("_inputmask",{maskset:r,opts:n,isRTL:n.numericInput}),n.numericInput&&(oe=!0);var ce=(e.isFunction(n.onBeforeMask)?n.onBeforeMask.call(re,i.value,n)||i.value:i.value).split("");return U(re,!1,!1,oe?ce.reverse():ce,!0),n.onKeyPress.call(this,void 0,x(),0,n),i.metadata?{value:oe?x().slice().reverse().join(""):x().join(""),metadata:re.inputmask("getmetadata")}:oe?x().slice().reverse().join(""):x().join("");case"isValid":re=e({}),re.data("_inputmask",{maskset:r,opts:n,isRTL:n.numericInput}),n.numericInput&&(oe=!0);var ce=i.value.split("");U(re,!1,!0,oe?ce.reverse():ce);for(var ue=x(),pe=H(),he=ue.length-1;he>pe&&!M(he);he--);return ue.splice(pe,he+1-pe),L(ue)&&i.value==ue.join("");case"getemptymask":return re=e(i.el),r=re.data("_inputmask").maskset,n=re.data("_inputmask").opts,C();case"remove":var fe=i.el;re=e(fe),r=re.data("_inputmask").maskset,n=re.data("_inputmask").opts,fe._valueSet(q(re)),re.unbind(".inputmask"),re.removeClass("focus-inputmask"),re.removeData("_inputmask");var ge;Object.getOwnPropertyDescriptor&&(ge=Object.getOwnPropertyDescriptor(fe,"value")),ge&&ge.get?fe._valueGet&&Object.defineProperty(fe,"value",{get:fe._valueGet,set:fe._valueSet}):document.__lookupGetter__&&fe.__lookupGetter__("value")&&fe._valueGet&&(fe.__defineGetter__("value",fe._valueGet),fe.__defineSetter__("value",fe._valueSet));try{delete fe._valueGet,delete fe._valueSet}catch(ve){fe._valueGet=void 0,fe._valueSet=void 0}break;case"getmetadata":if(re=e(i.el),r=re.data("_inputmask").maskset,n=re.data("_inputmask").opts,e.isArray(r.metadata)){for(var me,ye=v(),_e=ye;_e>=0;_e--)if(f().validPositions[_e]&&void 0!=f().validPositions[_e].alternation){me=f().validPositions[_e].alternation;break}return void 0!=me?r.metadata[f().validPositions[ye].locator[me]]:r.metadata[0]}return r.metadata}}if(void 0===e.fn.inputmask){var o="function"==typeof ScriptEngineMajorVersion?ScriptEngineMajorVersion():new Function("/*@cc_on return @_jscript_version; @*/")()>=10,s=navigator.userAgent,l=null!==s.match(new RegExp("iphone","i")),d=null!==s.match(new RegExp("android.*safari.*","i")),c=null!==s.match(new RegExp("android.*chrome.*","i")),u=null!==s.match(new RegExp("android.*firefox.*","i")),p=/Kindle/i.test(s)||/Silk/i.test(s)||/KFTT/i.test(s)||/KFOT/i.test(s)||/KFJWA/i.test(s)||/KFJWI/i.test(s)||/KFSOWI/i.test(s)||/KFTHWA/i.test(s)||/KFTHWI/i.test(s)||/KFAPWA/i.test(s)||/KFAPWI/i.test(s),h=t("paste")?"paste":t("input")?"input":"propertychange";e.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},alternatormarker:"|",escapeChar:"\\",mask:null,oncomplete:e.noop,onincomplete:e.noop,oncleared:e.noop,repeat:0,greedy:!0,autoUnmask:!1,removeMaskOnSubmit:!0,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},alias:null,onKeyUp:e.noop,onKeyPress:e.noop,onKeyDown:e.noop,onBeforeMask:void 0,onBeforePaste:void 0,onUnMask:void 0,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:e.noop,skipOptionalPartCharacter:" ",showTooltip:!1,numericInput:!1,rightAlign:!1,radixPoint:"",radixFocus:!1,nojumps:!1,nojumpsThreshold:0,keepStatic:void 0,definitions:{9:{validator:"[0-9]",cardinality:1,definitionSymbol:"*"},a:{validator:"[A-Za-z--]",cardinality:1,definitionSymbol:"*"},"*":{validator:"[0-9A-Za-z--]",cardinality:1}},ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],isComplete:void 0},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},masksCache:{},escapeRegex:function(e){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];return e.replace(new RegExp("(\\"+t.join("|\\")+")","gim"),"\\$1")},format:function(t,a,o){var s=e.extend(!0,{},e.inputmask.defaults,a);return i(s.alias,a,s),n({action:"format",value:t,metadata:o},r(s),s)},isValid:function(t,a){var o=e.extend(!0,{},e.inputmask.defaults,a);return i(o.alias,a,o),n({action:"isValid",value:t},r(o),o)}},e.fn.inputmask=function(t,a,o,s,l){function d(t,a,r){var n=e(t);n.data("inputmask-alias")&&i(n.data("inputmask-alias"),{},a);for(var o in a){var s=n.data("inputmask-"+o.toLowerCase());void 0!=s&&("mask"==o&&0==s.indexOf("[")?(a[o]=s.replace(/[\s[\]]/g,"").split("','"),a[o][0]=a[o][0].replace("'",""),a[o][a[o].length-1]=a[o][a[o].length-1].replace("'","")):a[o]="boolean"==typeof s?s:s.toString(),r&&(r[o]=a[o]))}return a}o=o||n,s=s||"_inputmask";var c,u=e.extend(!0,{},e.inputmask.defaults,a);if("string"==typeof t)switch(t){case"mask":return i(u.alias,a,u),c=r(u,o!==n),void 0==c?this:this.each(function(){o({action:"mask",el:this},e.extend(!0,{},c),d(this,u))});case"unmaskedvalue":var p=e(this);return p.data(s)?o({action:"unmaskedvalue",$input:p}):p.val();case"remove":return this.each(function(){var t=e(this);t.data(s)&&o({action:"remove",el:this})});case"getemptymask":return this.data(s)?o({action:"getemptymask",el:this}):"";case"hasMaskedValue":return!!this.data(s)&&!this.data(s).opts.autoUnmask;case"isComplete":return!this.data(s)||o({action:"isComplete",buffer:this[0]._valueGet().split(""),el:this});case"getmetadata":return this.data(s)?o({action:"getmetadata",el:this}):void 0;case"_detectScope":return i(u.alias,a,u),void 0==l||i(l,a,u)||-1!=e.inArray(l,["mask","unmaskedvalue","remove","getemptymask","hasMaskedValue","isComplete","getmetadata","_detectScope"])||(u.mask=l),e.isFunction(u.mask)&&(u.mask=u.mask.call(this,u)),e.isArray(u.mask);default:return i(u.alias,a,u),i(t,a,u)||(u.mask=t),c=r(u,o!==n),void 0==c?this:this.each(function(){o({action:"mask",el:this},e.extend(!0,{},c),d(this,u))})}else{if("object"==typeof t)return u=e.extend(!0,{},e.inputmask.defaults,t),i(u.alias,t,u),c=r(u,o!==n),void 0==c?this:this.each(function(){o({action:"mask",el:this},e.extend(!0,{},c),d(this,u))});if(void 0==t)return this.each(function(){var t=e(this).attr("data-inputmask");if(t&&""!=t)try{t=t.replace(new RegExp("'","g"),'"');var r=e.parseJSON("{"+t+"}");e.extend(!0,r,a),u=e.extend(!0,{},e.inputmask.defaults,r),u=d(this,u),i(u.alias,r,u),u.alias=void 0,e(this).inputmask("mask",u,o)}catch(n){}if(e(this).attr("data-inputmask-mask")||e(this).attr("data-inputmask-alias")){u=e.extend(!0,{},e.inputmask.defaults,{});var s={};u=d(this,u,s),i(u.alias,s,u),u.alias=void 0,e(this).inputmask("mask",u,o)}})}}}return e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.definitions,{h:{validator:"[01][0-9]|2[0-3]",cardinality:2,prevalidator:[{validator:"[0-2]",cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:"[0-5]",cardinality:1}]},d:{validator:"0[1-9]|[12][0-9]|3[01]",cardinality:2,prevalidator:[{validator:"[0-3]",cardinality:1}]},m:{validator:"0[1-9]|1[012]",cardinality:2,prevalidator:[{validator:"[01]",cardinality:1}]},y:{validator:"(19|20)\\d{2}",cardinality:4,prevalidator:[{validator:"[12]",cardinality:1},{validator:"(19|20)",cardinality:2},{validator:"(19|20)\\d",cardinality:3}]}}),e.extend(e.inputmask.defaults.aliases,{"dd/mm/yyyy":{mask:"1/2/y",placeholder:"dd/mm/yyyy",regex:{val1pre:new RegExp("[0-3]"),val1:new RegExp("0[1-9]|[12][0-9]|3[01]"),val2pre:function(t){var a=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[1-9]|[12][0-9]|3[01])"+a+"[01])")},val2:function(t){var a=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[1-9]|[12][0-9])"+a+"(0[1-9]|1[012]))|(30"+a+"(0[13-9]|1[012]))|(31"+a+"(0[13578]|1[02]))")}},leapday:"29/02/",separator:"/",yearrange:{minyear:1900,maxyear:2099},isInYearRange:function(e,t,a){if(isNaN(e))return!1;var i=parseInt(e.concat(t.toString().slice(e.length))),r=parseInt(e.concat(a.toString().slice(e.length)));return!isNaN(i)&&(i>=t&&a>=i)||!isNaN(r)&&(r>=t&&a>=r)},determinebaseyear:function(e,t,a){var i=(new Date).getFullYear();if(e>i)return e;if(i>t){for(var r=t.toString().slice(0,2),n=t.toString().slice(2,4);r+a>t;)r--;var o=r+n;return e>o?e:o}return i},onKeyUp:function(t){var a=e(this);if(t.ctrlKey&&t.keyCode==e.inputmask.keyCode.RIGHT){var i=new Date;a.val(i.getDate().toString()+(i.getMonth()+1).toString()+i.getFullYear().toString())}},definitions:{1:{validator:function(e,t,a,i,r){var n=r.regex.val1.test(e);return i||n||e.charAt(1)!=r.separator&&-1=="-./".indexOf(e.charAt(1))||!(n=r.regex.val1.test("0"+e.charAt(0)))?n:(t.buffer[a-1]="0",{refreshFromBuffer:{start:a-1,end:a},pos:a,c:e.charAt(0)})},cardinality:2,prevalidator:[{validator:function(e,t,a,i,r){isNaN(t.buffer[a+1])||(e+=t.buffer[a+1]);var n=1==e.length?r.regex.val1pre.test(e):r.regex.val1.test(e);return i||n||!(n=r.regex.val1.test("0"+e))?n:(t.buffer[a]="0",a++,{pos:a})},cardinality:1}]},2:{validator:function(e,t,a,i,r){var n=r.mask.indexOf("2")==r.mask.length-1?t.buffer.join("").substr(5,3):t.buffer.join("").substr(0,3);-1!=n.indexOf(r.placeholder[0])&&(n="01"+r.separator);var o=r.regex.val2(r.separator).test(n+e);if(!i&&!o&&(e.charAt(1)==r.separator||-1!="-./".indexOf(e.charAt(1)))&&(o=r.regex.val2(r.separator).test(n+"0"+e.charAt(0))))return t.buffer[a-1]="0",{refreshFromBuffer:{start:a-1,end:a},pos:a,c:e.charAt(0)};if(r.mask.indexOf("2")==r.mask.length-1&&o){var s=t.buffer.join("").substr(4,4)+e;if(s!=r.leapday)return!0;var l=parseInt(t.buffer.join("").substr(0,4),10);return l%4===0&&(l%100!==0||l%400===0)}return o},cardinality:2,prevalidator:[{validator:function(e,t,a,i,r){isNaN(t.buffer[a+1])||(e+=t.buffer[a+1]);var n=r.mask.indexOf("2")==r.mask.length-1?t.buffer.join("").substr(5,3):t.buffer.join("").substr(0,3);-1!=n.indexOf(r.placeholder[0])&&(n="01"+r.separator);var o=1==e.length?r.regex.val2pre(r.separator).test(n+e):r.regex.val2(r.separator).test(n+e);return i||o||!(o=r.regex.val2(r.separator).test(n+"0"+e))?o:(t.buffer[a]="0",a++,{pos:a})},cardinality:1}]},y:{validator:function(e,t,a,i,r){if(r.isInYearRange(e,r.yearrange.minyear,r.yearrange.maxyear)){var n=t.buffer.join("").substr(0,6);if(n!=r.leapday)return!0;var o=parseInt(e,10);return o%4===0&&(o%100!==0||o%400===0)}return!1},cardinality:4,prevalidator:[{validator:function(e,t,a,i,r){var n=r.isInYearRange(e,r.yearrange.minyear,r.yearrange.maxyear);if(!i&&!n){var o=r.determinebaseyear(r.yearrange.minyear,r.yearrange.maxyear,e+"0").toString().slice(0,1);if(n=r.isInYearRange(o+e,r.yearrange.minyear,r.yearrange.maxyear))return t.buffer[a++]=o.charAt(0),{pos:a};if(o=r.determinebaseyear(r.yearrange.minyear,r.yearrange.maxyear,e+"0").toString().slice(0,2),n=r.isInYearRange(o+e,r.yearrange.minyear,r.yearrange.maxyear))return t.buffer[a++]=o.charAt(0),t.buffer[a++]=o.charAt(1),{pos:a}}return n},cardinality:1},{validator:function(e,t,a,i,r){var n=r.isInYearRange(e,r.yearrange.minyear,r.yearrange.maxyear);if(!i&&!n){var o=r.determinebaseyear(r.yearrange.minyear,r.yearrange.maxyear,e).toString().slice(0,2);if(n=r.isInYearRange(e[0]+o[1]+e[1],r.yearrange.minyear,r.yearrange.maxyear))return t.buffer[a++]=o.charAt(1),{pos:a};if(o=r.determinebaseyear(r.yearrange.minyear,r.yearrange.maxyear,e).toString().slice(0,2),r.isInYearRange(o+e,r.yearrange.minyear,r.yearrange.maxyear)){var s=t.buffer.join("").substr(0,6);if(s!=r.leapday)n=!0;else{var l=parseInt(e,10);n=l%4===0&&(l%100!==0||l%400===0)}}else n=!1;if(n)return t.buffer[a-1]=o.charAt(0),t.buffer[a++]=o.charAt(1),t.buffer[a++]=e.charAt(0),{refreshFromBuffer:{start:a-3,end:a},pos:a}}return n},cardinality:2},{validator:function(e,t,a,i,r){return r.isInYearRange(e,r.yearrange.minyear,r.yearrange.maxyear)},cardinality:3}]}},insertMode:!1,autoUnmask:!1},"mm/dd/yyyy":{placeholder:"mm/dd/yyyy",alias:"dd/mm/yyyy",regex:{val2pre:function(t){var a=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[13-9]|1[012])"+a+"[0-3])|(02"+a+"[0-2])")},val2:function(t){var a=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[1-9]|1[012])"+a+"(0[1-9]|[12][0-9]))|((0[13-9]|1[012])"+a+"30)|((0[13578]|1[02])"+a+"31)")},val1pre:new RegExp("[01]"),val1:new RegExp("0[1-9]|1[012]")},leapday:"02/29/",onKeyUp:function(t){var a=e(this);if(t.ctrlKey&&t.keyCode==e.inputmask.keyCode.RIGHT){var i=new Date;a.val((i.getMonth()+1).toString()+i.getDate().toString()+i.getFullYear().toString())}}},"yyyy/mm/dd":{mask:"y/1/2",placeholder:"yyyy/mm/dd",alias:"mm/dd/yyyy",leapday:"/02/29",onKeyUp:function(t){var a=e(this);if(t.ctrlKey&&t.keyCode==e.inputmask.keyCode.RIGHT){var i=new Date;a.val(i.getFullYear().toString()+(i.getMonth()+1).toString()+i.getDate().toString())}}},"dd.mm.yyyy":{mask:"1.2.y",placeholder:"dd.mm.yyyy",leapday:"29.02.",separator:".",alias:"dd/mm/yyyy"},"dd-mm-yyyy":{mask:"1-2-y",placeholder:"dd-mm-yyyy",leapday:"29-02-",separator:"-",alias:"dd/mm/yyyy"},"mm.dd.yyyy":{mask:"1.2.y",placeholder:"mm.dd.yyyy",leapday:"02.29.",separator:".",alias:"mm/dd/yyyy"},"mm-dd-yyyy":{mask:"1-2-y",placeholder:"mm-dd-yyyy",leapday:"02-29-",separator:"-",alias:"mm/dd/yyyy"},"yyyy.mm.dd":{mask:"y.1.2",placeholder:"yyyy.mm.dd",leapday:".02.29",separator:".",alias:"yyyy/mm/dd"},"yyyy-mm-dd":{mask:"y-1-2",placeholder:"yyyy-mm-dd",leapday:"-02-29",separator:"-",alias:"yyyy/mm/dd"},datetime:{mask:"1/2/y h:s",placeholder:"dd/mm/yyyy hh:mm",alias:"dd/mm/yyyy",regex:{hrspre:new RegExp("[012]"),hrs24:new RegExp("2[0-4]|1[3-9]"),hrs:new RegExp("[01][0-9]|2[0-4]"),ampm:new RegExp("^[a|p|A|P][m|M]"),mspre:new RegExp("[0-5]"),ms:new RegExp("[0-5][0-9]")},timeseparator:":",hourFormat:"24",definitions:{h:{validator:function(e,t,a,i,r){if("24"==r.hourFormat&&24==parseInt(e,10))return t.buffer[a-1]="0",t.buffer[a]="0",{refreshFromBuffer:{start:a-1,end:a},c:"0"};var n=r.regex.hrs.test(e);if(!i&&!n&&(e.charAt(1)==r.timeseparator||-1!="-.:".indexOf(e.charAt(1)))&&(n=r.regex.hrs.test("0"+e.charAt(0))))return t.buffer[a-1]="0",t.buffer[a]=e.charAt(0),a++,{refreshFromBuffer:{start:a-2,end:a},pos:a,c:r.timeseparator};if(n&&"24"!==r.hourFormat&&r.regex.hrs24.test(e)){var o=parseInt(e,10);return 24==o?(t.buffer[a+5]="a",t.buffer[a+6]="m"):(t.buffer[a+5]="p",t.buffer[a+6]="m"),o-=12,10>o?(t.buffer[a]=o.toString(),t.buffer[a-1]="0"):(t.buffer[a]=o.toString().charAt(1),t.buffer[a-1]=o.toString().charAt(0)),{refreshFromBuffer:{start:a-1,end:a+6},c:t.buffer[a]}}return n},cardinality:2,prevalidator:[{validator:function(e,t,a,i,r){var n=r.regex.hrspre.test(e);return i||n||!(n=r.regex.hrs.test("0"+e))?n:(t.buffer[a]="0",a++,{pos:a})},cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:function(e,t,a,i,r){var n=r.regex.mspre.test(e);return i||n||!(n=r.regex.ms.test("0"+e))?n:(t.buffer[a]="0",a++,{pos:a})},cardinality:1}]},t:{validator:function(e,t,a,i,r){return r.regex.ampm.test(e+"m")},casing:"lower",cardinality:1}},insertMode:!1,autoUnmask:!1},datetime12:{mask:"1/2/y h:s t\\m",placeholder:"dd/mm/yyyy hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:s t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm:ss":{mask:"h:s:s",placeholder:"hh:mm:ss",alias:"datetime",autoUnmask:!1},"hh:mm":{mask:"h:s",placeholder:"hh:mm",alias:"datetime",autoUnmask:!1},date:{alias:"dd/mm/yyyy"},"mm/yyyy":{mask:"1/y",placeholder:"mm/yyyy",leapday:"donotuse",separator:"/",alias:"mm/dd/yyyy"}}),e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.definitions,{A:{validator:"[A-Za-z--]",cardinality:1,casing:"upper"},"#":{validator:"[0-9A-Za-z--]",cardinality:1,casing:"upper"}}),e.extend(e.inputmask.defaults.aliases,{url:{mask:"ir",placeholder:"",separator:"",defaultPrefix:"http://",regex:{urlpre1:new RegExp("[fh]"),urlpre2:new RegExp("(ft|ht)"),urlpre3:new RegExp("(ftp|htt)"),urlpre4:new RegExp("(ftp:|http|ftps)"),urlpre5:new RegExp("(ftp:/|ftps:|http:|https)"),urlpre6:new RegExp("(ftp://|ftps:/|http:/|https:)"),urlpre7:new RegExp("(ftp://|ftps://|http://|https:/)"),urlpre8:new RegExp("(ftp://|ftps://|http://|https://)")},definitions:{i:{validator:function(){return!0},cardinality:8,prevalidator:function(){for(var e=[],t=8,a=0;t>a;a++)e[a]=function(){var e=a;return{validator:function(t,a,i,r,n){if(n.regex["urlpre"+(e+1)]){var o,s=t;e+1-t.length>0&&(s=a.buffer.join("").substring(0,e+1-t.length)+""+s);var l=n.regex["urlpre"+(e+1)].test(s);if(!r&&!l){for(i-=e,o=0;o<n.defaultPrefix.length;o++)a.buffer[i]=n.defaultPrefix[o],i++;for(o=0;o<s.length-1;o++)a.buffer[i]=s[o],i++;return{pos:i}}return l}return!1},cardinality:e}}();return e}()},r:{validator:".",cardinality:50}},insertMode:!1,autoUnmask:!1},ip:{mask:"i[i[i]].i[i[i]].i[i[i]].i[i[i]]",definitions:{i:{validator:function(e,t,a){return a-1>-1&&"."!=t.buffer[a-1]?(e=t.buffer[a-1]+e,e=a-2>-1&&"."!=t.buffer[a-2]?t.buffer[a-2]+e:"0"+e):e="00"+e,new RegExp("25[0-5]|2[0-4][0-9]|[01][0-9][0-9]").test(e)},cardinality:1}}},email:{mask:"*{1,64}[.*{1,64}][.*{1,64}][.*{1,64}]@*{1,64}[.*{2,64}][.*{2,6}][.*{1,2}]",greedy:!1,onBeforePaste:function(e){return e=e.toLowerCase(),e.replace("mailto:","")},definitions:{"*":{validator:"[0-9A-Za-z!#$%&'*+/=?^_`{|}~-]",cardinality:1,casing:"lower"}}}}),e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.aliases,{numeric:{mask:function(e){if(0!==e.repeat&&isNaN(e.integerDigits)&&(e.integerDigits=e.repeat),e.repeat=0,e.groupSeparator==e.radixPoint&&(e.groupSeparator="."==e.radixPoint?",":","==e.radixPoint?".":"")," "===e.groupSeparator&&(e.skipOptionalPartCharacter=void 0),e.autoGroup=e.autoGroup&&""!=e.groupSeparator,e.autoGroup&&isFinite(e.integerDigits)){var t=Math.floor(e.integerDigits/e.groupSize),a=e.integerDigits%e.groupSize;e.integerDigits+=0==a?t-1:t}e.definitions[";"]=e.definitions["~"];var i=e.prefix;return i+="[+]",i+="~{1,"+e.integerDigits+"}",void 0!=e.digits&&(isNaN(e.digits)||parseInt(e.digits)>0)&&(i+=e.digitsOptional?"["+(e.decimalProtect?":":e.radixPoint)+";{"+e.digits+"}]":(e.decimalProtect?":":e.radixPoint)+";{"+e.digits+"}"),i+=e.suffix},placeholder:"",greedy:!1,digits:"*",digitsOptional:!0,groupSeparator:"",radixPoint:".",radixFocus:!0,groupSize:3,autoGroup:!1,allowPlus:!0,allowMinus:!0,integerDigits:"+",prefix:"",suffix:"",rightAlign:!0,decimalProtect:!0,
postFormat:function(t,a,i,r){var n=!1,o=t[a];if(""==r.groupSeparator||-1!=e.inArray(r.radixPoint,t)&&a>=e.inArray(r.radixPoint,t)||new RegExp("[-+]").test(o))return{pos:a};var s=t.slice();o==r.groupSeparator&&(s.splice(a--,1),o=s[a]),i?s[a]="?":s.splice(a,0,"?");var l=s.join("");if(r.autoGroup||i&&-1!=l.indexOf(r.groupSeparator)){var d=e.inputmask.escapeRegex.call(this,r.groupSeparator);n=0==l.indexOf(r.groupSeparator),l=l.replace(new RegExp(d,"g"),"");var c=l.split(r.radixPoint);if(l=c[0],l!=r.prefix+"?0"&&l.length>=r.groupSize+r.prefix.length){n=!0;for(var u=new RegExp("([-+]?[\\d?]+)([\\d?]{"+r.groupSize+"})");u.test(l);)l=l.replace(u,"$1"+r.groupSeparator+"$2"),l=l.replace(r.groupSeparator+r.groupSeparator,r.groupSeparator)}c.length>1&&(l+=r.radixPoint+c[1])}t.length=l.length;for(var p=0,h=l.length;h>p;p++)t[p]=l.charAt(p);var f=e.inArray("?",t);return i?t[f]=o:t.splice(f,1),{pos:f,refreshFromBuffer:n}},onKeyDown:function(t,a,i,r){if(t.keyCode==e.inputmask.keyCode.TAB&&"0"!=r.placeholder.charAt(0)){var n=e.inArray(r.radixPoint,a);if(-1!=n&&isFinite(r.digits)){for(var o=1;o<=r.digits;o++)(void 0==a[n+o]||a[n+o]==r.placeholder.charAt(0))&&(a[n+o]="0");return{refreshFromBuffer:{start:++n,end:n+r.digits}}}}else if(r.autoGroup&&(t.keyCode==e.inputmask.keyCode.DELETE||t.keyCode==e.inputmask.keyCode.BACKSPACE)){var s=r.postFormat(a,i-1,!0,r);return s.caret=s.pos+1,s}},onKeyPress:function(e,t,a,i){if(i.autoGroup){var r=i.postFormat(t,a-1,!0,i);return r.caret=r.pos+1,r}},regex:{integerPart:function(){return new RegExp("[-+]?\\d+")},integerNPart:function(){return new RegExp("\\d+")}},signHandler:function(e,t,a,i,r){if(!i&&(r.allowMinus&&"-"===e||r.allowPlus&&"+"===e)){var n=t.join("").match(r.regex.integerPart(r));if(n&&n.length>0&&"0"!==n[n.index])return t[n.index]==("-"===e?"+":"-")?{pos:n.index,c:e,remove:n.index,caret:a}:t[n.index]==("-"===e?"-":"+")?{remove:n.index,caret:a-1}:{pos:n.index,c:e,caret:a+1}}return!1},radixHandler:function(t,a,i,r,n){if(!r&&t===n.radixPoint){var o=e.inArray(n.radixPoint,a.buffer),s=a.buffer.join("").match(n.regex.integerPart(n));if(-1!=o)return a.validPositions[o-1]?{caret:o+1}:{pos:s.index,c:s[0],caret:o+1}}return!1},leadingZeroHandler:function(t,a,i,r,n){var o=a.buffer.join("").match(n.regex.integerNPart(n)),s=e.inArray(n.radixPoint,a.buffer);if(o&&!r&&(-1==s||o.index<s))if(0==o[0].indexOf("0")&&i>=n.prefix.length){if(-1==s||s>=i&&void 0==a.validPositions[s])return a.buffer.splice(o.index,1),i=i>o.index?i-1:o.index,{pos:i,remove:o.index};if(i>o.index&&s>=i)return a.buffer.splice(o.index,1),i=i>o.index?i-1:o.index,{pos:i,remove:o.index}}else if("0"==t&&i<=o.index)return!1;return!0},definitions:{"~":{validator:function(t,a,i,r,n){var o=n.signHandler(t,a.buffer,i,r,n);if(!o&&(o=n.radixHandler(t,a,i,r,n),!o&&(o=r?new RegExp("[0-9"+e.inputmask.escapeRegex.call(this,n.groupSeparator)+"]").test(t):new RegExp("[0-9]").test(t),o===!0&&(o=n.leadingZeroHandler(t,a,i,r,n),o===!0)))){var s=e.inArray(n.radixPoint,a.buffer);n.digitsOptional===!1&&i>s&&!r&&(o={pos:i,remove:i}),o={pos:i}}return o},cardinality:1,prevalidator:null},"+":{validator:function(e,t,a,i,r){var n=r.signHandler(e,t.buffer,a,i,r);return n||(n=r.allowMinus&&"-"==e||r.allowPlus&&"+"==e),n},cardinality:1,prevalidator:null,placeholder:""},":":{validator:function(t,a,i,r,n){var o=n.signHandler(t,a.buffer,i,r,n);if(!o){var s="["+e.inputmask.escapeRegex.call(this,n.radixPoint)+"]";o=new RegExp(s).test(t),o&&a.validPositions[i]&&a.validPositions[i].match.placeholder==n.radixPoint&&(o={pos:i,remove:i})}return o},cardinality:1,prevalidator:null,placeholder:function(e){return e.radixPoint}}},insertMode:!0,autoUnmask:!1,onUnMask:function(t,a,i){var r=t.replace(i.prefix,"");return r=r.replace(i.suffix,""),r=r.replace(new RegExp(e.inputmask.escapeRegex.call(this,i.groupSeparator),"g"),"")},isComplete:function(t,a){var i=t.join(""),r=t.slice();if(a.postFormat(r,0,!0,a),r.join("")!=i)return!1;var n=i.replace(a.prefix,"");return n=n.replace(a.suffix,""),n=n.replace(new RegExp(e.inputmask.escapeRegex.call(this,a.groupSeparator),"g"),""),n=n.replace(e.inputmask.escapeRegex.call(this,a.radixPoint),"."),isFinite(n)},onBeforeMask:function(t,a){if(isFinite(t))return t.toString().replace(".",a.radixPoint);var i=t.match(/,/g),r=t.match(/\./g);return r&&i?r.length>i.length?(t=t.replace(/\./g,""),t=t.replace(",",a.radixPoint)):i.length>r.length&&(t=t.replace(/,/g,""),t=t.replace(".",a.radixPoint)):t=t.replace(new RegExp(e.inputmask.escapeRegex.call(this,a.groupSeparator),"g"),""),t}},currency:{prefix:"$ ",groupSeparator:",",radixPoint:".",alias:"numeric",placeholder:"0",autoGroup:!0,digits:2,digitsOptional:!1,clearMaskOnLostFocus:!1,decimalProtect:!0},decimal:{alias:"numeric"},integer:{alias:"numeric",digits:"0"}}),e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.aliases,{phone:{url:"phone-codes/phone-codes.js",maskInit:"+pp(pp)pppppppp",mask:function(t){t.definitions={p:{validator:function(){return!1},cardinality:1},"#":{validator:"[0-9]",cardinality:1}};var a=[];return e.ajax({url:t.url,async:!1,dataType:"json",success:function(e){a=e}}),a=a.sort(function(e,t){return(e.mask||e)<(t.mask||t)?-1:1}),a.splice(0,0,t.maskInit),a},nojumps:!0,nojumpsThreshold:1},phonebe:{alias:"phone",url:"phone-codes/phone-be.js",maskInit:"+32(pp)pppppppp",nojumpsThreshold:4}}),e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.aliases,{Regex:{mask:"r",greedy:!1,repeat:"*",regex:null,regexTokens:null,tokenizer:/\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,quantifierFilter:/[0-9]+[^,]/,isComplete:function(e,t){return new RegExp(t.regex).test(e.join(""))},definitions:{r:{validator:function(t,a,i,r,n){function o(e,t){this.matches=[],this.isGroup=e||!1,this.isQuantifier=t||!1,this.quantifier={min:1,max:1},this.repeaterPart=void 0}function s(){var e,t,a=new o,i=[];for(n.regexTokens=[];e=n.tokenizer.exec(n.regex);)switch(t=e[0],t.charAt(0)){case"(":i.push(new o((!0)));break;case")":var r=i.pop();i.length>0?i[i.length-1].matches.push(r):a.matches.push(r);break;case"{":case"+":case"*":var s=new o((!1),(!0));t=t.replace(/[{}]/g,"");var l=t.split(","),d=isNaN(l[0])?l[0]:parseInt(l[0]),c=1==l.length?d:isNaN(l[1])?l[1]:parseInt(l[1]);if(s.quantifier={min:d,max:c},i.length>0){var u=i[i.length-1].matches;if(e=u.pop(),!e.isGroup){var r=new o((!0));r.matches.push(e),e=r}u.push(e),u.push(s)}else{if(e=a.matches.pop(),!e.isGroup){var r=new o((!0));r.matches.push(e),e=r}a.matches.push(e),a.matches.push(s)}break;default:i.length>0?i[i.length-1].matches.push(t):a.matches.push(t)}a.matches.length>0&&n.regexTokens.push(a)}function l(t,a){var i=!1;a&&(c+="(",p++);for(var r=0;r<t.matches.length;r++){var n=t.matches[r];if(1==n.isGroup)i=l(n,!0);else if(1==n.isQuantifier){var o=e.inArray(n,t.matches),s=t.matches[o-1],d=c;if(isNaN(n.quantifier.max)){for(;n.repeaterPart&&n.repeaterPart!=c&&n.repeaterPart.length>c.length&&!(i=l(s,!0)););i=i||l(s,!0),i&&(n.repeaterPart=c),c=d+n.quantifier.max}else{for(var u=0,f=n.quantifier.max-1;f>u&&!(i=l(s,!0));u++);c=d+"{"+n.quantifier.min+","+n.quantifier.max+"}"}}else if(void 0!=n.matches)for(var g=0;g<n.length&&!(i=l(n[g],a));g++);else{var v;if("["==n.charAt(0)){v=c,v+=n;for(var m=0;p>m;m++)v+=")";var y=new RegExp("^("+v+")$");i=y.test(h)}else for(var _=0,k=n.length;k>_;_++)if("\\"!=n.charAt(_)){v=c,v+=n.substr(0,_+1),v=v.replace(/\|$/,"");for(var m=0;p>m;m++)v+=")";var y=new RegExp("^("+v+")$");if(i=y.test(h))break}c+=n}if(i)break}return a&&(c+=")",p--),i}null==n.regexTokens&&s();var d=a.buffer.slice(),c="",u=!1,p=0;d.splice(i,0,t);for(var h=d.join(""),f=0;f<n.regexTokens.length;f++){var o=n.regexTokens[f];if(u=l(o,o.isGroup))break}return u},cardinality:1}}}}),e.fn.inputmask}(jQuery),jQuery(document).ready(function(e){jQuery(document).on("cf.add",function(){e("[data-inputmask]").inputmask()}),jQuery(document).trigger("cf.add")}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function t(){var e=document.createElement("input");return e.setAttribute("type","range"),"text"!==e.type}function a(e,t){var a=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return e.apply(null,a)},t)}function i(e,t){return t=t||100,function(){if(!e.debouncing){var a=Array.prototype.slice.apply(arguments);e.lastReturnVal=e.apply(window,a),e.debouncing=!0}return clearTimeout(e.debounceTimeout),e.debounceTimeout=setTimeout(function(){e.debouncing=!1},t),e.lastReturnVal}}function r(t,r){if(this.$window=e(window),this.$document=e(document),this.$element=e(t),this.options=e.extend({},l,r),this._defaults=l,this._name=n,this.startEvent=this.options.startEvent.join("."+n+" ")+"."+n,this.moveEvent=this.options.moveEvent.join("."+n+" ")+"."+n,this.endEvent=this.options.endEvent.join("."+n+" ")+"."+n,this.polyfill=this.options.polyfill,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideEnd=this.options.onSlideEnd,this.polyfill&&s)return!1;this.identifier="js-"+n+"-"+ +new Date,this.min=parseFloat(this.$element[0].getAttribute("min")||0),this.max=parseFloat(this.$element[0].getAttribute("max")||100),this.value=parseFloat(this.$element[0].value||this.min+(this.max-this.min)/2),this.step=parseFloat(this.$element[0].getAttribute("step")||1),this.$fill=e('<div class="'+this.options.fillClass+'" />'),this.$handle=e('<div class="'+this.options.handleClass+'" />'),this.$range=e('<div class="'+this.options.rangeClass+'" id="'+this.identifier+'" />').insertAfter(this.$element).prepend(this.$fill,this.$handle),this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this.handleDown=e.proxy(this.handleDown,this),this.handleMove=e.proxy(this.handleMove,this),this.handleEnd=e.proxy(this.handleEnd,this),this.init();var o=this;this.$window.on("resize."+n,i(function(){a(function(){o.update()},300)},20)),this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown),this.$element.on("change."+n,function(e,t){if(!t||t.origin!==n){var a=e.target.value,i=o.getPositionFromValue(a);o.setPosition(i)}})}var n="rangeslider",o=[],s=t(),l={polyfill:!0,rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]};r.prototype.init=function(){this.onInit&&"function"==typeof this.onInit&&this.onInit(),this.update()},r.prototype.update=function(){this.handleWidth=this.$handle[0].offsetWidth,this.rangeWidth=this.$range[0].offsetWidth,this.maxHandleX=this.rangeWidth-this.handleWidth,this.grabX=this.handleWidth/2,this.position=this.getPositionFromValue(this.value),this.$element[0].disabled?this.$range.addClass(this.options.disabledClass):this.$range.removeClass(this.options.disabledClass),this.setPosition(this.position)},r.prototype.handleDown=function(e){if(e.preventDefault(),this.$document.on(this.moveEvent,this.handleMove),this.$document.on(this.endEvent,this.handleEnd),!((" "+e.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass)>-1)){var t=this.getRelativePosition(this.$range[0],e),a=this.getPositionFromNode(this.$handle[0])-this.getPositionFromNode(this.$range[0]);this.setPosition(t-this.grabX),t>=a&&t<a+this.handleWidth&&(this.grabX=t-a)}},r.prototype.handleMove=function(e){e.preventDefault();var t=this.getRelativePosition(this.$range[0],e);this.setPosition(t-this.grabX)},r.prototype.handleEnd=function(e){e.preventDefault(),this.$document.off(this.moveEvent,this.handleMove),this.$document.off(this.endEvent,this.handleEnd);var t=this.getRelativePosition(this.$range[0],e);this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(t-this.grabX,this.value)},r.prototype.cap=function(e,t,a){return e<t?t:e>a?a:e},r.prototype.setPosition=function(e){var t,a;t=this.getValueFromPosition(this.cap(e,0,this.maxHandleX))/this.step*this.step,a=this.getPositionFromValue(t),this.$fill[0].style.width=a+this.grabX+"px",this.$handle[0].style.left=a+"px",this.setValue(t),this.position=a,this.value=t,this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(a,t)},r.prototype.getPositionFromNode=function(e){for(var t=0;null!==e;)t+=e.offsetLeft,e=e.offsetParent;return t},r.prototype.getRelativePosition=function(e,t){return(t.pageX||t.originalEvent.clientX||t.originalEvent.touches[0].clientX||t.currentPoint.x)-this.getPositionFromNode(e)},r.prototype.getPositionFromValue=function(e){var t,a;return t=(e-this.min)/(this.max-this.min),a=t*this.maxHandleX},r.prototype.getValueFromPosition=function(e){var t,a;return t=e/(this.maxHandleX||1),a=this.step*Math.ceil((t*(this.max-this.min)+this.min)/this.step),Number(a.toFixed(2))},r.prototype.setValue=function(e){e!==this.value&&this.$element.val(e).trigger("change",{origin:n})},r.prototype.destroy=function(){this.$document.off(this.startEvent,"#"+this.identifier,this.handleDown),this.$element.off("."+n).removeAttr("style").removeData("plugin_"+n),this.$range&&this.$range.length&&this.$range[0].parentNode.removeChild(this.$range[0]),o.splice(o.indexOf(this.$element[0]),1),o.length||this.$window.off("."+n)},e.fn[n]=function(t){return this.each(function(){var a=e(this),i=a.data("plugin_"+n);i||(a.data("plugin_"+n,i=new r(this,t)),o.push(this)),"string"==typeof t&&i[t]()})}}),function(e){"use strict";var t={init:function(a){return this.each(function(){this.self=e(this),t.destroy.call(this.self),this.opt=e.extend(!0,{},e.fn.raty.defaults,a),t._adjustCallback.call(this),t._adjustNumber.call(this),"img"!==this.opt.starType&&t._adjustStarType.call(this),t._adjustPath.call(this),t._createStars.call(this),this.opt.cancel&&t._createCancel.call(this),this.opt.precision&&t._adjustPrecision.call(this),t._createScore.call(this),t._apply.call(this,this.opt.score),t._target.call(this,this.opt.score),this.opt.readOnly?t._lock.call(this):(this.style.cursor="pointer",t._binds.call(this)),this.self.data("options",this.opt)})},_adjustCallback:function(){for(var e=["number","readOnly","score","scoreName"],t=0;t<e.length;t++)"function"==typeof this.opt[e[t]]&&(this.opt[e[t]]=this.opt[e[t]].call(this))},_adjustNumber:function(){this.opt.number=t._between(this.opt.number,1,this.opt.numberMax)},_adjustPath:function(){this.opt.path=this.opt.path||"",this.opt.path&&"/"!==this.opt.path.charAt(this.opt.path.length-1)&&(this.opt.path+="/")},_adjustPrecision:function(){this.opt.half=!0,this.opt.targetType="score"},_adjustStarType:function(){this.opt.path="";for(var e=["cancelOff","cancelOn","starHalf","starOff","starOn"],t=0;t<e.length;t++)this.opt[e[t]]=this.opt[e[t]].replace(".","-")},_apply:function(e){t._fill.call(this,e),e&&(e>0&&this.score.val(t._between(e,0,this.opt.number)),t._roundStars.call(this,e))},_between:function(e,t,a){return Math.min(Math.max(parseFloat(e),t),a)},_binds:function(){this.cancel&&(t._bindOverCancel.call(this),t._bindClickCancel.call(this),t._bindOutCancel.call(this)),t._bindOver.call(this),t._bindClick.call(this),t._bindOut.call(this)},_bindClick:function(){var t=this;t.stars.on("click.raty",function(a){var i=e(this);t.score.val(t.opt.half||t.opt.precision?t.self.data("score"):this.alt||i.data("alt")),t.opt.click&&t.opt.click.call(t,+t.score.val(),a)})},_bindClickCancel:function(){var e=this;e.cancel.on("click.raty",function(t){e.score.removeAttr("value"),e.opt.click&&e.opt.click.call(e,null,t)})},_bindOut:function(){var e=this;e.self.on("mouseleave.raty",function(a){var i=+e.score.val()||void 0;t._apply.call(e,i),t._target.call(e,i,a),e.opt.mouseout&&e.opt.mouseout.call(e,i,a)})},_bindOutCancel:function(){var t=this;t.cancel.on("mouseleave.raty",function(a){var i=e(this),r=t.opt.path+t.opt.cancelOff;if("img"===t.opt.starType)i.attr("src",r);else{var n=t.opt.path+t.opt.cancelOn;i.removeClass(n).addClass(r)}if(t.opt.mouseout){var o=+t.score.val()||void 0;t.opt.mouseout.call(t,o,a)}})},_bindOver:function(){var e=this,a=e.opt.half?"mousemove.raty":"mouseover.raty";e.stars.on(a,function(a){var i=t._getScoreByPosition.call(e,a,this);t._fill.call(e,i),e.opt.half&&(t._roundStars.call(e,i),e.self.data("score",i)),t._target.call(e,i,a),e.opt.mouseover&&e.opt.mouseover.call(e,i,a)})},_bindOverCancel:function(){var a=this;a.cancel.on("mouseover.raty",function(i){var r=a.opt.path+a.opt.cancelOn,n=e(this),o=a.opt.path+a.opt.starOff;if("img"===a.opt.starType)n.attr("src",r),a.stars.attr("src",o);else{a.stars.attr("class",o);var s=a.opt.path+a.opt.cancelOff;n.removeClass(s).addClass(r).css("color",a.opt.starColor)}t._target.call(a,null,i),a.opt.mouseover&&a.opt.mouseover.call(a,null)})},_buildScoreField:function(){return e("<input />",{name:this.opt.scoreName,type:"hidden"}).appendTo(this)},_createCancel:function(){var t=this.opt.path+this.opt.cancelOff,a=e("<"+this.opt.starType+" />",{title:this.opt.cancelHint,"class":"raty-cancel"}).css("marginRight",this.opt.space?this.opt.spaceWidth+"px":"0");"img"===this.opt.starType?a.attr({src:t,alt:"x"}):a.attr("data-alt","x").addClass(t),"left"===this.opt.cancelPlace?this.self.prepend("&#160;").prepend(a):this.self.append("&#160;").append(a),this.cancel=a},_createScore:function(){var a=e(this.opt.targetScore);this.score=a.length?a:t._buildScoreField.call(this)},_createStars:function(){for(var a=1;a<=this.opt.number;a++){var i,r=this.opt.score&&this.opt.score>=a?"starOn":"starOff",n=t._getHint.call(this,a);r=this.opt.path+this.opt[r],i="img"!==this.opt.starType?{"data-alt":a,"class":r}:{src:r,alt:a},i.title=n,e("<"+this.opt.starType+" />",i).css("marginRight",a<this.opt.number&&this.opt.space?this.opt.spaceWidth+"px":"0").appendTo(this),this.opt.space}this.stars=this.self.children(this.opt.starType)},_error:function(t){e(this).text(t),e.error(t)},_fill:function(e){for(var a=0,i=1;i<=this.stars.length;i++){var r,n=this.stars.eq(i-1),o=t._turnOn.call(this,i,e);if(this.opt.iconRange&&this.opt.iconRange.length>a){var s=this.opt.iconRange[a];r=t._getIconRange.call(this,s,o),i<=s.range&&("img"===this.opt.starType?n.attr("src",r):n.attr("class",r)),i===s.range&&a++}else r=this.opt.path+this.opt[o?"starOn":"starOff"],"img"===this.opt.starType?n.attr("src",r):n.attr("class",r),o?n.css("color",this.opt.starColor):n.css("color","")}},_getIconRange:function(e,t){return this.opt.path+(t?e.on||this.opt.starOn:e.off||this.opt.starOff)},_getScoreByPosition:function(a,i){var r=e(i),n=parseInt(i.alt||r.data("alt"),10);if(this.opt.half){var o=t._getSize.call(this),s=parseFloat((a.pageX-r.offset().left)/o);n=this.opt.precision?n-1+s:n-1+(s>.5?1:.5)}return n},_getSize:function(){var e;return e="img"===this.opt.starType?this.stars[0].width:parseFloat(this.stars.eq(0).css("font-size")),e||t._error.call(this,"Could not be possible get the icon size!"),e},_turnOn:function(e,t){return this.opt.single?e===t:e<=t},_getHint:function(e){var t=this.opt.hints[e-1];return""===t?"":t||e},_lock:function(){var e=parseInt(this.score.val(),10),a=e?t._getHint.call(this,e):this.opt.noRatedMsg;this.style.cursor="",this.title=a,this.score.prop("readonly",!0),this.stars.prop("title",a),this.cancel&&this.cancel.hide(),this.self.data("readonly",!0)},_roundStars:function(e){var t=(e%1).toFixed(2);if(t>this.opt.round.down){var a="starOn";this.opt.halfShow&&t<this.opt.round.up?a="starHalf":t<this.opt.round.full&&(a="starOff");var i=this.stars[Math.ceil(e)-1];"img"===this.opt.starType?i.src=this.opt.path+this.opt[a]:i.style.className=this.opt[a]}},_target:function(a,i){if(this.opt.target){var r=e(this.opt.target);r.length||t._error.call(this,"Target selector invalid or missing!");var n=i&&"mouseover"===i.type;if(void 0===a)a=this.opt.targetText;else if(null===a)a=n?this.opt.cancelHint:this.opt.targetText;else{"hint"===this.opt.targetType?a=t._getHint.call(this,Math.ceil(a)):this.opt.precision&&(a=parseFloat(a).toFixed(1));var o=i&&"mousemove"===i.type;n||o||this.opt.targetKeep||(a=this.opt.targetText)}a&&(a=this.opt.targetFormat.toString().replace("{score}",a)),r.is(":input")?r.val(a):r.html(a)}},_unlock:function(){this.style.cursor="pointer",this.removeAttribute("title"),this.score.removeAttr("readonly"),this.self.data("readonly",!1);for(var e=0;e<this.opt.number;e++)this.stars[e].title=t._getHint.call(this,e+1);this.cancel&&this.cancel.css("display","")},cancel:function(a){return this.each(function(){var i=e(this);i.data("readonly")!==!0&&(t[a?"click":"score"].call(i,null),this.score.removeAttr("value"))})},click:function(a){return this.each(function(){e(this).data("readonly")!==!0&&(t._apply.call(this,a),this.opt.click&&this.opt.click.call(this,a,e.Event("click")),t._target.call(this,a))})},destroy:function(){return this.each(function(){var t=e(this),a=t.data("raw");a?t.off(".raty").empty().css({cursor:a.style.cursor}).removeData("readonly"):t.data("raw",t.clone()[0])})},getScore:function(){var e,t=[];return this.each(function(){e=this.score.val(),t.push(e?+e:void 0)}),t.length>1?t:t[0]},move:function(a){return this.each(function(){var i=parseInt(a,10),r=e(this).data("options"),n=(+a).toFixed(1).split(".")[1];i>=r.number&&(i=r.number-1,n=10);var o=t._getSize.call(this),s=o/10,l=e(this.stars[i]),d=l.offset().left+s*parseInt(n,10),c=e.Event("mousemove",{pageX:d});l.trigger(c)})},readOnly:function(a){return this.each(function(){var i=e(this);i.data("readonly")!==a&&(a?(i.off(".raty").children("img").off(".raty"),t._lock.call(this)):(t._binds.call(this),t._unlock.call(this)),i.data("readonly",a))})},reload:function(){return t.set.call(this,{})},score:function(){var a=e(this);return arguments.length?t.setScore.apply(a,arguments):t.getScore.call(a)},set:function(t){return this.each(function(){var a=e(this),i=a.data("options"),r=e.extend({},i,t);a.raty(r)})},setScore:function(a){return this.each(function(){e(this).data("readonly")!==!0&&(t._apply.call(this,a),t._target.call(this,a))})}};e.fn.raty=function(a){return t[a]?t[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void e.error("Method "+a+" does not exist!"):t.init.apply(this,arguments)},e.fn.raty.defaults={cancel:!1,cancelHint:"Cancel this rating!",cancelOff:"raty-cancel-off",cancelOn:"raty-cancel-on",cancelPlace:"left",click:void 0,half:!1,halfShow:!0,hints:["1"],iconRange:void 0,mouseout:void 0,mouseover:void 0,noRatedMsg:"Not rated yet!",number:5,numberMax:20,path:void 0,precision:!1,readOnly:!1,round:{down:.25,full:.6,up:.76},score:void 0,scoreName:"score",single:!1,space:!0,spaceWidth:3,starColor:"#ff00aa",starHalf:"star-half.png",starOff:"raty-dot-off",starOn:"raty-dot-on",starType:"img",target:void 0,targetFormat:"{score}",targetKeep:!1,targetScore:void 0,targetText:"",targetType:"hint"}}(jQuery),jQuery(function(e){e("body").on("click",".cf-toggle-group-buttons a",function(){var t=e(this),a=t.closest(".caldera-config-field"),i=a.find('[data-ref="'+t.attr("id")+'"]');a.find(".btn").removeClass(t.data("active")).addClass(t.data("default")),t.addClass(t.data("active")).removeClass(t.data("default")),i.prop("checked",!0).trigger("change")})}),Handlebars.registerHelper("even",function(e){var t=e.data.index/2;return t===Math.ceil(t)&&e.fn(this)}),Handlebars.registerHelper("odd",function(e){var t=e.data.index/2;return t!==Math.ceil(t)&&e.fn(this)}),Handlebars.registerHelper("json",function(e){return JSON.stringify(e)}),function(e){var t={};e.fn.baldrick.registerhelper("handlebars",{bind:function(a,i){var r=a.filter("[data-template-url]");r.length&&r.each(function(){var a=e(this);if("undefined"==typeof t[a.data("templateUrl")]){if(t[a.data("templateUrl")]=!0,"undefined"!=typeof Storage){var i,r;a.data("cacheLocal")?(r=a.data("cacheLocal"),i=localStorage.getItem("handlebars_"+r)):a.data("cacheSession")&&(r=a.data("cacheSession"),i=sessionStorage.getItem("handlebars_"+r))}i?t[a.data("templateUrl")]=Handlebars.compile(i):e.get(a.data("templateUrl"),function(e,i,r){if("undefined"!=typeof Storage){var n;a.data("cacheLocal")?(n=a.data("cacheLocal"),localStorage.setItem("handlebars_"+n,r.responseText)):a.data("cacheSession")&&(n=a.data("cacheSession"),sessionStorage.setItem("handlebars_"+n,r.responseText))}t[a.data("templateUrl")]=Handlebars.compile(r.responseText)})}})},request_params:function(e,t,a){if((a.trigger.data("templateUrl")||a.trigger.data("template"))&&"object"==typeof Handlebars)return e.dataType="json",e},filter:function(a,i){return a.params.trigger.data("templateUrl")?"function"==typeof t[a.params.trigger.data("templateUrl")]&&(a.data=t[a.params.trigger.data("templateUrl")](a.data)):a.params.trigger.data("template")&&("function"==typeof t[a.params.trigger.data("template")]?a.data=t[a.params.trigger.data("template")](a.data):e(a.params.trigger.data("template"))&&(t[a.params.trigger.data("template")]=Handlebars.compile(e(a.params.trigger.data("template")).html()),a.data=t[a.params.trigger.data("template")](a.data))),a}})}(jQuery),function(e){if(!t){var t={},a={},i={_plugins:{},load:{},bind:{},event:function(e,t){return e},pre_filter:function(e){return e.data},filter:function(e){return e},target:function(e){if("string"==typeof e.params.success?"function"==typeof window[e.params.success]&&window[e.params.success](e):"function"==typeof e.params.success&&e.params.success(e),e.params.target)if(e.params.target.is("textarea,input")&&"object"==typeof e.data?e.params.target.val(JSON.stringify(e.data)).trigger("change"):e.params.target[e.params.targetInsert](e.data),"string"==typeof e.params.callback){if("function"==typeof window[e.params.callback])return window[e.params.callback](e)}else if("function"==typeof e.params.callback)return e.params.callback(e)},request_data:function(e){return e.data},request:function(i){if((i.params.trigger.data("cacheLocal")||i.params.trigger.data("cacheSession"))&&!i.params.trigger.data("cachePurge")){var r;if(i.params.trigger.data("cacheLocal")?r=i.params.trigger.data("cacheLocal"):i.params.trigger.data("cacheSession")&&(r=i.params.trigger.data("cacheSession")),"undefined"!=typeof t[r])return{data:t[r]};if("undefined"!=typeof Storage){var n;if(i.params.trigger.data("cacheLocal")?n=localStorage.getItem(r):i.params.trigger.data("cacheSession")&&(n=sessionStorage.getItem(r)),n){try{n=JSON.parse(n)}catch(o){n=n}return{data:n}}}}return a[i.params.trigger.prop("id")]&&a[i.params.trigger.prop("id")].abort(),a[i.params.trigger.prop("id")]=e.ajax(i.request),a[i.params.trigger.prop("id")]},request_complete:function(e){e.params.complete(e),e.params.loadElement.removeClass(e.params.loadClass),a[e.params.trigger.prop("id")]&&delete a[e.params.trigger.prop("id")]},request_error:function(e){e.params.error(e),e.params.complete(e.jqxhr,e.textStatus)},refresh:function(t,a){e(a.triggerClass).baldrick(a)}};e.fn.baldrick=function(t){var a=function(e,t,a){var i;for(var r in s.helpers._plugins)if("function"==typeof s.helpers._plugins[r][e]&&(i=s.helpers._plugins[r][e](t,s,a),"undefined"!=typeof i&&(t=i),t===!1))return!1;if("function"==typeof s.helpers[e]&&(i=s.helpers[e](t,s,a),"undefined"!=typeof i&&(t=i),!t))return!1;for(var n in s.helpers._plugins)if("function"==typeof s.helpers._plugins[n]["after_"+e]&&(i=s.helpers._plugins[n]["after_"+e](t,s,a),"undefined"!=typeof i&&(t=i),t===!1))return!1;return t},r=function(t){var a={},i=t.find("input,radio,checkbox,select,textarea,file"),r={};if(i.length){for(var n=0;n<i.length;n++)if(null!==i[n].getAttribute("name")){for(var o=e(i[n]),s=o.prop("name").replace(/\[/gi,":").replace(/\]/gi,""),l=s.split(":"),d=o.is(":checkbox,:radio")?o.filter(":checked").val():o.val(),c={},u=l.length-1;u>=0;u--){var p=l[u];if(0===p.length&&("undefined"==typeof r[l[u-1]]?r[l[u-1]]=0:r[l[u-1]]+=1,p=r[l[u-1]]),u===l.length-1)c[p]=d;else{var h=c;c={},c[p]=h}}e.extend(!0,a,c)}return a}},n=this.selector,o=this.not("._tisBound");o.addClass("_tisBound"),"undefined"!=typeof t&&"object"==typeof t.helper&&(i._plugins._params_helpers_=t.helper);var s=e.extend(!0,t,{helpers:i},{triggerClass:n}),l=function(){return!0},d={init:l,before:l,callback:!1,success:!1,complete:l,error:l};for(var c in d)"string"==typeof s[c]?d[c]="function"==typeof window[s[c]]?window[s[c]]:l:"function"==typeof s[c]&&(d[c]=s[c]);return o=a("bind",o),o===!1?this:a("ready",o.each(function(t){this.id||(this.id="baldrick_trigger_"+((new Date).getTime()+t));var i=e(this),n=i.data("event")?i.data("event"):s.event?s.event:i.is("form")?"submit":"click";return i.on(n,function(t){var i=e(a("event",this,t));if(i.data("for")){var l=e(i.data("for")),c=e.extend({},l.data(),i.data());return delete c["for"],l.data(c),l.is("form")?(l.submit(),this):l.trigger(l.data("event")?l.data("event"):n)}if(i.is("form")&&!i.data("request")&&i.attr("action")&&i.data("request",i.attr("action")),i.is("a")&&!i.data("request")&&i.attr("href")&&(i.attr("href").indexOf("#")<0?i.data("request",i.attr("href")):i.data("href",i.attr("href"))),(i.data("before")&&"function"==typeof window[i.data("before")]?window[i.data("before")](this,t):d.before(this,t))===!1)return void e(s.triggerClass).baldrick(s);if((i.data("init")&&"function"==typeof window[i.data("init")]?window[i.data("init")](this,t):d.init(this,t))===!1)return void e(s.triggerClass).baldrick(s);var u={trigger:i,callback:i.data("callback")?"function"==typeof window[i.data("callback")]?window[i.data("callback")]:i.data("callback"):d.callback,success:i.data("success")?"function"==typeof window[i.data("success")]?window[i.data("success")]:i.data("success"):d.success,method:i.data("method")?i.data("method"):i.attr("method")?i.attr("method"):s.method?s.method:"GET",dataType:i.data("type")?i.data("type"):!!s.dataType&&s.dataType,timeout:i.data("timeout")?i.data("timeout"):12e4,target:i.data("target")?"_parent"===i.data("target")?i.parent():e("_self"===i.data("target")?i:i.data("target")):e(s.target?s.target:"<html>"),targetInsert:i.data("targetInsert")?"replace"===i.data("targetInsert")?"replaceWith":i.data("targetInsert"):s.targetInsert?"replace"===s.targetInsert?"replaceWith":s.targetInsert:"html",loadClass:i.data("loadClass")?i.data("loadClass"):s.loadClass?s.loadClass:"loading",activeClass:i.data("activeClass")?i.data("activeClass"):s.activeClass?s.activeClass:"active",activeElement:i.data("activeElement")?"_parent"===i.data("activeElement")?i.parent():e(i.data("activeElement")):s.activeElement?"_parent"===s.activeElement?i.parent():e(s.activeElement):i,cache:i.data("cache")?i.data("cache"):!!s.cache&&s.cache,complete:i.data("complete")&&"function"==typeof window[i.data("complete")]?window[i.data("complete")]:d.complete,error:i.data("error")&&"function"==typeof window[i.data("error")]?window[i.data("error")]:d.error,resultSelector:!1,event:n};if(u.url=i.data("request")?i.data("request"):s.request?s.request:u.callback,u.loadElement=i.data("loadElement")?"_parent"===i.data("loadElement")?i.parent():e(i.data("loadElement")):s.loadElement&&e(s.loadElement)?e(s.loadElement):u.target,u=a("params",u),u===!1)return!1;if(t.preventDefault(),"function"==typeof window[u.url]){var p=window[u.url](u,n);return p=a("pre_filter",{data:p,params:u}),p=a("filter",{data:p,rawData:p,params:u}),a("target",p),a("refresh",{params:u}),a("request_complete",{jqxhr:null,textStatus:"complete",request:k,params:u}),this}try{if(e(u.url).length)var p=e(u.url).is("input,select,radio,checkbox,file,textarea")?e(u.url).val():e(u.url).is("form")?r(e(u.url)):e(u.url).html()}catch(t){}if("undefined"!=typeof p){if("json"===u.dataType)try{p=JSON.parse(p)}catch(t){}p=a("pre_filter",{data:p,params:u}),p=a("filter",{data:p,rawData:p,params:u}),a("target",p),a("refresh",{params:u}),a("request_complete",{jqxhr:null,textStatus:"complete",request:k,params:u});return this}switch(typeof u.url){case"function":return u.url(this,t);case"boolean":case"object":return;case"string":if(u.url.indexOf(" ")>-1){var h=u.url.split(" ");u.url=h[0],u.resultSelector=h[1]}}i.data("group")?e('._tisBound[data-group="'+i.data("group")+'"]').each(function(){
var t=e(this),a=t.data("activeElement")?"_parent"===t.data("activeElement")?t.parent():e(t.data("activeElement")):s.activeElement?"_parent"===s.activeElement?i.parent():e(s.activeElement):t;a.removeClass(t.data("activeClass")?t.data("activeClass"):s.activeClass?s.activeClass:u.activeClass)}):e("._tisBound:not([data-group])").each(function(){var t=e(this),a=t.data("activeElement")?"_parent"===t.data("activeElement")?t.parent():e(t.data("activeElement")):s.activeElement?"_parent"===s.activeElement?i.parent():e(s.activeElement):t;a.removeClass(t.data("activeClass")?t.data("activeClass"):s.activeClass?s.activeClass:u.activeClass)});u.activeElement.addClass(u.activeClass),u.loadElement.addClass(u.loadClass);var f;if("undefined"==typeof FormData||!i.is("input:file")&&"POST"!==u.method){var g=i.serializeArray(),v=u.trigger.data(),m=[];s.data&&(v=e.extend(s.data,v)),g.length&&(e.each(g,function(e,t){m.push(t)}),u.requestData=r(i)),u.data&&(v=e.extend(v,u.data)),f=v,u.requestData=e.extend(i.data(),u.requestData)}else{u.method="POST",u.contentType=!1,u.processData=!1,u.cache=!1,u.xhrFields={onprogress:function(e){e.lengthComputable}},f=i.is("form")?new FormData(i[0]):new FormData,i.is("input,select,textarea")&&i.data("_value",i.val());for(var y in u.trigger.data())f.append(y,u.trigger.data(y));if(u.data&&f.append("data",JSON.stringify(u.data)),i.is("input,select,textarea"))if(i.is("input:file"))if(i[0].files.length>1)for(var _=0;_<i[0].files.length;_++)f.append(i.prop("name"),i[0].files[_]);else f.append(i.prop("name"),i[0].files[0]);else i.is("input:checkbox")||i.is("input:radio")?i.prop("checked")&&f.append(i.prop("name"),i.val()):f.append(i.prop("name"),i.val())}var k={url:u.url,data:a("request_data",{data:f,params:u}),cache:u.cache,timeout:u.timeout,type:u.method,success:function(t,i,r){if(u.resultSelector)if("object"==typeof t){for(var n=u.resultSelector.replace(/\[/g,".").replace(/\]/g,"").split("."),o=t,s=0;s<n.length;s++)o=o[n[s]];t=o}else if("string"==typeof t){var l=e(u.resultSelector,e("<html>").html(t));1===l.length?t=e("<html>").html(l).html():(t=e("<html>"),l.each(function(){t.append(this)}),t=t.html())}var d=t;if(u.trigger.data("cacheLocal")||u.trigger.data("cacheSession")){var c;if(u.trigger.data("cacheLocal")?c=u.trigger.data("cacheLocal"):u.trigger.data("cacheSession")&&(c=u.trigger.data("cacheSession")),"undefined"!=typeof Storage)if(u.trigger.data("cacheLocal"))try{localStorage.setItem(c,r.responseText)}catch(p){console.log(p)}else if(u.trigger.data("cacheSession"))try{sessionStorage.setItem(c,r.responseText)}catch(p){console.log(p)}e(window).trigger("baldrick.cache",c)}t=a("pre_filter",{data:t,request:k,params:u,xhr:r}),t=a("filter",{data:t,rawData:d,request:k,params:u,xhr:r}),a("target",t)},complete:function(e,t){a("request_complete",{jqxhr:e,textStatus:t,request:k,params:u}),a("refresh",{jqxhr:e,textStatus:t,request:k,params:u}),i.data("once")&&i.off(n).removeClass("_tisBound")},error:function(e,t,i){a("request_error",{jqxhr:e,textStatus:t,error:i,request:k,params:u})}};if(u.dataType&&(k.dataType=u.dataType),"undefined"!=typeof u.contentType&&(k.contentType=u.contentType),"undefined"!=typeof u.processData&&(k.processData=u.processData),"undefined"!=typeof u.xhrFields&&(k.xhrFields=u.xhrFields),k=a("request_params",k,u),k===!1)return o;var b=a("request",{request:k,params:u});if(b.data){var p=b.data;a("target",a("filter",a("pre_filter",{data:p,request:k,params:u}))),a("request_complete",{jqxhr:!1,textStatus:!0,request:k,params:u}),a("refresh",{jqxhr:!1,textStatus:!0,request:k,params:u})}}),(i.data("autoload")||i.data("poll"))&&(i.data("delay")?setTimeout(function(e,t){return e.trigger(t)},i.data("delay"),i,n):i.trigger(n)),i.data("poll")&&(i.data("delay")?setTimeout(function(e,t){return setInterval(function(e,t){return e.trigger(t)},e.data("poll"),e,t)},i.data("delay")):setInterval(function(e,t){return e.trigger(t)},i.data("poll"),i,n)),this}))},e.fn.baldrick.cacheObject=function(e,a){t[e]=a},e.fn.baldrick.registerhelper=function(t,a,r){var n={};"object"==typeof a?(n[t]=a,i._plugins=e.extend(!0,n,i._plugins)):"string"==typeof a&&"string"==typeof t&&"function"==typeof r&&(n[a]={},n[a][t]=r,i._plugins=e.extend(!0,n,i._plugins))}}}(jQuery);
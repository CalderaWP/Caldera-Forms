var resBaldrickTriggers;jQuery(function(a){function b(a,b,c){for(var d in a){var e=b.find('[data-field="'+d+'"]'),f=e.parent();if(e.length){f.is("label")&&(f=f.parent(),(f.hasClass("checkbox")||f.hasClass("radio"))&&(f=f.parent()));var g=f.find(".help-block").not(".caldera_ajax_error_block");f.addClass("has-error").addClass("caldera_ajax_error_wrap"),g.length&&g.hide(),f.append('<span class="help-block caldera_ajax_error_block">'+a[d]+"</span>")}else c.html('<p class="alert alert-danger ">'+a[d]+"</p>")}}var c=[],d=function(a,b,d){var e=jQuery("#progress-file-"+b),f=jQuery("."+b+" .file-size");c.push(1),cf_uploader_filelist[b].state=2,jQuery.ajax({xhr:function(){var a=new window.XMLHttpRequest;return a.upload.addEventListener("progress",function(a){if(a.lengthComputable){var b=a.loaded/a.total*100;e.width(b+"%"),f.html(size_format(a.loaded)+" / "+size_format(a.total))}},!1),a.addEventListener("progress",function(a){if(a.lengthComputable){a.loaded,a.total}},!1),a},url:a.data("request")+"/upload/",type:"POST",data:d,processData:!1,contentType:!1,success:function(d,e,f){if(d.success&&!0===d.success){c.pop();var g=jQuery('[data-file="'+b+'"]');g.next().addClass("file-uploaded"),g.remove(),cf_uploader_filelist[b].state=3,a.submit()}else if(d.data&&!d.success)return jQuery("."+b).addClass("has-error"),a.find(":submit").prop("disabled",!1),a.find(".cf-uploader-trigger").slideDown(),void jQuery("."+b+" .file-error").html(d.data)},error:function(b,c,d){a.data("postDisable")||buttons.prop("disabled",!1)}})};(resBaldrickTriggers=function(){var a=function(a){return jQuery("#caldera_notices_"+a.params.trigger.data("instance"))},e=function(a){return jQuery("#caldera-forms-breadcrumb_"+a.params.trigger.data("instance"))},f=function(a){var b=e(a);b.length&&b.show().attr("aria-hidden",!1).css("visibility","visible")},g=function(a){var b=e(a);b.length&&b.show().attr("aria-hidden",!0).css("visibility","hidden")};jQuery(".cfajax-trigger").baldrick({request:"./",method:"POST",init:function(a,e){e.preventDefault();var f=jQuery(a),g=f.find(":submit"),h=[];if(jQuery(document).trigger("cf.ajax.request",{$form:f,formIdAttr:f.attr("id"),displayFieldErrors:b,fieldsBlocking:h,$notice:jQuery("#caldera_notices_"+f.data("instance"))}),"object"==typeof window.cf2)var i=window.cf2[f.attr("id")];if("object"==typeof i){if(i.hasOwnProperty("pending")&&0!==i.pending.length)return!1;if(i.hasOwnProperty("fieldsBlocking")&&0!==i.fieldsBlocking.length)return!1}if(f.data("_cf_manual"))return f.find('[name="cfajax"]').remove(),!1;if(f.data("postDisable")||g.prop("disabled",!0),"object"==typeof cf_uploader_filelist){f.find(".cf-uploader-trigger").slideUp();var j=!1,k=c.length;for(var l in cf_uploader_filelist)if(!(cf_uploader_filelist[l].state>1||0===cf_uploader_filelist[l].state)){j=!0;var m=new FormData,n=l,o=jQuery("#"+n.split("_file_")[0]);if(m.append(o.data("field"),cf_uploader_filelist[l].file),m.append("field",o.data("field")),m.append("control",o.data("controlid")),d(f,n,m),o.val(""),o.attr("type","hidden"),o.val(o.data("controlid")),1===++k)break}if(!0===j||c.length)return!1}},error:function(b){if(404===b.jqxhr.status)this.trigger.data("_cf_manual",!0).trigger("submit");else{var c=a(b);b.jqxhr.responseJSON.data.html&&(c.html(b.jqxhr.responseJSON.data.html),jQuery("html,body").animate({scrollTop:c.offset().top-c.outerHeight()},300))}},callback:function(c){c.params.trigger.find(":submit").prop("disabled",!1);var d=a(c);if(c.params.trigger.data("customCallback")&&"function"==typeof window[c.params.trigger.data("customCallback")]&&window[c.params.trigger.data("customCallback")](c.data),c.params.trigger.data("inhibitnotice")||(jQuery(".caldera_ajax_error_wrap").removeClass("caldera_ajax_error_wrap").removeClass("has-error"),jQuery(".caldera_ajax_error_block").remove(),"complete"===c.data.status||"success"===c.data.type?(g(c),c.data.html&&c.params.target.html(c.data.html),c.params.trigger.data("hiderows")&&c.params.trigger.find("div.row").remove()):"preprocess"===c.data.status?(f(c),c.params.target.html(c.data.html)):"error"===c.data.status&&(f(c),c.params.target.html(c.data.html))),"complete"!==c.data.status&&"success"!==c.data.type||c.data.entry||c.params.trigger[0].reset(),c.data.url&&(c.params.trigger.hide(),window.location=c.data.url),c.params.trigger.find(".cf-uploader-trigger").slideDown(),c.data.fields){var e=c.params.trigger;b(c.data.fields,e,d)}if("undefined"!=c.data.scroll){var h=document.getElementById(c.data.scroll);if(null!=h){var i=jQuery(h);jQuery("html,body").animate({scrollTop:i.offset().top-i.outerHeight()-12},300)}}jQuery(document).trigger("cf.submission",c),jQuery(document).trigger("cf."+c.data.type)}})})()});var resBaldrickTriggers;jQuery(function(a){var b=[],c=function(c,d,e){var f=a("#progress-file-"+d),g=a("."+d+" .file-size");b.push(1),cf_uploader_filelist[d].state=2,a.ajax({xhr:function(){var a=new window.XMLHttpRequest;return a.upload.addEventListener("progress",function(a){if(a.lengthComputable){var b=a.loaded/a.total*100;f.width(b+"%"),g.html(size_format(a.loaded)+" / "+size_format(a.total))}},!1),a.addEventListener("progress",function(a){a.lengthComputable&&(a.loaded,a.total)},!1),a},url:c.data("request")+"/upload/",type:"POST",data:e,processData:!1,contentType:!1,success:function(e,f,g){if(e.success&&!0===e.success){b.pop();var h=a('[data-file="'+d+'"]');h.next().addClass("file-uploaded"),h.remove(),cf_uploader_filelist[d].state=3,c.submit()}else if(e.data&&!e.success)return a("."+d).addClass("has-error"),c.find(":submit").prop("disabled",!1),c.find(".cf-uploader-trigger").slideDown(),void a("."+d+" .file-error").html(e.data)},error:function(a,b,d){c.data("postDisable")||buttons.prop("disabled",!1)}})};(resBaldrickTriggers=function(){a(".cfajax-trigger").baldrick({request:"./",method:"POST",init:function(d,e){e.preventDefault();var f=a(d),g=f.find(":submit");if(f.data("_cf_manual"))return f.find('[name="cfajax"]').remove(),!1;if(f.data("postDisable")||g.prop("disabled",!0),"object"==typeof cf_uploader_filelist){f.find(".cf-uploader-trigger").slideUp();var h=!1,i=b.length;for(var j in cf_uploader_filelist)if(!(cf_uploader_filelist[j].state>1||0===cf_uploader_filelist[j].state)){h=!0;var k=new FormData,l=j,m=a("#"+l.split("_file_")[0]);if(k.append(m.data("field"),cf_uploader_filelist[j].file),k.append("field",m.data("field")),k.append("control",m.data("controlid")),c(f,l,k),1===++i)break}if(!0===h||b.length)return!1}},error:function(a){404===a.jqxhr.status&&this.trigger.data("_cf_manual",!0).trigger("submit")},callback:function(b){if(b.params.trigger.find(":submit").prop("disabled",!1),b.params.trigger.data("instance"),b.params.trigger.data("customCallback")&&"function"==typeof window[b.params.trigger.data("customCallback")]&&window[b.params.trigger.data("customCallback")](b.data),b.params.trigger.data("inhibitnotice")||(a(".caldera_ajax_error_wrap").removeClass("caldera_ajax_error_wrap").removeClass("has-error"),a(".caldera_ajax_error_block").remove(),"complete"===b.data.status||"success"===b.data.type?(b.data.html&&b.params.target.html(b.data.html),b.params.trigger.data("hiderows")&&b.params.trigger.find("div.row").remove()):"preprocess"===b.data.status?b.params.target.html(b.data.html):"error"===b.data.status&&b.params.target.html(b.data.html)),"complete"!==b.data.status&&"success"!==b.data.type||b.data.entry||b.params.trigger[0].reset(),b.data.url&&(b.params.trigger.hide(),window.location=b.data.url),b.params.trigger.find(".cf-uploader-trigger").slideDown(),b.data.fields)for(var c in b.data.fields){var d=b.params.trigger.find('[data-field="'+c+'"]'),e=d.parent();e.is("label")&&(e=e.parent(),(e.hasClass("checkbox")||e.hasClass("radio"))&&(e=e.parent()));var f=e.find(".help-block").not(".caldera_ajax_error_block");e.addClass("has-error").addClass("caldera_ajax_error_wrap"),f.length&&f.hide(),e.append('<span class="help-block caldera_ajax_error_block">'+b.data.fields[c]+"</span>")}a(document).trigger("cf.submission",b),a(document).trigger("cf."+b.data.type)}})})()});
var calders_forms_check_conditions,calders_forms_init_conditions;!function(a){var b={};Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length>>>0,c=Number(arguments[1])||0;for(c=c<0?Math.ceil(c):Math.floor(c),c<0&&(c+=b);c<b;c++)if(c in this&&this[c]===a)return c;return-1}),cf_debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},calders_forms_check_conditions=function(c){function d(a){if(b[a])return b[a]}if("undefined"!=typeof caldera_conditionals&&void 0!==caldera_conditionals[c]){var e=a(document.getElementById(c)),f=function(a){return"object"==typeof window.cfstate&&window.cfstate.hasOwnProperty(a)?window.cfstate[a]:null}(c);for(var g in caldera_conditionals[c]){if(jQuery("#conditional_"+g).length){var h=caldera_conditionals[c][g].type,i=caldera_conditionals[c][g].group,j=[];for(var k in i){var l={},m=i[k];for(var n in m){var o=e.find('[data-field="'+m[n].field+'"]'),p=[],q="function"==typeof m[n].value?m[n].value():m[n].value;if(void 0!==m[n].selectors)for(var r in m[n].selectors){var s=new RegExp(r,"g");q=q.replace(s,a(m[n].selectors[r]).val())}if(l[n]=!1,o.is(":radio,:checkbox"))o=o.filter(":checked");else if(o.is("div"))o=jQuery("<input>").val(o.html());else if(!o.length){var t=e.find('[data-calc-field="'+m[n].field+'"]');t.length&&(o=e.find('[data-calc-field="'+m[n].field+'"]'))}if(o.length)for(var u=0;u<o.length;u++)p.push(o[u].value);else p.push(m[n].field);switch(m[n].compare){case"is":p.length&&p.indexOf(q.toString())>=0&&(l[n]=!0);break;case"isnot":p.length&&p.indexOf(q)<0&&(l[n]=!0);break;case">":case"greater":l[n]=parseFloat(p.reduce(function(a,b){return a+b}))>parseFloat(q);break;case"<":case"smaller":l[n]=parseFloat(p.reduce(function(a,b){return a+b}))<parseFloat(q);break;case"startswith":for(var u=0;u<p.length;u++)p[u].toLowerCase().substr(0,q.toLowerCase().length)===q.toLowerCase()&&(l[n]=!0);break;case"endswith":for(var u=0;u<p.length;u++)p[u].toLowerCase().substr(p[u].toLowerCase().length-q.toLowerCase().length)===q.toLowerCase()&&(l[n]=!0);break;case"contains":for(var u=0;u<p.length;u++)p[u].toLowerCase().indexOf(q)>=0&&(l[n]=!0)}}istrue=!0;for(var v in l)if(!1===l[v]){istrue=!1;break}j.push(istrue)}var w,x=jQuery("#conditional-"+g+"-tmpl").html(),y=jQuery("#conditional_"+g),z=jQuery('[data-field="'+g+'"]');if(j.length&&j.indexOf(!0)>=0?"show"===h?w="show":"hide"===h?w="hide":"disable"===h&&(w="disable"):w="show"===h?"hide":"disable"===h?"enable":"show","show"===w)y.html().length||(y.html(x).trigger("cf.add",{field:g}),jQuery(document).trigger("cf.add",{field:g}),function(b,c){var e,f=d(b);if(void 0!=f)if("object"==typeof f)for(var g in f)!0===f[g]&&(e=a(document.getElementById(g)),e.prop("checked",!0));else e=a("#"+b),e.val(f);if(e||(e=e=a(document.getElementById(b))),null!==c){if("object"==typeof f){var h=[];jQuery.each(f,function(b,c){c&&h.push(a("#"+b).val())}),f=h}c.rebind(b),c.mutateState(b,f)}}(g,f));else if("hide"===w)y.html().length&&(!function(c,d){var e=a(document.getElementById(c));if(e.length){var f=e.val();f&&(b[c]=f)}else{var g;e=a("."+c),b[c]={},e.each(function(d,e){g=a(e),g.prop("checked")?b[c][g.attr("id")]=!0:b[c][g.attr("id")]=!1})}null!==d&&d.unbind(c)}(g,f),z.val("").empty().prop("checked",!1),y.empty().trigger("cf.remove",{field:g}),jQuery(document).trigger("cf.remove",{field:g}));else if("enable"===w||"disable"===w){var A=jQuery("#"+g);"enable"==w?y.html().length?A.prop("disabled",!1):(y.html(x).trigger("cf.add",{field:g}),jQuery(document).trigger("cf.add").trigger("cf.enable",{field:g}),A.prop("disabled",!1)):y.html().length?A.prop("disabled","disabled",{field:g}):(y.html(x).trigger("cf.remove"),jQuery(document).trigger("cf.remove",{field:g}).trigger("cf.disable",{field:g}),A.prop("disabled","disabled",{field:g}))}}}}},calders_forms_init_conditions=function(){jQuery(".caldera_forms_form").on("change keyup","[data-field]",cf_debounce(function(b){var c=a(this).closest(".caldera_forms_form").prop("id");calders_forms_check_conditions(c)},10))},"undefined"!=typeof caldera_conditionals&&(calders_forms_init_conditions(),jQuery(".caldera_forms_form").find("[data-field]").first().trigger("change"))}(jQuery);
var calders_forms_check_conditions,calders_forms_init_conditions;!function(a){var b={},c={};Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length>>>0,c=Number(arguments[1])||0;for(c=c<0?Math.ceil(c):Math.floor(c),c<0&&(c+=b);c<b;c++)if(c in this&&this[c]===a)return c;return-1}),cf_debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},calders_forms_check_conditions=function(d){function e(a){if(b[a])return b[a]}function f(a){return"object"==typeof window.cfstate&&window.cfstate.hasOwnProperty(a)?window.cfstate[a]:null}function g(a,b,c){var d=f(c);d&&d.events().emit(function(){return"cf.conditionals."+a}(),{fieldIdAttr:b,formIdAttr:c,eventType:a,fieldValue:e(b)})}if("undefined"!=typeof caldera_conditionals&&void 0!==caldera_conditionals[d]){var h=a(document.getElementById(d)),i=f(d);for(var j in caldera_conditionals[d]){if(jQuery("#conditional_"+j).length){var k=caldera_conditionals[d][j].type,l=caldera_conditionals[d][j].group,m=[];for(var n in l){var o={},p=l[n];for(var q in p){var r=h.find('[data-field="'+p[q].field+'"]'),s=[],t="function"==typeof p[q].value?p[q].value():p[q].value;if(void 0!==p[q].selectors)for(var u in p[q].selectors){var v=new RegExp(u,"g");t=t.replace(v,a(p[q].selectors[u]).val())}if(o[q]=!1,r.is(":radio,:checkbox"))r=r.filter(":checked");else if(r.is("div"))r=jQuery("<input>").val(r.html());else if(!r.length){var w=h.find('[data-calc-field="'+p[q].field+'"]');w.length&&(r=h.find('[data-calc-field="'+p[q].field+'"]'))}if(r.length)for(var x=0;x<r.length;x++)s.push(r[x].value);else s.push(p[q].field);switch(p[q].compare){case"is":s.length&&s.indexOf(t.toString())>=0&&(o[q]=!0);break;case"isnot":s.length&&s.indexOf(t)<0&&(o[q]=!0);break;case">":case"greater":o[q]=parseFloat(s.reduce(function(a,b){return a+b}))>parseFloat(t);break;case"<":case"smaller":o[q]=parseFloat(s.reduce(function(a,b){return a+b}))<parseFloat(t);break;case"startswith":for(var x=0;x<s.length;x++)s[x].toLowerCase().substr(0,t.toLowerCase().length)===t.toLowerCase()&&(o[q]=!0);break;case"endswith":for(var x=0;x<s.length;x++)s[x].toLowerCase().substr(s[x].toLowerCase().length-t.toLowerCase().length)===t.toLowerCase()&&(o[q]=!0);break;case"contains":for(var x=0;x<s.length;x++)s[x].toLowerCase().indexOf(t)>=0&&(o[q]=!0)}}istrue=!0;for(var y in o)if(!1===o[y]){istrue=!1;break}m.push(istrue)}var z,A=jQuery("#conditional-"+j+"-tmpl").html(),B=jQuery("#conditional_"+j),C=jQuery('[data-field="'+j+'"]');if(m.length&&m.indexOf(!0)>=0?"show"===k?z="show":"hide"===k?z="hide":"disable"===k&&(z="disable"):z="show"===k?"hide":"disable"===k?"enable":"show","show"===z)B.html().length||(B.html(A).trigger("cf.add",{field:j}),jQuery(document).trigger("cf.add",{field:j}),function(b,d){var f,g=e(b);if(void 0!=g)if("object"==typeof g)for(var i in g)!0===g[i]&&(f=a(document.getElementById(i)),f.prop("checked",!0));else f=a("#"+b),f.val(g);null!==d&&(d.rebind(b),void 0===f&&(f=a("#"+b)),c.hasOwnProperty(b)&&(f.attr("data-unsync","1"),f.removeAttr("data-sync"),f.removeAttr("data-binds")),void 0!==f&&f.data("sync")&&new CalderaFormsFieldSync(f,f.data("binds"),h,a,d))}(j,i)),g("show",j,d);else if("hide"===z)B.html().length&&(!function(d,e){var f=a(document.getElementById(d));if(f.length){var g=f.val();g&&(b[d]=g)}else{var h;f=a("."+d),b[d]={},f.each(function(c,e){h=a(e),h.prop("checked")?b[d][h.attr("id")]=!0:b[d][h.attr("id")]=!1})}f.data("unsync")&&(c[d]=!0),null!==e&&e.unbind(d),b[d]}(j,i),C.val("").empty().prop("checked",!1),B.empty().trigger("cf.remove",{field:j}),jQuery(document).trigger("cf.remove",{field:j})),g("hide",j,d);else if("enable"===z||"disable"===z){var D=jQuery("#"+j);"enable"==z?(B.html().length?D.prop("disabled",!1):(B.html(A).trigger("cf.add",{field:j}),jQuery(document).trigger("cf.add").trigger("cf.enable",{field:j}),D.prop("disabled",!1)),g("enable",j,d)):(B.html().length?D.prop("disabled","disabled",{field:j}):(B.html(A).trigger("cf.remove"),jQuery(document).trigger("cf.remove",{field:j}).trigger("cf.disable",{field:j}),D.prop("disabled","disabled",{field:j})),g("disable",j,d))}}}}},calders_forms_init_conditions=function(){jQuery(".caldera_forms_form").on("change keyup","[data-field]",cf_debounce(function(b){var c=a(this).closest(".caldera_forms_form").prop("id");calders_forms_check_conditions(c)},10))},"undefined"!=typeof caldera_conditionals&&(calders_forms_init_conditions(),jQuery(".caldera_forms_form").find("[data-field]").first().trigger("change"))}(jQuery);var calders_forms_check_conditions,calders_forms_init_conditions;!function(a){var b={},c={};Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length>>>0,c=Number(arguments[1])||0;for((c=c<0?Math.ceil(c):Math.floor(c))<0&&(c+=b);c<b;c++)if(c in this&&this[c]===a)return c;return-1}),cf_debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=c&&!d;clearTimeout(d),d=setTimeout(function(){d=null,c||a.apply(e,f)},b),g&&a.apply(e,f)}},calders_forms_check_conditions=function(d){if("undefined"!=typeof caldera_conditionals&&void 0!==caldera_conditionals[d]){var e=a(document.getElementById(d)),f=function(a){return"object"==typeof window.cfstate&&window.cfstate.hasOwnProperty(a)?window.cfstate[a]:null}(d);for(var g in caldera_conditionals[d])if(jQuery("#conditional_"+g).length){var h=caldera_conditionals[d][g].type,i=caldera_conditionals[d][g].group,j=[];for(var k in i){var l={},m=i[k];for(var n in m){var o=e.find('[data-field="'+m[n].field+'"]'),p=[],q="function"==typeof m[n].value?m[n].value():m[n].value;if(void 0!==m[n].selectors)for(var r in m[n].selectors){var s=new RegExp(r,"g");q=q.replace(s,a(m[n].selectors[r]).val())}if(l[n]=!1,o.is(":radio,:checkbox")?o=o.filter(":checked"):o.is("div")?o=jQuery("<input>").val(o.html()):o.length||e.find('[data-calc-field="'+m[n].field+'"]').length&&(o=e.find('[data-calc-field="'+m[n].field+'"]')),o.length)for(var t=0;t<o.length;t++)p.push(o[t].value);else p.push(m[n].field);switch(m[n].compare){case"is":p.length&&p.indexOf(q.toString())>=0&&(l[n]=!0);break;case"isnot":p.length&&p.indexOf(q)<0&&(l[n]=!0);break;case">":case"greater":l[n]=parseFloat(p.reduce(function(a,b){return a+b}))>parseFloat(q);break;case"<":case"smaller":l[n]=parseFloat(p.reduce(function(a,b){return a+b}))<parseFloat(q);break;case"startswith":for(t=0;t<p.length;t++)p[t].toLowerCase().substr(0,q.toLowerCase().length)===q.toLowerCase()&&(l[n]=!0);break;case"endswith":for(t=0;t<p.length;t++)p[t].toLowerCase().substr(p[t].toLowerCase().length-q.toLowerCase().length)===q.toLowerCase()&&(l[n]=!0);break;case"contains":for(t=0;t<p.length;t++)p[t].toLowerCase().indexOf(q)>=0&&(l[n]=!0)}}istrue=!0;for(var u in l)if(!1===l[u]){istrue=!1;break}j.push(istrue)}var v,w=jQuery("#conditional-"+g+"-tmpl").html(),x=jQuery("#conditional_"+g),y=jQuery('[data-field="'+g+'"]');if(j.length&&j.indexOf(!0)>=0?"show"===h?v="show":"hide"===h?v="hide":"disable"===h&&(v="disable"):v="show"===h?"hide":"disable"===h?"enable":"show","show"===v)x.html().length||(x.html(w).trigger("cf.add",{field:g}),jQuery(document).trigger("cf.add",{field:g}),function(d,f){var g,h=function(a){if(b[a])return b[a]}(d);if(void 0!=h)if("object"==typeof h)for(var i in h)!0===h[i]&&(g=a(document.getElementById(i))).prop("checked",!0);else(g=a("#"+d)).val(h);null!==f&&(f.rebind(d),void 0===g&&(g=a("#"+d)),c.hasOwnProperty(d)&&(g.attr("data-unsync","1"),g.removeAttr("data-sync"),g.removeAttr("data-binds")),void 0!==g&&g.data("sync")&&new CalderaFormsFieldSync(g,g.data("binds"),e,a,f))}(g,f));else if("hide"===v)x.html().length&&(function(d,e){var f=a(document.getElementById(d));if(f.length){var g=f.val();g&&(b[d]=g)}else{var h;f=a("."+d),b[d]={},f.each(function(c,e){(h=a(e)).prop("checked")?b[d][h.attr("id")]=!0:b[d][h.attr("id")]=!1})}f.data("unsync")&&(c[d]=!0),null!==e&&e.unbind(d)}(g,f),y.val("").empty().prop("checked",!1),x.empty().trigger("cf.remove",{field:g}),jQuery(document).trigger("cf.remove",{field:g}));else if("enable"===v||"disable"===v){var z=jQuery("#"+g);"enable"==v?x.html().length?z.prop("disabled",!1):(x.html(w).trigger("cf.add",{field:g}),jQuery(document).trigger("cf.add").trigger("cf.enable",{field:g}),z.prop("disabled",!1)):x.html().length?z.prop("disabled","disabled",{field:g}):(x.html(w).trigger("cf.remove"),jQuery(document).trigger("cf.remove",{field:g}).trigger("cf.disable",{field:g}),z.prop("disabled","disabled",{field:g}))}}}},"undefined"!=typeof caldera_conditionals&&((calders_forms_init_conditions=function(){jQuery(".caldera_forms_form").on("change keyup","[data-field]",cf_debounce(function(b){var c=a(this).closest(".caldera_forms_form").prop("id");calders_forms_check_conditions(c)},10))})(),jQuery(".caldera_forms_form").find("[data-field]").first().trigger("change"))}(jQuery);
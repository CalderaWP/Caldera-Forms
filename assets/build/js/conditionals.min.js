var calders_forms_check_conditions,calders_forms_init_conditions;!function(a){Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length>>>0,c=Number(arguments[1])||0;for(c=c<0?Math.ceil(c):Math.floor(c),c<0&&(c+=b);c<b;c++)if(c in this&&this[c]===a)return c;return-1}),cf_debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},calders_forms_check_conditions=function(b){if("undefined"!=typeof caldera_conditionals&&"undefined"!=typeof caldera_conditionals[b]){var c=a("#"+b);for(var d in caldera_conditionals[b]){var e=jQuery("#conditional_"+d);if(e.length){var f=caldera_conditionals[b][d].type,g=caldera_conditionals[b][d].group,h=[];for(var i in g){var j={},k=g[i];for(var l in k){var m=c.find('[data-field="'+k[l].field+'"]'),n=[],o="function"==typeof k[l].value?k[l].value():k[l].value;if("undefined"!=typeof k[l].selectors)for(var p in k[l].selectors){var q=new RegExp(p,"g");o=o.replace(q,a(k[l].selectors[p]).val())}if(j[l]=!1,m.is(":radio,:checkbox")?m=m.filter(":checked"):m.is("div")&&(m=jQuery("<input>").val(m.html())),m.length)for(var r=0;r<m.length;r++)n.push(m[r].value);else n.push(k[l].field);switch(k[l].compare){case"is":n.length&&n.indexOf(o.toString())>=0&&(j[l]=!0);break;case"isnot":n.length&&n.indexOf(o)<0&&(j[l]=!0);break;case">":case"greater":j[l]=parseFloat(n.reduce(function(a,b){return a+b}))>parseFloat(o);break;case"<":case"smaller":j[l]=parseFloat(n.reduce(function(a,b){return a+b}))<parseFloat(o);break;case"startswith":for(var r=0;r<n.length;r++)n[r].toLowerCase().substr(0,o.toLowerCase().length)===o.toLowerCase()&&(j[l]=!0);break;case"endswith":for(var r=0;r<n.length;r++)n[r].toLowerCase().substr(n[r].toLowerCase().length-o.toLowerCase().length)===o.toLowerCase()&&(j[l]=!0);break;case"contains":for(var r=0;r<n.length;r++)n[r].toLowerCase().indexOf(o)>=0&&(j[l]=!0)}}istrue=!0;for(var s in j)if(j[s]===!1){istrue=!1;break}h.push(istrue)}var t,u=jQuery("#conditional-"+d+"-tmpl").html(),v=jQuery("#conditional_"+d),w=jQuery('[data-field="'+d+'"]');h.length&&h.indexOf(!0)>=0?"show"===f?t="show":"hide"===f?t="hide":"disable"===f&&(t="disable"):t="show"===f?"hide":"disable"===f?"enable":"show","show"===t?v.html().length||(v.html(u).trigger("cf.add"),jQuery(document).trigger("cf.add")):"hide"===t?v.html().length&&(w.val("").empty().prop("checked",!1),v.empty().trigger("cf.remove"),jQuery(document).trigger("cf.remove")):"enable"===t?v.html().length?(w.prop("disabled",!1),jQuery("#"+d).prop("disabled",!1)):(v.html(u).trigger("cf.add"),jQuery(document).trigger("cf.add").trigger("cf.enable")):"disable"===t&&(v.html().length?(w.prop("disabled","disabled"),jQuery("#"+d).prop("disabled","disabled")):(v.html(u).trigger("cf.remove"),jQuery(document).trigger("cf.remove").trigger("cf.disable"),jQuery('[data-field="'+d+'"]').prop("disabled","disabled")))}}}},calders_forms_init_conditions=function(){jQuery(".caldera_forms_form").on("change keyup","[data-field]",cf_debounce(function(b){var c=a(this).closest(".caldera_forms_form").prop("id");calders_forms_check_conditions(c)},10))},"undefined"!=typeof caldera_conditionals&&(calders_forms_init_conditions(),jQuery(".caldera_forms_form").find("[data-field]").first().trigger("change"))}(jQuery);
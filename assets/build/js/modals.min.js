jQuery(function(a){jQuery.fn.baldrick.registerhelper("wordpress_modal",{refresh:function(a){a.params.trigger.data("modalAutoclose")&&jQuery("#"+a.params.trigger.data("modalAutoclose")+"_baldrickModalCloser").trigger("click")},event:function(a){var b=jQuery(a),c="wm";if(b.data("modal")&&("true"!==b.data("modal")&&(c=b.data("modal")),!jQuery("#"+c+"_baldrickModal").length)){var d=jQuery("<div>",{id:c+"_baldrickModal",tabIndex:-1,"ariaLabelled-by":c+"_baldrickModalLable",class:"caldera-modal-wrap"}),e=jQuery("<div>",{class:"caldera-backdrop"});modalContent=jQuery("<div>",{class:"caldera-modal-body",id:c+"_baldrickModalBody"}),modalFooter=jQuery("<div>",{class:"caldera-modal-footer",id:c+"_baldrickModalFooter"}),modalHeader=jQuery("<div>",{class:"caldera-modal-title",id:c+"_baldrickModalTitle"}),modalCloser=jQuery("<a>",{href:"#close",class:"caldera-modal-closer","data-dismiss":"modal","aria-hidden":"true",id:c+"_baldrickModalCloser"}).html("&times;"),modalTitle=jQuery("<h3>",{class:"modal-label",id:c+"_baldrickModalLable"}),modalHeader.append(modalCloser).append(modalTitle).appendTo(d),trigger.data("static")||e.on("dismiss",function(a){a.preventDefault(),e.fadeOut(200),d.fadeOut(200,function(){jQuery(this).remove(),e.remove()})}),modalCloser.on("click",function(a){a.preventDefault(),e.fadeOut(200),d.fadeOut(200,function(){jQuery(this).remove(),e.remove()})}),modalContent.appendTo(d),modalFooter.appendTo(d),d.appendTo(jQuery("body")).hide().fadeIn(200),e.insertBefore(d).hide().fadeIn(200)}},request_complete:function(a,b){if(a.params.trigger.data("modal")){var c,d="wm",e="loading";if("true"!==a.params.trigger.data("modal")&&(d=a.params.trigger.data("modal")),jQuery("#"+d+"_baldrickModal"),c=jQuery("#"+d+"_baldrickModalBody"),modalTitle=jQuery("#"+d+"_baldrickModalTitle"),a.params.trigger.data("loadClass")&&(e=a.params.trigger.data("loadClass")),a.params.trigger.data("modalLife")){var f=parseFloat(a.params.trigger.data("modalLife"));f>0?setTimeout(function(){jQuery("#"+d+"_baldrickModalCloser").trigger("click")},f):jQuery("#"+d+"_baldrickModalCloser").trigger("click")}c.removeClass(e).show()}},after_filter:function(a){if(a.params.trigger.data("modal")&&a.params.trigger.data("targetInsert")){var b="wm";"true"!==a.params.trigger.data("modal")&&(b=a.params.trigger.data("modal"));var c=jQuery(a.data).prop("id",b+"_baldrickModalBody");a.data=c}return a},params:function(a,c){var d=a.trigger,e="wm",f="loading";if("true"!==a.trigger.data("modal")&&(e=a.trigger.data("modal")),a.trigger.data("loadClass")&&(f=a.trigger.data("loadClass")),d.data("modal")&&(a.url||d.data("modalContent"))){var g;a.url&&(a.target=jQuery("#"+e+"_baldrickModalBody"),a.loadElement=jQuery("#"+e+"_baldrickModalLoader"),a.target.empty()),g=d.data("modalTemplate")?jQuery(d.data("modalTemplate")):jQuery("#"+e+"_baldrickModal"),jQuery(".modal-backdrop").length;var h=jQuery("#"+e+"_baldrickModalLable"),i=(jQuery("#"+e+"_baldrickModalTitle"),jQuery("#"+e+"_baldrickModalBody")),j=jQuery("#"+e+"_baldrickModalFooter");if(h.empty().parent().hide(),i.addClass(f),j.empty().hide(),d.data("modalTitle")&&h.html(d.data("modalTitle")).parent().show(),d.data("modalButtons")){var k=d.data("modalButtons").trim().split(";");if(k.length){for(b=0;b<k.length;b++){var l=k[b].split("|"),m=l[0],n=l[1].trim(),o=jQuery.extend({},{class:"button "+c.triggerClass.substr(1)},"{"===n.substr(0,1)?JSON.parse(n):{"data-callback":n}),p=jQuery("<button>",o);l[2]&&p.addClass(l[2]),"dismiss"===n&&p.on("click",function(){jQuery("#"+e+"_baldrickModalCloser").trigger("click")}),j.append(p.html(m)),b<k.length&&j.append("&nbsp;")}j.show()}}var q={};a.trigger.data("modalWidth")&&(q.width=parseInt(a.trigger.data("modalWidth"))),a.trigger.data("modalHeight")&&(q.maxHeight=a.trigger.data("modalHeight")),(q.width||q.maxHeight)&&(q.width&&(q.marginLeft=q.width/2-q.width),g.css(q)),d.data("modalContent")&&(i.html(jQuery(d.data("modalContent")).html()),loader.hide(),i.show(),jQuery(c.triggerClass).baldrick(c))}}})});
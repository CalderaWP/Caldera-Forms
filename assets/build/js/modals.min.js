!function(a){a.fn.baldrick.registerhelper("wordpress_modal",{refresh:function(b){b.params.trigger.data("modalAutoclose")&&a("#"+b.params.trigger.data("modalAutoclose")+"_baldrickModalCloser").trigger("click")},event:function(b){var c=a(b),d="wm";if(c.data("modal")&&("true"!==c.data("modal")&&(d=c.data("modal")),!a("#"+d+"_baldrickModal").length)){var e=a("<div>",{id:d+"_baldrickModal",tabIndex:-1,"ariaLabelled-by":d+"_baldrickModalLable",class:"caldera-modal-wrap"}),f=a("<div>",{class:"caldera-backdrop"});modalContent=a("<div>",{class:"caldera-modal-body",id:d+"_baldrickModalBody"}),modalFooter=a("<div>",{class:"caldera-modal-footer",id:d+"_baldrickModalFooter"}),modalHeader=a("<div>",{class:"caldera-modal-title",id:d+"_baldrickModalTitle"}),modalCloser=a("<a>",{href:"#close",class:"caldera-modal-closer","data-dismiss":"modal","aria-hidden":"true",id:d+"_baldrickModalCloser"}).html("&times;"),modalTitle=a("<h3>",{class:"modal-label",id:d+"_baldrickModalLable"}),modalHeader.append(modalCloser).append(modalTitle).appendTo(e),trigger.data("static")||f.on("dismiss",function(b){b.preventDefault(),f.fadeOut(200),e.fadeOut(200,function(){a(this).remove(),f.remove()})}),modalCloser.on("click",function(b){b.preventDefault(),f.fadeOut(200),e.fadeOut(200,function(){a(this).remove(),f.remove()})}),modalContent.appendTo(e),modalFooter.appendTo(e),e.appendTo(a("body")).hide().fadeIn(200),f.insertBefore(e).hide().fadeIn(200)}},request_complete:function(b,c){if(b.params.trigger.data("modal")){var d,e="wm",f="loading";if("true"!==b.params.trigger.data("modal")&&(e=b.params.trigger.data("modal")),a("#"+e+"_baldrickModal"),d=a("#"+e+"_baldrickModalBody"),modalTitle=a("#"+e+"_baldrickModalTitle"),b.params.trigger.data("loadClass")&&(f=b.params.trigger.data("loadClass")),b.params.trigger.data("modalLife")){var g=parseFloat(b.params.trigger.data("modalLife"));g>0?setTimeout(function(){a("#"+e+"_baldrickModalCloser").trigger("click")},g):a("#"+e+"_baldrickModalCloser").trigger("click")}d.removeClass(f).show()}},after_filter:function(b){if(b.params.trigger.data("modal")&&b.params.trigger.data("targetInsert")){var c="wm";"true"!==b.params.trigger.data("modal")&&(c=b.params.trigger.data("modal"));var d=a(b.data).prop("id",c+"_baldrickModalBody");b.data=d}return b},params:function(c,d){var e=c.trigger,f="wm",g="loading";if("true"!==c.trigger.data("modal")&&(f=c.trigger.data("modal")),c.trigger.data("loadClass")&&(g=c.trigger.data("loadClass")),e.data("modal")&&(c.url||e.data("modalContent"))){var h;c.url&&(c.target=a("#"+f+"_baldrickModalBody"),c.loadElement=a("#"+f+"_baldrickModalLoader"),c.target.empty()),h=a(e.data("modalTemplate")?e.data("modalTemplate"):"#"+f+"_baldrickModal"),a(".modal-backdrop").length;var i=a("#"+f+"_baldrickModalLable"),j=(a("#"+f+"_baldrickModalTitle"),a("#"+f+"_baldrickModalBody")),k=a("#"+f+"_baldrickModalFooter");if(i.empty().parent().hide(),j.addClass(g),k.empty().hide(),e.data("modalTitle")&&i.html(e.data("modalTitle")).parent().show(),e.data("modalButtons")){var l=a.trim(e.data("modalButtons")).split(";");if(l.length){for(b=0;b<l.length;b++){var m=l[b].split("|"),n=m[0],o=m[1].trim(),p=a.extend({},{class:"button "+d.triggerClass.substr(1)},"{"===o.substr(0,1)?jQuery.parseJSON(o):{"data-callback":o}),q=a("<button>",p);m[2]&&q.addClass(m[2]),"dismiss"===o&&q.on("click",function(){a("#"+f+"_baldrickModalCloser").trigger("click")}),k.append(q.html(n)),b<l.length&&k.append("&nbsp;")}k.show()}}var r={};c.trigger.data("modalWidth")&&(r.width=parseInt(c.trigger.data("modalWidth"))),c.trigger.data("modalHeight")&&(r.maxHeight=c.trigger.data("modalHeight")),(r.width||r.maxHeight)&&(r.width&&(r.marginLeft=r.width/2-r.width),h.css(r)),e.data("modalContent")&&(j.html(a(e.data("modalContent")).html()),loader.hide(),j.show(),a(d.triggerClass).baldrick(d))}}})}(jQuery);
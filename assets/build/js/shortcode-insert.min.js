jQuery(function(a){if(a(".color-field").wpColorPicker({mode:"rgba"}),a("body").on("click","#caldera-forms-form-insert,#wp_fs_caldera-forms",function(b){b.preventDefault();var c=a(".caldera-forms-insert-modal");data=a(this).data("settings"),data&&(data.id&&a('.selected-form-shortcode[value="'+data.id+'"]').prop("checked",!0),data.modal&&(a(".set_cf_modal").prop("checked",!0),a(".modal-forms-setup").show()),data.type&&a(".modal_trigger_type").val(data.type),data.content&&a(".modal_trigger").val(data.content),data.width&&a(".modal_width").val(data.width),a(this).data("settings",{})),c.fadeIn(100)}),a("body").on("click",".caldera-modal-closer",function(b){b.preventDefault();var c=a(".caldera-forms-insert-modal");a("#calderaf_forms_shortcode_modal")[0].reset(),a(".modal-forms-setup").hide(),c.fadeOut(100)}),a("body").on("change",".set_cf_modal",function(b){a(this).is(":checked")?a(".modal-forms-setup").show():a(".modal-forms-setup").hide()}),a("body").on("click",".caldera-form-shortcode-insert",function(b){b.preventDefault();var c,d=a(".selected-form-shortcode:checked"),e=a(".set_cf_modal").prop("checked"),f=a(".modal_trigger").val(),g=a(".modal_trigger_type").val(),h=a(".modal_width").val();if(d.length){var i="caldera_form";e&&(i="caldera_form_modal"),c="["+i+' id="'+d.val()+'"',!0===e&&"button"===g&&(c+=' type="'+g+'"'),h.length&&(c+=' width="'+h+'"'),c+="]",e&&(f.length?c+=f:c+=d.parent().text(),c+="[/caldera_form_modal]"),a("#calderaf_forms_shortcode_modal")[0].reset(),a(".modal-forms-setup").hide(),d.prop("checked",!1),window.send_to_editor(c),a(".caldera-modal-closer").trigger("click")}}),"undefined"!=typeof wp&&void 0!==wp.media&&0!=a("#caldera-forms-form-insert").length){var b=wp.media;"function"==typeof wp.mce.views.register&&wp.mce.views.register("caldera_form",{template:b.template("editor-caldera-forms"),initialize:function(){this.fetch()},setLoader:function(){this.setContent('<div class="loading-placeholder"><div class="dashicons dashicons-update" style="color:#a3be5f;"></div><div class="wpview-loading"><ins style="background-color:#a3be5f;"></ins></div></div>')},fetch:function(){var b=this,c={post_id:a("#post_ID").val(),content:b.shortcode.content,atts:b.shortcode.attrs};wp.ajax.post("cf_get_form_preview",c).done(function(a){b.render(a.html)}).fail(function(a){b.render(a.html)})},edit:function(a){var b=this.shortcode.attrs.named;b.content=this.shortcode.content,jQuery("#caldera-forms-form-insert").data("settings",b).trigger("click")}})}});
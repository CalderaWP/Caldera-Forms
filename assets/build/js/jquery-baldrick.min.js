!function(a){if(!b){var b={},c={},d={_plugins:{},load:{},bind:{},event:function(a,b){return a},pre_filter:function(a){return a.data},filter:function(a){return a},target:function(a){if("string"==typeof a.params.success?"function"==typeof window[a.params.success]&&window[a.params.success](a):"function"==typeof a.params.success&&a.params.success(a),a.params.target)if(a.params.target.is("textarea,input")&&"object"==typeof a.data?a.params.target.val(JSON.stringify(a.data)).trigger("change"):a.params.target[a.params.targetInsert](a.data),"string"==typeof a.params.callback){if("function"==typeof window[a.params.callback])return window[a.params.callback](a)}else if("function"==typeof a.params.callback)return a.params.callback(a)},request_data:function(a){return a.data},request:function(d){if((d.params.trigger.data("cacheLocal")||d.params.trigger.data("cacheSession"))&&!d.params.trigger.data("cachePurge")){var e;if(d.params.trigger.data("cacheLocal")?e=d.params.trigger.data("cacheLocal"):d.params.trigger.data("cacheSession")&&(e=d.params.trigger.data("cacheSession")),void 0!==b[e])return{data:b[e]};if("undefined"!=typeof Storage){var f;if(d.params.trigger.data("cacheLocal")?f=localStorage.getItem(e):d.params.trigger.data("cacheSession")&&(f=sessionStorage.getItem(e)),f){try{f=JSON.parse(f)}catch(a){f=f}return{data:f}}}}return c[d.params.trigger.prop("id")]&&c[d.params.trigger.prop("id")].abort(),c[d.params.trigger.prop("id")]=a.ajax(d.request),c[d.params.trigger.prop("id")]},request_complete:function(a){a.params.complete(a),a.params.loadElement.removeClass(a.params.loadClass),c[a.params.trigger.prop("id")]&&delete c[a.params.trigger.prop("id")]},request_error:function(a){a.params.error(a),a.params.complete(a.jqxhr,a.textStatus)},refresh:function(b,c){a(c.triggerClass).baldrick(c)}};a.fn.baldrick=function(b){var c=function(a,b,c){var d;for(var e in h.helpers._plugins)if("function"==typeof h.helpers._plugins[e][a]&&(d=h.helpers._plugins[e][a](b,h,c),void 0!==d&&(b=d),!1===b))return!1;if("function"==typeof h.helpers[a]&&(d=h.helpers[a](b,h,c),void 0!==d&&(b=d),!b))return!1;for(var f in h.helpers._plugins)if("function"==typeof h.helpers._plugins[f]["after_"+a]&&(d=h.helpers._plugins[f]["after_"+a](b,h,c),void 0!==d&&(b=d),!1===b))return!1;return b},e=function(b){var c={},d=b.find("input,radio,checkbox,select,textarea,file"),e={};if(d.length){for(var f=0;f<d.length;f++)if(null!==d[f].getAttribute("name")){for(var g=a(d[f]),h=g.prop("name").replace(/\[/gi,":").replace(/\]/gi,""),i=h.split(":"),j=g.is(":checkbox,:radio")?g.filter(":checked").val():g.val(),k={},l=i.length-1;l>=0;l--){var m=i[l];if(0===m.length&&(void 0===e[i[l-1]]?e[i[l-1]]=0:e[i[l-1]]+=1,m=e[i[l-1]]),l===i.length-1)k[m]=j;else{var n=k;k={},k[m]=n}}a.extend(!0,c,k)}return c}},f=this.selector,g=this.not("._tisBound");g.addClass("_tisBound"),void 0!==b&&"object"==typeof b.helper&&(d._plugins._params_helpers_=b.helper);var h=a.extend(!0,b,{helpers:d},{triggerClass:f}),i=function(){return!0},j={init:i,before:i,callback:!1,success:!1,complete:i,error:i};for(var k in j)"string"==typeof h[k]?j[k]="function"==typeof window[h[k]]?window[h[k]]:i:"function"==typeof h[k]&&(j[k]=h[k]);return g=c("bind",g),!1===g?this:c("ready",g.each(function(b){this.id||(this.id="baldrick_trigger_"+((new Date).getTime()+b));var d=a(this),f=d.data("event")?d.data("event"):h.event?h.event:d.is("form")?"submit":"click";return d.on(f,function(b){var d=a(c("event",this,b));if(d.data("for")){var i=a(d.data("for")),k=a.extend({},i.data(),d.data());return delete k.for,i.data(k),i.is("form")?(i.submit(),this):i.trigger(i.data("event")?i.data("event"):f)}if(d.is("form")&&!d.data("request")&&d.attr("action")&&d.data("request",d.attr("action")),d.is("a")&&!d.data("request")&&d.attr("href")&&(d.attr("href").indexOf("#")<0?d.data("request",d.attr("href")):d.data("href",d.attr("href"))),!1===(d.data("before")&&"function"==typeof window[d.data("before")]?window[d.data("before")](this,b):j.before(this,b)))return void a(h.triggerClass).baldrick(h);if(!1===(d.data("init")&&"function"==typeof window[d.data("init")]?window[d.data("init")](this,b):j.init(this,b)))return void a(h.triggerClass).baldrick(h);var l={trigger:d,callback:d.data("callback")?"function"==typeof window[d.data("callback")]?window[d.data("callback")]:d.data("callback"):j.callback,success:d.data("success")?"function"==typeof window[d.data("success")]?window[d.data("success")]:d.data("success"):j.success,method:d.data("method")?d.data("method"):d.attr("method")?d.attr("method"):h.method?h.method:"GET",dataType:d.data("type")?d.data("type"):!!h.dataType&&h.dataType,timeout:d.data("timeout")?d.data("timeout"):12e4,target:d.data("target")?"_parent"===d.data("target")?d.parent():a("_self"===d.data("target")?d:d.data("target")):a(h.target?h.target:"<html>"),targetInsert:d.data("targetInsert")?"replace"===d.data("targetInsert")?"replaceWith":d.data("targetInsert"):h.targetInsert?"replace"===h.targetInsert?"replaceWith":h.targetInsert:"html",loadClass:d.data("loadClass")?d.data("loadClass"):h.loadClass?h.loadClass:"loading",activeClass:d.data("activeClass")?d.data("activeClass"):h.activeClass?h.activeClass:"active",activeElement:d.data("activeElement")?"_parent"===d.data("activeElement")?d.parent():a(d.data("activeElement")):h.activeElement?"_parent"===h.activeElement?d.parent():a(h.activeElement):d,cache:d.data("cache")?d.data("cache"):!!h.cache&&h.cache,complete:d.data("complete")&&"function"==typeof window[d.data("complete")]?window[d.data("complete")]:j.complete,error:d.data("error")&&"function"==typeof window[d.data("error")]?window[d.data("error")]:j.error,resultSelector:!1,event:f};if(l.url=d.data("request")?d.data("request"):h.request?h.request:l.callback,l.loadElement=d.data("loadElement")?"_parent"===d.data("loadElement")?d.parent():a(d.data("loadElement")):h.loadElement&&a(h.loadElement)?a(h.loadElement):l.target,!1===(l=c("params",l)))return!1;if(b.preventDefault(),"function"==typeof window[l.url]){var m=window[l.url](l,f);return m=c("pre_filter",{data:m,params:l}),m=c("filter",{data:m,rawData:m,params:l}),c("target",m),c("refresh",{params:l}),c("request_complete",{jqxhr:null,textStatus:"complete",request:u,params:l}),this}try{if(a(l.url).length)var m=a(l.url).is("input,select,radio,checkbox,file,textarea")?a(l.url).val():a(l.url).is("form")?e(a(l.url)):a(l.url).html()}catch(b){}if(void 0!==m){if("json"===l.dataType)try{m=JSON.parse(m)}catch(b){}m=c("pre_filter",{data:m,params:l}),m=c("filter",{data:m,rawData:m,params:l}),c("target",m),c("refresh",{params:l}),c("request_complete",{jqxhr:null,textStatus:"complete",request:u,params:l});return this}switch(typeof l.url){case"function":return l.url(this,b);case"boolean":case"object":return;case"string":if(l.url.indexOf(" ")>-1){var n=l.url.split(" ");l.url=n[0],l.resultSelector=n[1]}}d.data("group")?a('._tisBound[data-group="'+d.data("group")+'"]').each(function(){var b=a(this);(b.data("activeElement")?"_parent"===b.data("activeElement")?b.parent():a(b.data("activeElement")):h.activeElement?"_parent"===h.activeElement?d.parent():a(h.activeElement):b).removeClass(b.data("activeClass")?b.data("activeClass"):h.activeClass?h.activeClass:l.activeClass)}):a("._tisBound:not([data-group])").each(function(){var b=a(this);(b.data("activeElement")?"_parent"===b.data("activeElement")?b.parent():a(b.data("activeElement")):h.activeElement?"_parent"===h.activeElement?d.parent():a(h.activeElement):b).removeClass(b.data("activeClass")?b.data("activeClass"):h.activeClass?h.activeClass:l.activeClass)});l.activeElement.addClass(l.activeClass),l.loadElement.addClass(l.loadClass);var o;if("undefined"==typeof FormData||!d.is("input:file")&&"POST"!==l.method){var p=d.serializeArray(),q=l.trigger.data(),r=[];h.data&&(q=a.extend(h.data,q)),p.length&&(a.each(p,function(a,b){r.push(b)}),l.requestData=e(d)),l.data&&(q=a.extend(q,l.data)),o=q,l.requestData=a.extend(d.data(),l.requestData)}else{l.method="POST",l.contentType=!1,l.processData=!1,l.cache=!1,l.xhrFields={onprogress:function(a){a.lengthComputable}},o=d.is("form")?new FormData(d[0]):new FormData,d.is("input,select,textarea")&&d.data("_value",d.val());for(var s in l.trigger.data())o.append(s,l.trigger.data(s));if(l.data&&o.append("data",JSON.stringify(l.data)),d.is("input,select,textarea"))if(d.is("input:file"))if(d[0].files.length>1)for(var t=0;t<d[0].files.length;t++)o.append(d.prop("name"),d[0].files[t]);else o.append(d.prop("name"),d[0].files[0]);else d.is("input:checkbox")||d.is("input:radio")?d.prop("checked")&&o.append(d.prop("name"),d.val()):o.append(d.prop("name"),d.val())}var u={url:l.url,data:c("request_data",{data:o,params:l}),cache:l.cache,timeout:l.timeout,type:l.method,success:function(b,d,e){if(l.resultSelector)if("object"==typeof b){for(var f=l.resultSelector.replace(/\[/g,".").replace(/\]/g,"").split("."),g=b,h=0;h<f.length;h++)g=g[f[h]];b=g}else if("string"==typeof b){var i=a(l.resultSelector,a("<html>").html(b));1===i.length?b=a("<html>").html(i).html():(b=a("<html>"),i.each(function(){b.append(this)}),b=b.html())}var j=b;if(l.trigger.data("cacheLocal")||l.trigger.data("cacheSession")){var k;if(l.trigger.data("cacheLocal")?k=l.trigger.data("cacheLocal"):l.trigger.data("cacheSession")&&(k=l.trigger.data("cacheSession")),"undefined"!=typeof Storage)if(l.trigger.data("cacheLocal"))try{localStorage.setItem(k,e.responseText)}catch(a){console.log(a)}else if(l.trigger.data("cacheSession"))try{sessionStorage.setItem(k,e.responseText)}catch(a){console.log(a)}a(window).trigger("baldrick.cache",k)}b=c("pre_filter",{data:b,request:u,params:l,xhr:e}),b=c("filter",{data:b,rawData:j,request:u,params:l,xhr:e}),c("target",b)},complete:function(a,b){c("request_complete",{jqxhr:a,textStatus:b,request:u,params:l}),c("refresh",{jqxhr:a,textStatus:b,request:u,params:l}),d.data("once")&&d.off(f).removeClass("_tisBound")},error:function(a,b,d){c("request_error",{jqxhr:a,textStatus:b,error:d,request:u,params:l})}};if(l.dataType&&(u.dataType=l.dataType),void 0!==l.contentType&&(u.contentType=l.contentType),void 0!==l.processData&&(u.processData=l.processData),void 0!==l.xhrFields&&(u.xhrFields=l.xhrFields),!1===(u=c("request_params",u,l)))return g;var v=c("request",{request:u,params:l});if(v.data){var m=v.data;c("target",c("filter",c("pre_filter",{data:m,request:u,params:l}))),c("request_complete",{jqxhr:!1,textStatus:!0,request:u,params:l}),c("refresh",{jqxhr:!1,textStatus:!0,request:u,params:l})}}),(d.data("autoload")||d.data("poll"))&&(d.data("delay")?setTimeout(function(a,b){return a.trigger(b)},d.data("delay"),d,f):d.trigger(f)),d.data("poll")&&(d.data("delay")?setTimeout(function(a,b){return setInterval(function(a,b){return a.trigger(b)},a.data("poll"),a,b)},d.data("delay")):setInterval(function(a,b){return a.trigger(b)},d.data("poll"),d,f)),this}))},a.fn.baldrick.cacheObject=function(a,c){b[a]=c},a.fn.baldrick.registerhelper=function(b,c,e){var f={};"object"==typeof c?(f[b]=c,d._plugins=a.extend(!0,f,d._plugins)):"string"==typeof c&&"string"==typeof b&&"function"==typeof e&&(f[c]={},f[c][b]=e,d._plugins=a.extend(!0,f,d._plugins))}}}(jQuery);